<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>窗外临街</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://peihao.space/"/>
  <updated>2016-04-01T15:57:15.444Z</updated>
  <id>http://peihao.space/</id>
  
  <author>
    <name>培豪</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Matplotlib快速绘图（2）</title>
    <link href="http://peihao.space/2016/04/01/matplotlib2/"/>
    <id>http://peihao.space/2016/04/01/matplotlib2/</id>
    <published>2016-04-01T15:27:51.000Z</published>
    <updated>2016-04-01T15:57:15.444Z</updated>
    
    <content type="html">&lt;p&gt;matplotlib 是python最著名的绘图库，它提供了一整套和matlab相似的命令API，十分适合交互式地进行制图。而且也可以方便地将它作为绘图控件，嵌入GUI应用程序中。&lt;/p&gt;
&lt;p&gt;它的文档相当完备，并且 Gallery页面 中有上百幅缩略图，打开之后都有源程序。因此如果你需要绘制某种类型的图，只需要在这个页面中浏览/复制/粘贴一下&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;，基本上都能搞定。&lt;/p&gt;
&lt;p&gt;在Linux下比较著名的数据图工具还有gnuplot，这个是免费的，Python有一个包可以调用gnuplot，但是语法比较不习惯，而且画图质量不高。&lt;/p&gt;
&lt;p&gt;而 Matplotlib则比较强：Matlab的语法、python语言、latex的画图质量（还可以使用内嵌的latex引擎绘制的数学公式）。&lt;/p&gt;
&lt;h1 id=&quot;绘制一组幂函数&quot;&gt;绘制一组幂函数&lt;/h1&gt;&lt;p&gt;matplotlib的pyplot子库提供了和matlab类似的绘图API，方便用户快速绘制2D图表&lt;/p&gt;
&lt;p&gt;先从一个简单的例子开始讨论。假设要在一个图形中显示一组幂函数。这组幂函数的基不同，分别为10，自然对数 e 和2。可以用如下 Python 脚本去描绘这组曲线，生成的图形如下&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; matplotlib.matlab &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; * &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;x = linspace(-&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;f1 = power(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, x) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;f2 = power(e, x) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;f3 = power(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, x)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plot(x, f1, &lt;span class=&quot;string&quot;&gt;&#39;r&#39;&lt;/span&gt;,  x, f2, &lt;span class=&quot;string&quot;&gt;&#39;b&#39;&lt;/span&gt;, x, f3, &lt;span class=&quot;string&quot;&gt;&#39;g&#39;&lt;/span&gt;, linewidth=&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;axis([-&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, -&lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;text(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;7.5&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;r&#39;$10^x$&#39;&lt;/span&gt;, fontsize=&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;text(&lt;span class=&quot;number&quot;&gt;2.2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;7.5&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;r&#39;$e^x$&#39;&lt;/span&gt;, fontsize=&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;text(&lt;span class=&quot;number&quot;&gt;3.2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;7.5&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;r&#39;$2^x$&#39;&lt;/span&gt;, fonsize=&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title(&lt;span class=&quot;string&quot;&gt;&#39;A simple example&#39;&lt;/span&gt;, fontsize=&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;savefig(&lt;span class=&quot;string&quot;&gt;&#39;power.png&#39;&lt;/span&gt;, dpi=&lt;span class=&quot;number&quot;&gt;75&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;show()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;http://www.ibm.com/developerworks/cn/linux/l-matplotlib/power.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;程序的第一行装载了 matlab 模块。接下来的几行语句（至 savefig 之前）好像是在运行 Matlab 程序，因为 linspace， power, plot，axis, text, title 这些函数在 Matlab 中也存在。这个例子展示了 Matplotlib 中几个比较常用的绘图函数，如 plot，axis，title 等的用法。其中 plot 是一个功能十分强大的函数, 通过改变它的参数选项，可以灵活地修改图形的各种属性，比如选用的线型，颜色，宽度等。&lt;/p&gt;
&lt;h1 id=&quot;显示图形中的数学公式&quot;&gt;显示图形中的数学公式&lt;/h1&gt;&lt;p&gt;Matplotlib 可以支持一部分 TeX 的排版指令，因此用户在绘制含有数学公式的图形时会感到很方便并且可以得到比较满意的显示效果，所需要的仅仅是一些 TeX 的排版知识。下面的这个例子显示了如何在图形的不同位置上, 如坐标轴标签，图形的标题以及图形中适当的位置处，显示数学公式。相应的 Python 程序如下.&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; matplotlib.matlab &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt;  &lt;span class=&quot;title&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(x, c)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    m1 = sin(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;*pi*x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    m2 = exp(-c*x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; multiply(m1, m2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;x = linspace(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sigma = &lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plot(x, f(x, sigma), &lt;span class=&quot;string&quot;&gt;&#39;r&#39;&lt;/span&gt;, linewidth=&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;xlabel(&lt;span class=&quot;string&quot;&gt;r&#39;$\rm&amp;#123;time&amp;#125;  \  t$&#39;&lt;/span&gt;, fontsize=&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ylabel(&lt;span class=&quot;string&quot;&gt;r&#39;$\rm&amp;#123;Amplitude&amp;#125; \ f(x)$&#39;&lt;/span&gt;, fontsize=&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title(&lt;span class=&quot;string&quot;&gt;r&#39;$f(x) \ \rm&amp;#123;is \ damping  \ with&amp;#125; \ x$&#39;&lt;/span&gt;, fontsize=&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;text(&lt;span class=&quot;number&quot;&gt;2.0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;r&#39;$f(x) = \rm&amp;#123;sin&amp;#125;(2 \pi  x^2) e^&amp;#123;\sigma x&amp;#125;$&#39;&lt;/span&gt;, fontsize=&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;savefig(&lt;span class=&quot;string&quot;&gt;&#39;latex.png&#39;&lt;/span&gt;, dpi=&lt;span class=&quot;number&quot;&gt;75&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;show()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;http://www.ibm.com/developerworks/cn/linux/l-matplotlib/latex.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;从程序中可以看出，在 Matplotlib 中进行有关数学公式的排版是很简单的。与 TeX 排版时的约定一样，要插入的公式部分由一对美元符号 $ 来进行标识，而具体的排版命令与 TeX 一样。在任何可以显示文本的地方（如轴的标签，标题处等）都可以插入需要的公式。需要注意的是，数学公式所在的字符串开始之处有一个标记 r，表示该字符串是一个 raw string。这是因为排版公式时，字符串所包含的内容必须按照 TeX 的规范，而不是其他的规范，来进行解析。所以使用 raw string 可以避免其它规则解释字符串中某些特殊字符所带来的歧义。从生成的图形可以看到，公式显示的效果是比较美观的。&lt;/p&gt;
&lt;h1 id=&quot;GLP_集合计算结果的可视化&quot;&gt;GLP 集合计算结果的可视化&lt;/h1&gt;&lt;p&gt;Python 是一种比较适合用来进行科学计算的脚本语言，如果利用了 Numeric 及 Numarray 模块，它的计算能力还能得到进一步的增强。 Matplotlib 也充分利用了这两个模块，可以高质量地完成计算结果可视化的工作。下面是一个计算和显示两维好格子点 GLP (Good Lattice Point Set)集合的例子。 GLP 集合是一种用算法产生的伪随机数的集合,它在一些优化计算中很有用，详细的介绍可以在参考文献里找到。下面的 Python 程序先定义了一个函数 glp(n1, n2) 用以产生需要的 GLP 集合, 接着利用 Matplotlib 来显示它的分布情况（应该是均匀分布的）。&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; matplotlib.matlab &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;glp&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(n1, n2)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	q = zeros((&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, n2), Float)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	h1 = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;; h2 = n1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; arange(n2-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		q[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;][ i] = (fmod(h1*(i+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), n2)-&lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;)/n2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		q[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;][ i] = (fmod(h2*(i+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), n2)-&lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;)/n2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	q[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;][n2-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] = (n2-&lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;)/n2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	q[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;][n2-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] = (n2-&lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;)/n2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; q&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;n1 = &lt;span class=&quot;number&quot;&gt;377&lt;/span&gt;; n2 = &lt;span class=&quot;number&quot;&gt;610&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;q = glp(n1, n2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;x = q[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, :]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;y = q[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, :]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plot(x, y, &lt;span class=&quot;string&quot;&gt;&#39;r.&#39;&lt;/span&gt;, linewidth=&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;axis([&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title(&lt;span class=&quot;string&quot;&gt;r&#39;$\rm&amp;#123;GLP \ set \ with&amp;#125; \ n_1 = 377, \ n_2 = 610$&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;savefig(&lt;span class=&quot;string&quot;&gt;&#39;glp.png&#39;&lt;/span&gt;, dpi = &lt;span class=&quot;number&quot;&gt;75&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;show()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;http://www.ibm.com/developerworks/cn/linux/l-matplotlib/glp.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;最初我们是用 Matlab 来完成这个工作的，现在用 Python 来实现一样很简洁。程序中函数 glp 的实现主要是利用了模快 Numeric，计算得到的结果用 plot 函数直接加以显示，十分方便。这个例子（包括上一个例子）显示了，在利用 Python 进行某些科学及工程计算时，Matplotlib 往往能简洁高效地完成计算结果可视化的工作。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;matplotlib 是python最著名的绘图库，它提供了一整套和matlab相似的命令API，十分适合交互式地进行制图。而且也可以方便地将它作为绘图控件，嵌入GUI应用程序中。&lt;/p&gt;
&lt;p&gt;它的文档相当完备，并且 Gallery页面 中有上百幅缩略图，打开之后都有源程序。因此如果你需要绘制某种类型的图，只需要在这个页面中浏览/复制/粘贴一下
    
    </summary>
    
      <category term="matplotlib" scheme="http://peihao.space/categories/matplotlib/"/>
    
    
      <category term="matplotlib" scheme="http://peihao.space/tags/matplotlib/"/>
    
  </entry>
  
  <entry>
    <title>Virtual Channel Ruter</title>
    <link href="http://peihao.space/2016/04/01/Virtual%20Channel/"/>
    <id>http://peihao.space/2016/04/01/Virtual Channel/</id>
    <published>2016-04-01T04:23:35.000Z</published>
    <updated>2016-03-31T16:24:48.629Z</updated>
    
    <content type="html">&lt;h1 id=&quot;VC与WormHole的对比&quot;&gt;VC与WormHole的对比&lt;/h1&gt;&lt;p&gt;虚信道路由器通过引入虚信道技术，将一个物理信道分成逻辑上的多个虚信道。多个虚信道对物理信道分时复用，通过对虚信道的合理调度，当网络中发生数据分组阻塞时，阻塞的分组被缓存在某一条虚信道的缓存中，其它分组能够使用其它的虚信道继续进行传输。&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;虚信道路由器是对基本虫孔路由器的改进，它解决了虫孔路由器的阻塞问题，能够提高物理信道的利用率，显著增加片上网络的性能。虚信道路由器需要为每条虚信道提供一个独立的缓存空间，虚信道数目增加一条，路由器的缓存空间需要相应增加一倍。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/article/router/wormhole-router.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;上图左侧是基本虫孔路由器出现的阻塞问题。路由器1中的分组A要去往路由器3的南输入端口，需要经过路由器l的东输出端口（即路由器2的西输入端口）离开，而路由器2的西输入端口被分组B占用，分组A不能使用，被阻塞在路由器l，尽管路由器3的南输入端口是空闲的，但是分组A将无法到达。&lt;/p&gt;
&lt;p&gt;上图右侧是使用虚信道架构的路由器结构传输，可以是双虚信道或多虚信道，分组A将会通过红色的通道到达路由器3。&lt;/p&gt;
&lt;h1 id=&quot;VC结构&quot;&gt;VC结构&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/img/article/router/5port-virtual_channel.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;如图是传统的5端口虚信道路由器整体结构。它有5个输入端口与5个输出端口，每个输入端口支持n个虚信道（Virtual Channel，简称VC），每个VC维持一个用于缓存数据的FIFO队列，其中4个端口表示东、南、西、北四个方向，与相邻的4个路由器相连，另外一个表示本地端口，与IP核相连。&lt;/p&gt;
&lt;p&gt;另外还包含计算模块（Routing Computation Unit，简称RC）、虚信道分配（Virtual Channel Allocator，简称VA）模块、开关分配（Switch Allocator，简称SA）模块及交叉开关（Crossbar）。虚信道采用的是虫孔交换机制，同时使用缓冲队列放置在输入端口的交换结构。&lt;/p&gt;
&lt;p&gt;虚信道路由器的工作过程与虫孔路由器基本相同，不同之处在于多了一个虚信道分配操作。当头微片路由计算完成后，这时候由于一个输出端口有多个输出虚信道，该头微片只能占用其中一个，所以需要经过&lt;strong&gt;虚信道分配&lt;/strong&gt;为其分配一个空闲的输出虚信道后，&lt;strong&gt;才能进行后面的开关分配和开关传输&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;另外虚信道路由器通过引入虚信道技术，将一个物理信道分成逻辑上的多个虚信道，多个虚信道对物理信道分时复用，意味着&lt;em&gt;该头微片所在的分组不能时时占用物理信道&lt;/em&gt;，也就不能时时占用与该物理信道相连的输出端口，因此该头微片所在分组的其它微片也需要每个时钟周期都参与开关分配，而不能直接使用头微片开关分配的结果，即虚信道路由器中&lt;strong&gt;开关分配&lt;/strong&gt;以&lt;em&gt;微片为单位&lt;/em&gt;进行，这是另外一个不同点。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/article/router/VC-trans.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;从上面的描述中我们可以看出，虚信道路由器其实也可以分为一条控制路径和一条数据路径。控制路径由路由计算单元（RC）、虚信道分配单元（VA）和开关分配单元（SA）组成。&lt;/p&gt;
&lt;p&gt;与虫孔路由器不同，虚信道路由器的控制路径为该头微片所在的分组预约的是&lt;strong&gt;一个输出端口中的一个输出虚信道&lt;/strong&gt;，&lt;em&gt;其它分组微片&lt;/em&gt;不能使用&lt;em&gt;该输出虚信道&lt;/em&gt;，直到该头微片的整个分组传输完成，但是其它分组微片可以使用剩下的未被占用的输出虚信道。&lt;/p&gt;
&lt;p&gt;数据路径由输入缓存和交叉开关构成，分组微片到来后由输入缓存存储，经过控制路径分配到输出端口后，经交叉开关转发到目的节点。&lt;/p&gt;
&lt;p&gt;同时虚信道路由器的工作是按4级流水方式工作，分别是路由计算（RC）、虚信道分配（VA）、开关分配（SA）和开关传输（ST）。以分组包含4个微片为例，其中路由信息只包含在头微片中，所以头微片VA成功后，体微片和尾微片可以直接使用VA的结果，跳过路由计算和虚信道分配阶段，直接进入开关分配阶段。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;VC与WormHole的对比&quot;&gt;VC与WormHole的对比&lt;/h1&gt;&lt;p&gt;虚信道路由器通过引入虚信道技术，将一个物理信道分成逻辑上的多个虚信道。多个虚信道对物理信道分时复用，通过对虚信道的合理调度，当网络中发生数据分组阻塞时，阻塞的分组被缓存在某一条虚信道的缓存中，其它分组能够使用其它的虚信道继续进行传输。
    
    </summary>
    
      <category term="NoC" scheme="http://peihao.space/categories/NoC/"/>
    
    
      <category term="NoC" scheme="http://peihao.space/tags/NoC/"/>
    
      <category term="Router" scheme="http://peihao.space/tags/Router/"/>
    
  </entry>
  
  <entry>
    <title>缓存与XY路由算法</title>
    <link href="http://peihao.space/2016/03/31/NoC-FIFO/"/>
    <id>http://peihao.space/2016/03/31/NoC-FIFO/</id>
    <published>2016-03-31T14:23:35.000Z</published>
    <updated>2016-03-31T15:15:27.752Z</updated>
    
    <content type="html">&lt;h1 id=&quot;FIFO形式&quot;&gt;FIFO形式&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/img/article/router/router-architecture.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;上图是一副常规的NoC Router结构图。FC指Flow Control流控机制，数据交换逻辑将开关分配单元仲裁结果进行链接，也就是将输入端口的FIFO与它请求的输出端口链接行程传输通道。FIFO，缓存，或者说当前的缓存主要使用的技术就是FIFO，first in first out的队&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;列缓冲。&lt;/p&gt;
&lt;p&gt;魂村是片上网络路由器中必不可少的单元，用于存储数据。目前的路由器中缓存与交叉开关存在3中相对位置关系：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;缓存队列在交叉开关的前面&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;位于输入端口中，同时输出端口无缓存&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;缓存队列在交叉开关的后面&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;位于输出端口中，输入端口无缓存&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;缓存队列在交叉开关的前后两方&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;输入/输出端口都有缓存队列&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/article/router/NoC-FIFO-tri_loc.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;当前的片上网络路由器多半使用的就是第一种结构，即FIFO放置在输入端口内的交换结构。到达的数据分组首先存储在输入缓存中，然后经过路由计算、调度算法决定输入缓存中的数据分组如何通过交叉开关传送到输出端口，即缓存功能在交叉开关传输之前。&lt;/p&gt;
&lt;p&gt;这种结构对于构建大容量的交换结构十分经济，可扩展性好，但是当不同的输入端口的缓存队列都有微片要传递到同一个输出端口时，在一个时间段内，这种交换结构只允许一个被调度输出，另外的会处于阻塞状态。&lt;/p&gt;
&lt;p&gt;第二个是缓存队列放置在输出端口的交换结构。数据到达输入端口先通过交叉开关传输到相应的输出端口的缓存队列中进行排队，即缓存功能在交叉开关传输之后。这种结构避免了由交换开关内部冲突引发的延迟，可以方便地提供吞吐量、速率以及时延等方面的服务质量保障，但是要求交叉开关具有很高的传输带宽，如果出现N个输入端口同时竞争同一个输出端口时，输出缓存需要一次性完成N次写入，交叉开关内部就需要一个加速比为N的交换结构，因此，这种结构复杂且不易扩展。&lt;/p&gt;
&lt;p&gt;最后显示的是在交叉开关的输入和输出端口都具有缓存队列的结构。该结构是上述两种结构的一种折衷，通过适当的加速，可以避免交换开关拥塞引发的延迟，但是调度过程中需要同时考虑输入调度与输出调度，而且新加的缓存增加了路由器资源，因此该结构过于复杂。&lt;/p&gt;
&lt;h1 id=&quot;简单的XY路由算法&quot;&gt;简单的XY路由算法&lt;/h1&gt;&lt;p&gt;路由算法确定数据分组在网络中按照何种路径从源节点传输到目的节点。通常简答的路由器采用的都是XY维序路由算法，该算法是一种确定性路由算法，只要给定源地址与目的地址，就能唯一确定条路由路径。它将网络中所有路由器都用一个2维坐标（X,Y）表示，分组中的地址信息也是用2维坐标（X,Y）表示。&lt;/p&gt;
&lt;p&gt;设当前路由器的坐标为（cur_x,cur_y），分组中目的地址为（dst_x,dst_y）。如果cur_x&lt;dst_x，则将数据分组向东转发；如果cur_x&gt;dst_x，则将数据包向西转发；如果cur_x=dst_x and cur_y&lt;dst_y，则将数据分组向北转发；如果cur_x=dst_x and=&quot;&quot; cur_y=&quot;&quot;&gt;dst_y则将数据分组向南转发；如果cur_x=dst_x and cur_y=dst_y，那么说明数据分组到达了目的地。&lt;/dst_y，则将数据分组向北转发；如果cur_x=dst_x&gt;&lt;/dst_x，则将数据分组向东转发；如果cur_x&gt;&lt;/p&gt;
&lt;p&gt;目的路由器就通过本地端口将数据分组发往与之相连的处理单元。这样分组总是先沿X轴方向走完，才沿Y轴方向传输。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;FIFO形式&quot;&gt;FIFO形式&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/img/article/router/router-architecture.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;上图是一副常规的NoC Router结构图。FC指Flow Control流控机制，数据交换逻辑将开关分配单元仲裁结果进行链接，也就是将输入端口的FIFO与它请求的输出端口链接行程传输通道。FIFO，缓存，或者说当前的缓存主要使用的技术就是FIFO，first in first out的队
    
    </summary>
    
      <category term="NoC" scheme="http://peihao.space/categories/NoC/"/>
    
    
      <category term="NoC" scheme="http://peihao.space/tags/NoC/"/>
    
      <category term="Router" scheme="http://peihao.space/tags/Router/"/>
    
  </entry>
  
  <entry>
    <title>Hexo-文章版权追加</title>
    <link href="http://peihao.space/2016/03/30/append-copyright/"/>
    <id>http://peihao.space/2016/03/30/append-copyright/</id>
    <published>2016-03-30T14:23:35.000Z</published>
    <updated>2016-03-31T10:17:54.465Z</updated>
    
    <content type="html">&lt;p&gt;目前，网络中出现了一些不和谐因素，某些网站多次剽窃Hexo博友的原创文章。在对这些侵犯博友权益的网站提出谴责的同时，聪明的各位Geek们应该如何增强版权意识呢.&lt;/p&gt;
&lt;p&gt;最简单的办法就是在自己的部落格文章里添加水印，即使这些网站通过爬虫私自收录我们的文章，读者也能在文章中轻易的发现原作者。&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;由于这种办法容易影响读者的阅读体验，我采用的是在每篇文章下面增加版权声明，将本篇文章的信息、初次刊登网站、作者信息追加进文章里面。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/article/append-copyright.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;article结构&quot;&gt;article结构&lt;/h1&gt;&lt;p&gt;cd到&lt;code&gt;your_theme\layout\_partial\&lt;/code&gt;下，访问&lt;code&gt;article.ejs&lt;/code&gt;，在合适的位置添加&lt;/p&gt;
&lt;figure class=&quot;highlight gcode&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;&lt;span class=&quot;preprocessor&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;(!index)&lt;/span&gt; &amp;#123; &lt;span class=&quot;preprocessor&quot;&gt;%&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&amp;lt;&lt;span class=&quot;preprocessor&quot;&gt;%&lt;/span&gt;- partial&lt;span class=&quot;comment&quot;&gt;(&#39;declare&#39;)&lt;/span&gt; &lt;span class=&quot;preprocessor&quot;&gt;%&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;lt;&lt;span class=&quot;preprocessor&quot;&gt;%&lt;/span&gt; &amp;#125; &lt;span class=&quot;preprocessor&quot;&gt;%&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;将会在非目录页面下执行名为&lt;code&gt;declare&lt;/code&gt;的脚本。&lt;/p&gt;
&lt;h1 id=&quot;具体显示内容&quot;&gt;具体显示内容&lt;/h1&gt;&lt;p&gt;还是在&lt;code&gt;your_theme\layout\_partial\&lt;/code&gt;下面，创建一个名为&lt;code&gt;declare.ejs&lt;/code&gt;的文件，在里面填写&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;--&lt;/span&gt; 添加版权信息 &lt;span class=&quot;attribute&quot;&gt;--&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;article-footer-copyright&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;center&lt;/span&gt;&amp;gt;&lt;/span&gt;本文由&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;&amp;lt;%= config.root %&amp;gt;index.html&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;target&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;_blank&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;title&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;&amp;lt;%= config.author %&amp;gt;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;%=&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;config.author&lt;/span&gt; %&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;创作和发表,采用&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;BY&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;-&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;NC&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;-&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;SA&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;国际许可协议进行许可&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;center&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;center&lt;/span&gt;&amp;gt;&lt;/span&gt;转载请注明作者及出处,本文作者为&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;&amp;lt;%= config.root %&amp;gt;index.html&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;target&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;_blank&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;title&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;&amp;lt;%= config.author %&amp;gt;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;%=&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;config.author&lt;/span&gt; %&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;,本文标题为&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;&amp;lt;%- config.root %&amp;gt;&amp;lt;%- post.path %&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;target&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;_blank&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;title&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;&amp;lt;%= post.title %&amp;gt;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;%=&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;post.title&lt;/span&gt; %&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;center&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;center&lt;/span&gt;&amp;gt;&lt;/span&gt;本文链接为&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;&amp;lt;%- config.root %&amp;gt;&amp;lt;%- post.path %&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;target&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;_blank&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;title&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;&amp;lt;%= post.title %&amp;gt;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;%-&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;config.url&lt;/span&gt; %&amp;gt;&lt;/span&gt;/&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;%-&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;post.path&lt;/span&gt; %&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;.&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;center&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;--&lt;/span&gt; 添加版权信息 &lt;span class=&quot;attribute&quot;&gt;--&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;当然，你也可以自己DIY，修改显示的文字。&lt;/p&gt;
&lt;h1 id=&quot;修改CSS样式&quot;&gt;修改CSS样式&lt;/h1&gt;&lt;p&gt;编写类对应的CSS代码&lt;/p&gt;
&lt;p&gt;cd到&lt;code&gt;your_theme\source\css\_partial&lt;/code&gt;下面，创建&lt;code&gt;copyright.styl&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;.article-footer-copyright&lt;/span&gt; &lt;span class=&quot;rules&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;border-top&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;1px&lt;/span&gt; solid &lt;span class=&quot;hexcolor&quot;&gt;#d3d3d3&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;margin&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;10px&lt;/span&gt; auto&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;padding-left&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;2em&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;width&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;80%&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;.article-footer-copyright&lt;/span&gt; &lt;span class=&quot;tag&quot;&gt;span&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;.copyright&lt;/span&gt; &lt;span class=&quot;tag&quot;&gt;abbr&lt;/span&gt; &lt;span class=&quot;rules&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;color&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;hexcolor&quot;&gt;#3d3d3d&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;class&quot;&gt;.copyright&lt;/span&gt; &lt;span class=&quot;rules&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;font-weight&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; bold&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;color&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;hexcolor&quot;&gt;#fcb297&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;padding&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;0.3em&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.5em&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;margin&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1em&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;border-bottom&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; none&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;background-color&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;hexcolor&quot;&gt;#74a474&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;-moz-border-radius&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;1em&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;-webkit-border-radius&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;1em&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;-webkit-border-radius&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;1em&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;border-radius&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;1em&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;-moz-box-shadow&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; inset &lt;span class=&quot;number&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;hexcolor&quot;&gt;#eee&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;-webkit-box-shadow&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; inset &lt;span class=&quot;number&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;hexcolor&quot;&gt;#eee&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;-webkit-box-shadow&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; inset &lt;span class=&quot;number&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;hexcolor&quot;&gt;#eee&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;box-shadow&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; inset &lt;span class=&quot;number&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;hexcolor&quot;&gt;#eee&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;background&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;function&quot;&gt;-webkit-gradient&lt;/span&gt;(linear, left top, left bottom, &lt;span class=&quot;function&quot;&gt;color-stop&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0.05&lt;/span&gt;, &lt;span class=&quot;hexcolor&quot;&gt;#aad2f0&lt;/span&gt;), &lt;span class=&quot;function&quot;&gt;color-stop&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hexcolor&quot;&gt;#8bc1ed&lt;/span&gt;))&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;background&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;function&quot;&gt;-webkit-gradient&lt;/span&gt;(linear, left top, left bottom, &lt;span class=&quot;function&quot;&gt;color-stop&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0.05&lt;/span&gt;, &lt;span class=&quot;hexcolor&quot;&gt;#aad2f0&lt;/span&gt;), &lt;span class=&quot;function&quot;&gt;color-stop&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hexcolor&quot;&gt;#8bc1ed&lt;/span&gt;))&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;background&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;function&quot;&gt;-webkit-gradient&lt;/span&gt;(linear, left top, left bottom, &lt;span class=&quot;function&quot;&gt;color-stop&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0.05&lt;/span&gt;, &lt;span class=&quot;hexcolor&quot;&gt;#aad2f0&lt;/span&gt;), &lt;span class=&quot;function&quot;&gt;color-stop&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hexcolor&quot;&gt;#8bc1ed&lt;/span&gt;))&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;background&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;function&quot;&gt;-webkit-gradient&lt;/span&gt;(linear, left top, left bottom, &lt;span class=&quot;function&quot;&gt;color-stop&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0.05&lt;/span&gt;, &lt;span class=&quot;hexcolor&quot;&gt;#aad2f0&lt;/span&gt;), &lt;span class=&quot;function&quot;&gt;color-stop&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hexcolor&quot;&gt;#8bc1ed&lt;/span&gt;))&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;background&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;function&quot;&gt;-moz--webkit-linear-gradient&lt;/span&gt;(center top, &lt;span class=&quot;hexcolor&quot;&gt;#aad2f0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;5%&lt;/span&gt;, &lt;span class=&quot;hexcolor&quot;&gt;#8bc1ed&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;100%&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;background&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;function&quot;&gt;-moz--moz-linear-gradient&lt;/span&gt;(center top, &lt;span class=&quot;hexcolor&quot;&gt;#aad2f0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;5%&lt;/span&gt;, &lt;span class=&quot;hexcolor&quot;&gt;#8bc1ed&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;100%&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;background&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;function&quot;&gt;-moz--ms-linear-gradient&lt;/span&gt;(center top, &lt;span class=&quot;hexcolor&quot;&gt;#aad2f0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;5%&lt;/span&gt;, &lt;span class=&quot;hexcolor&quot;&gt;#8bc1ed&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;100%&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;background&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;function&quot;&gt;-moz-linear-gradient&lt;/span&gt;(center top, &lt;span class=&quot;hexcolor&quot;&gt;#aad2f0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;5%&lt;/span&gt;, &lt;span class=&quot;hexcolor&quot;&gt;#8bc1ed&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;100%&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/* filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=&#39;#aad2f0&#39;, endColorstr=&#39;#8bc1ed&#39;); */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;background-color&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;hexcolor&quot;&gt;#74a474&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;border&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;1px&lt;/span&gt; solid &lt;span class=&quot;hexcolor&quot;&gt;#dcdcdc&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;text-shadow&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;hexcolor&quot;&gt;#eee&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;class&quot;&gt;.article-footer-copyright&lt;/span&gt; &lt;span class=&quot;rules&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;margin-top&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;2em&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;padding&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;0.8em&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;border&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;1px&lt;/span&gt; solid &lt;span class=&quot;hexcolor&quot;&gt;#d3d3d3&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;background-color&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;hexcolor&quot;&gt;#ffffcc&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;.article-footer-copyright&lt;/span&gt; &lt;span class=&quot;tag&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;rules&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;line-height&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;140%&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;margin&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;10px&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;font-size&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; &lt;span class=&quot;number&quot;&gt;100%&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以根据喜好修改格式。最后别忘了&lt;code&gt;@import &amp;#39;_partial/copyright&lt;/code&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;目前，网络中出现了一些不和谐因素，某些网站多次剽窃Hexo博友的原创文章。在对这些侵犯博友权益的网站提出谴责的同时，聪明的各位Geek们应该如何增强版权意识呢.&lt;/p&gt;
&lt;p&gt;最简单的办法就是在自己的部落格文章里添加水印，即使这些网站通过爬虫私自收录我们的文章，读者也能在文章中轻易的发现原作者。
    
    </summary>
    
      <category term="前端" scheme="http://peihao.space/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Hexo" scheme="http://peihao.space/tags/Hexo/"/>
    
      <category term="front end" scheme="http://peihao.space/tags/front-end/"/>
    
  </entry>
  
  <entry>
    <title>WormHole Router</title>
    <link href="http://peihao.space/2016/03/30/router-wormhole/"/>
    <id>http://peihao.space/2016/03/30/router-wormhole/</id>
    <published>2016-03-30T13:35:02.000Z</published>
    <updated>2016-03-30T14:02:13.529Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/article/router/wormhole-router.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;如图是5端口虫孔路由器的结构，由5个输入端口、路由计算单元、开关分配单元、交叉开关和5个输出端口构成，其中4个端口与东、南、西、北4个方向的相邻路由器相连，剩下的是本地端口和IP核相连。虫孔路由器采用的是虫孔交换机制，同时使用缓存队列放置在输入端口的交换结构，输入缓存采用FIFO结构，缓存深度D表示输入缓存能够容纳的微片数目。&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;工作过程&quot;&gt;工作过程&lt;/h1&gt;&lt;p&gt;虫孔路由器的工作工程如下，当头微片（head filt）到达路由器时，头尾片首先会被存入输入端口的缓存队列中，同时&lt;code&gt;路由计算单元&lt;/code&gt;会提取头微片中的路由信息，包括源节点和目的节点地址、分组长度、时间戳等等。并根据当前路由器与目的路由器之间的相对位置，执行相应的路由算法为该头微片&lt;code&gt;所在的分组&lt;/code&gt;选择一个相应的输出端口。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;路由计算单元&lt;/code&gt;计算出分组在路由器中的&lt;code&gt;输出端口&lt;/code&gt;后，会向&lt;code&gt;开关分配单元&lt;/code&gt;发送&lt;code&gt;输出端口请求&lt;/code&gt;。开关分配单元根据流量控制机制传回的&lt;code&gt;流量控制信息&lt;/code&gt;，将该头微片的输出端口请求与其他和该头微片去往相同的输出端口的来自&lt;code&gt;不同输入端口的请求&lt;/code&gt;进行竞争仲裁。&lt;/p&gt;
&lt;p&gt;开关分配单元完成开关分配后，会记录分配的结果，并根据该分配结果配置交叉开关，如果该头微片仲裁成功，那么交叉开关将链接该头微片所在的输入端口与它请求的输出端口，形成一个传输通道。同时开关分配单元会向该头微片所在的缓存发出读数据信号，接着该头微片从缓存中被独处，通过这条传输通道离开当前路由器。开关分配以分组为单位进行，当该头微片成功进行开关分配后，这个输出豆蔻被预约下来，后续的与它属于同一个分组的其他体微片和尾微片不再进行开关分配，直接进行开关传输，从头微片建立好的通道陆续从该输出端口离开当前路由器，当分组的尾微片经过交叉开关传输之后，分组对该输出端口的预约被释放，其他分组这是才能通过开关分配竞争这个输出端口。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;路由计算单元&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;路由计算单元主要是提起头微片的路由信息，并根据当前路由器与目的路由器之间的相对位置，计算出分组的输出端口。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;开关分配单元&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;开关分配单元根据流量控制机制传回的流控信息，将该头微片的输出端口请求与其他不同输入端口相同输出端口的微片通过仲裁机制进行竞争仲裁。并记录分配结果。并完成开关分配&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;交叉开关&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;交叉开关将开关分配单元行程的分配结果链接，也就是将输入端口（FIFO）与它请求的输出端口行程传输通道。同时开关分配单元会向头微片所在的缓存发出读数据信号，头微片沿传输通道传输。&lt;/p&gt;
&lt;h1 id=&quot;工作流程&quot;&gt;工作流程&lt;/h1&gt;&lt;p&gt;从上面的描述中可以看出，虫孔路由器其实可以分为一条控制路径和一条数据路径。控制路径路由&lt;code&gt;计算单元&lt;/code&gt;和&lt;code&gt;开关分配单元&lt;/code&gt;组成，通过控制路径为该头微片所在的分组的&lt;strong&gt;其他微片预约一个输出端口&lt;/strong&gt;，其他分组微片不能使用，直到该头微片的整个分组传输完后才能使用。数据路径由输入缓存和交叉开关构成，分组微片到来后由输入缓存存储，经过控制路径分配到输出端口，经过交叉开关转发到目的节点。很明显，虫孔路由器的工作是按照3级流水方式工作。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/article/router/wormhole-3levels.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;分别由路由计算（RC）、开关分配（SA）以及开关传输（ST）。头微片SA成功后，体微片和尾微片可以直接使用SA的结果，跳过路由计算和开关分配阶段，直接进入开关传输阶段。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/article/router/wormhole-router.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;如图是5端口虫孔路由器的结构，由5个输入端口、路由计算单元、开关分配单元、交叉开关和5个输出端口构成，其中4个端口与东、南、西、北4个方向的相邻路由器相连，剩下的是本地端口和IP核相连。虫孔路由器采用的是虫孔交换机制，同时使用缓存队列放置在输入端口的交换结构，输入缓存采用FIFO结构，缓存深度D表示输入缓存能够容纳的微片数目。
    
    </summary>
    
      <category term="router" scheme="http://peihao.space/categories/router/"/>
    
    
      <category term="router" scheme="http://peihao.space/tags/router/"/>
    
  </entry>
  
  <entry>
    <title>Noc Topology</title>
    <link href="http://peihao.space/2016/03/29/router-topology/"/>
    <id>http://peihao.space/2016/03/29/router-topology/</id>
    <published>2016-03-29T13:35:02.000Z</published>
    <updated>2016-03-30T14:02:16.669Z</updated>
    
    <content type="html">&lt;p&gt;NoC的拓扑结构就是指NoC中各个节点的连接方式。通常NoC拓扑结构分为两类，一类是直接型网络拓扑，另一类是间接性网络拓扑。&lt;/p&gt;
&lt;h1 id=&quot;直接型&quot;&gt;直接型&lt;/h1&gt;&lt;p&gt;在直接网络中，节点处理器（IP）直接地通过网络彼此连接。常见的直接型拓扑包括网状拓扑（Mesh）、花式拓扑（Torus）等。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;2D_Mesh&quot;&gt;2D Mesh&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;2D Mesh结构是一种最简单，最直观的拓扑结构，如图。每个节点连接一个资源和四个相邻的路由器，每个资源通过一个网络接口（Net-Interface NI）连接着一个路由器。其中的资源可以是一个处理器核，内存，一个用户自定义硬件模块或者其他任何可以插入插槽并且可以和网络接口相配的IP（intellectual property）模块。路由器和路由器之间，路由器和资源之间是由一对输入和输出通道连接。通道是由两条单向的点对点总线组成。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/article/router/2D-Mesh.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;2D Mesh结构规则简单，但是边沿和定点位置节点的相对闭塞性，会极大的影响网络性能。&lt;/p&gt;
&lt;h2 id=&quot;2D_Torus&quot;&gt;2D Torus&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;/img/article/router/2D-Torus.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;2D Torus结构可以看成是对2D Mesh的一种扩展，即在边界的节点上增加了一条长的环路。因此，网络中所有的节点的度都为4，对于一个n*n的Torus网络，其中m、n为每个维度的节点数，若m==n，则称为规则的Torus。&lt;/p&gt;
&lt;p&gt;2D Torus拓扑在物理形式上与2D Mesh相似，但由于其存在很多环路，所以在路由算法和路由仲裁方面都要复杂的多。2D Torus拓扑的各个路由节点都是规则的，每个路由的节点结构都一样，所以扩展性也要比2D Mesh提高很多。&lt;/p&gt;
&lt;h1 id=&quot;间接性&quot;&gt;间接性&lt;/h1&gt;&lt;p&gt;在间接性网络中，节点处理器通过一个（或者更多个）的中间开关节点相互连接。间接型拓扑包括蝶形拓扑、Banyan、Fat-Tree拓扑等。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/article/router/Fat-Tree.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;NoC的拓扑结构就是指NoC中各个节点的连接方式。通常NoC拓扑结构分为两类，一类是直接型网络拓扑，另一类是间接性网络拓扑。&lt;/p&gt;
&lt;h1 id=&quot;直接型&quot;&gt;直接型&lt;/h1&gt;&lt;p&gt;在直接网络中，节点处理器（IP）直接地通过网络彼此连接。常见的直接型拓扑包括网状拓扑（Mesh）、花式拓扑（Torus）等。&lt;br&gt;
    
    </summary>
    
      <category term="router" scheme="http://peihao.space/categories/router/"/>
    
    
      <category term="router" scheme="http://peihao.space/tags/router/"/>
    
  </entry>
  
  <entry>
    <title>路由器架构</title>
    <link href="http://peihao.space/2016/03/28/router_know/"/>
    <id>http://peihao.space/2016/03/28/router_know/</id>
    <published>2016-03-28T13:35:02.000Z</published>
    <updated>2016-03-30T05:38:04.509Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Noc小记&quot;&gt;Noc小记&lt;/h1&gt;&lt;p&gt;Noc是由Router和Channel组成的网络结构。其中router主要用来控制网络中数据传输，channel是连通片上系统中各处理核之间进行点对点数据传输的通路。&lt;/p&gt;
&lt;p&gt;NoC采用分组交换的方式进行通信，片上网络中各处理核之间通过发送请求和接收相应消息的方式通信。在网络中传输的消息由头（head）、传输数据和尾（tail）组成。投中包含接收方的地址信息，router根据这个地址建立从传输方到达接收方的传输路径。传输数据即通信中核间要传输的信息。尾用来表示一个消息传输完毕。由于一个完整的传输数据往往包含的数据量很大，这样对片上网络的通信效率不利，于是我们将传输数据分割成更小的数据段，在对数据段添加头和尾构成数据包。&lt;/p&gt;
&lt;p&gt;一般的Router有以下单元组成：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;计算单元&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;分配单元&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;交叉单元&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;输入单元   &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其中路由计算涉及路由算法，输入单元涉及流控机制与交换机制，分配单元涉及流控机制与仲裁机制 ，而交叉开关涉及路由器的整体布局。&lt;/p&gt;
&lt;h1 id=&quot;wormhole&quot;&gt;wormhole&lt;/h1&gt;&lt;p&gt;目前虫孔路由器(wormhole router)和虚信道路由器(virtual channel router)主要使用的都是虫孔交换机制。虫孔交换机制将数据分组划分为更小的微片，链路每次只能通过一个微片。微片的种类又分 为头微片(hed filt)，体微片和尾微片(tail filt)，并且允许一个分组只由一个微片组成。只有头微片包含分组的路由信息〈源节点和目的节点地址、分组长度、时间戳等）。&lt;/p&gt;
&lt;p&gt;因此在传输分组数据时，由头微片根据路由信息为整个分组建立一条路由器内部的数据路径，体微片和尾微片沿着头微片建立的数据路径传输，其他分组的微片不能使用该路径，尾微片传输完毕后，路由器释放头微片建立的数据路径供其它分组传输使用。通过头微片这样逐跳的在路由器中建立的链路，整个分组最 终传输到目的地址。当头微片发生阻塞时，分组中的其它所有微片也都将停止前进，其中头微片缓存在当前路由器，其它微片就地缓存在它们自己所位于的若干个中间路由器中 。&lt;/p&gt;
&lt;h1 id=&quot;flow_control&quot;&gt;flow control&lt;/h1&gt;&lt;p&gt;上网络路由器与Internet路由器最大的区别在于它不支持重传，这意味着片上网络路由器不允许丢失数据分组，因此片上网络路由器需要精确的流量控制机制防止当下行路由器缓存空间满的时候，上行路由器还在持续发送数据而产生丢失数据分组现象。片上网络路由器常用的流控机制有3种，分别是基于credit的流控机制、基于握手的流控机制和on/off 流控机制 。&lt;/p&gt;
&lt;h2 id=&quot;credit&quot;&gt;credit&lt;/h2&gt;&lt;p&gt;基于 credit 的流控机制在每个路由器的输出端口处设置一个计数器，计数器中的值表示下行路由器输入端口中可用缓存的数目。上行路由器每发送一个微片它自己的计数器值就减1，当计数器的值减到0时就表示下行路由器输入端口中缓存队列己满，不能再继续发送，数据将在上行路由器中等待。当下行路由器中有 数据发送出去，意味着缓存被释放，就向上行路由器传回一个credit，上行路由器接收到credit后，计数器的值加1。基于credit的流控机制通过计数器的值是否为0能清楚的知道下行路由器是否满.不仅能防止丢失数据分组，同时能充分利用缓存资源，是当前主要的流控机制。&lt;/p&gt;
&lt;h2 id=&quot;on-off&quot;&gt;on-off&lt;/h2&gt;&lt;p&gt;由于基于credit的流控机制需要计数器，开销较大。一种改进的流控机制是on/off 流控机制，它在路由器中设置两个门限值 on 和 off ，当下行路由器中空闲缓存数目大于 off 时，发送1位比特信息通知上行路由器处于 “关” 状态，停止发送数据，当下行路由器的空闲缓存数目大于 on 时，发送l位比特信息通知上行路由器处于 “开” 状态，继续发送数据 。on/off 流控机制仅用l位比特信息来通知上行 路由器是否可以继续发送，而且回传信号次数也较基于 credit 流控机制少，但是它的缺点是由于 on/off 值的设定，不能充分利用缓存资源 。&lt;/p&gt;
&lt;h2 id=&quot;handshake&quot;&gt;handshake&lt;/h2&gt;&lt;p&gt;另一种改进的流控机制是基于握手的流控机制，它的工作原理是当上行路由器有数据发送时，先往下行路由器发送一个 req 信号，下行路由器收到 req 请求信号后，判断自己的缓存是否满，并返回一个 ack 应答信号，上行路由器接收的 ack 信号后，根据 ack 的值判断是否要发送数据。该机制虽然简单，但是一个明显的不足之处在于，该流控机制需要2个时钟周期来完成操作，比基于credit 的流控机制多了 1个时钟周期，增加了数据在网络中的传输时延。&lt;/p&gt;
&lt;h1 id=&quot;仲裁机制&quot;&gt;仲裁机制&lt;/h1&gt;&lt;p&gt;片上网络能支持数据的并行传输，这必然会引起不同信息之间的竞争冲突，具体到路由器就是多个输入端口的数据请求同一个输出端口离开时，产生的端口竞争，而在虚信道路由器中除了上述竞争外，还存在多个输入虚信道请求同一个输出虚信道的虚信道分配竞争 。目前路由器常用的仲裁机制有固定优先级、动态优先级和轮询仲裁机制。&lt;/p&gt;
&lt;h2 id=&quot;固定优先级&quot;&gt;固定优先级&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/img/article/router/fixed-priority.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;固定优先级的仲裁机制就是给每条线路分配固定的优先级，如果某条优先级高的线路一直有请求，那么其他优先级低的线路的请求将一直不会有响应。如图所示，端口A中一直有请求，并且他的优先级为3最高，因此他一直被相应，知道在时钟周期3他的请求变为0，才接着响应有请求切优先级最高的B端口，到了时钟周期7端口A又有请求，这时候A又被响应。可以看到尽管C端口一直有请求，但是由于他的优先级比较低，所以一直得不到相应。&lt;/p&gt;
&lt;h2 id=&quot;动态优先级&quot;&gt;动态优先级&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/img/article/adapter-priority.jpg&quot; alt=&quot;轮询机制&quot;&gt;&lt;/p&gt;
&lt;p&gt;动态优先级的仲裁机制与固定优先级的仲裁机制的原理基本相同，不同之处在于每条线路的优先级是动态变化的。每次也是相应优先级最高的请求。&lt;/p&gt;
&lt;p&gt;轮询仲裁机制基本思想是当前仲裁成功的请求在下一时钟周期仲裁中的优先级最低，最高优先级赋予相邻的下一个仲裁请求，这样一次轮询。如图，开始初始化一个仲裁顺序为A-B-C，那么首先选定A端口开始轮询仲裁，由于A端口没有请求，因此直接跳到B，接着到C，接着轮询A，发现A端口有请求，响应A端口。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Noc小记&quot;&gt;Noc小记&lt;/h1&gt;&lt;p&gt;Noc是由Router和Channel组成的网络结构。其中router主要用来控制网络中数据传输，channel是连通片上系统中各处理核之间进行点对点数据传输的通路。&lt;/p&gt;
&lt;p&gt;NoC采用分组交换的方式进行通信，片上网络中各处理核之间通过发送请求和接收相应消息的方式通信。在网络中传输的消息由头（head）、传输数据和尾（tail）组成。投中包含接收方的地址信息，router根据这个地址建立从传输方到达接收方的传输路径。传输数据即通信中核间要传输的信息。尾用来表示一个消息传输完毕。由于一个完整的传输数据往往包含的数据量很大，这样对片上网络的通信效率不利，于是我们将传输数据分割成更小的数据段，在对数据段添加头和尾构成数据包。&lt;/p&gt;
&lt;p&gt;一般的Router有以下单元组成：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;计算单元&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;分配单元&lt;/p&gt;
    
    </summary>
    
      <category term="router" scheme="http://peihao.space/categories/router/"/>
    
    
      <category term="router" scheme="http://peihao.space/tags/router/"/>
    
  </entry>
  
  <entry>
    <title>模拟退火</title>
    <link href="http://peihao.space/2016/03/27/SA/"/>
    <id>http://peihao.space/2016/03/27/SA/</id>
    <published>2016-03-27T13:35:02.000Z</published>
    <updated>2016-03-30T14:02:19.704Z</updated>
    
    <content type="html">&lt;h1 id=&quot;模拟退火算法概述&quot;&gt;模拟退火算法概述&lt;/h1&gt;&lt;p&gt;模拟退火算法来源于固体退火原理，将固体加温至充分高，再让其徐徐冷却，加温时，固体内部粒子随温升变为无序状，内能增大，而徐徐冷却时粒子渐趋有序，在每个温度都达到平衡态，最后在常温时达到基态，内能减为最小。根据&lt;code&gt;Metropolis&lt;/code&gt;准则，粒子在温度T时趋于平衡的概率为&lt;code&gt;e-ΔE/(kT)&lt;/code&gt;，其中E为温度T时的内能，ΔE为其改变量，k为&lt;code&gt;Boltzmann&lt;/code&gt;常数。&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;用固体退火模拟组合优化问题，将内能E模拟为目标函数值f，温度T演化成控制参数t，即得到解组合优化问题的模拟退火算法：由初始解i和控制参数初值t开始，对当前解重复“产生新解→计算目标函数差→接受或舍弃”的迭代，并逐步衰减t值，算法终止时的当前解即为所得近似最优解，这是基于蒙特卡罗迭代求解法的一种启发式随机搜索过程。退火过程由冷却进度表(Cooling Schedule)控制，包括控制参数的初值t及其衰减因子Δt、每个t值时的迭代次数L和停止条件S。&lt;/p&gt;
&lt;h1 id=&quot;流程图&quot;&gt;流程图&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/sa.jpg&quot; alt=&quot;模拟退火&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;代码实现&quot;&gt;代码实现&lt;/h1&gt;&lt;h2 id=&quot;伪代码&quot;&gt;伪代码&lt;/h2&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Simulated-Annealing()    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Create initial solution S    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;repeat    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for i=1 to iteration-length do    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Generate a random transition from S to Si    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        If ( C(S) &amp;lt;= C(Si) ) then    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            S=Si    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        else if( exp(C(S)-C(Si))/kt &amp;gt; random[0,1) ) then    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            S=Si    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Reduce Temperature t    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;until ( no change in C(S) )    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;C(S): Cost or Loss function of Solution S&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;java实例实现&quot;&gt;java实例实现&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt; space.peihao;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.io.BufferedReader;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.io.File;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.io.FileReader;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.util.Arrays;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.util.Random;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@author&lt;/span&gt; Dukie 下午02:22:13 2010  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Anneal&lt;/span&gt; &lt;/span&gt;&amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt;[][] city;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;[] currPath;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;[] bestPath;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; shortesDistance;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; numOfCity = &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//trace item    &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; iterator = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;printInfo&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        System.out.println(&lt;span class=&quot;string&quot;&gt;&quot;bestPath: &quot;&lt;/span&gt; + Arrays.toString(bestPath));    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        System.out.println(&lt;span class=&quot;string&quot;&gt;&quot;shortest distance: &quot;&lt;/span&gt; + shortesDistance);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        System.out.println(&lt;span class=&quot;string&quot;&gt;&quot;iterator times: &quot;&lt;/span&gt; + iterator);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; IOException &lt;/span&gt;&amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        city = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt;[numOfCity][numOfCity];    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        currPath = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;[numOfCity];    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bestPath = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;[numOfCity];    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        shortesDistance = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        loadCity();    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; lenth = currPath.length;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; lenth; i++) &amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            currPath[i] = i;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;loadCity&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; IOException &lt;/span&gt;&amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//DistanceMatrix.csv&quot; a file stores the distance info.    &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        File file = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;string&quot;&gt;&quot;E:\\TSP\\DistanceMatrix.csv&quot;&lt;/span&gt;);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        inputGraph(file, city);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;inputGraph&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(File file, &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt;[][] city)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; IOException &lt;/span&gt;&amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        BufferedReader in = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BufferedReader(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; FileReader(file));    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String str = &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; length = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; ((str = in.readLine()) != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            str = str.replaceAll(&lt;span class=&quot;string&quot;&gt;&quot;, &quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;,&quot;&lt;/span&gt;);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            String[] line = str.split(&lt;span class=&quot;string&quot;&gt;&quot;,&quot;&lt;/span&gt;);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; j = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; j &amp;lt; numOfCity; j++)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// ten cities    &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                city[length][j] = Double.parseDouble(line[j]);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            length++;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/**  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * key function  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@throws&lt;/span&gt; IOException  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     */&lt;/span&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;anneal&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; IOException &lt;/span&gt;&amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; temperature = &lt;span class=&quot;number&quot;&gt;10000.0&lt;/span&gt;D;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; deltaDistance = &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;D;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; coolingRate = &lt;span class=&quot;number&quot;&gt;0.9999&lt;/span&gt;;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; absoluteTemperature = &lt;span class=&quot;number&quot;&gt;0.00001&lt;/span&gt;;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        init();    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; distance = getToatalDistance(currPath);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;[] nextPath;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Random random = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Random();    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (temperature &amp;gt; absoluteTemperature) &amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            nextPath = generateNextPath();    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            deltaDistance = getToatalDistance(nextPath) - distance;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ((deltaDistance &amp;lt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    || (distance &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          Math.exp(-deltaDistance / temperature) &amp;gt; random.nextDouble())) &amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                currPath = Arrays.copyOf(nextPath, nextPath.length);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                distance = deltaDistance + distance;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            temperature *= coolingRate;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            iterator++;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            System.out.println(&lt;span class=&quot;string&quot;&gt;&quot;iterator: &quot;&lt;/span&gt; + iterator + &lt;span class=&quot;string&quot;&gt;&quot; path: &quot;&lt;/span&gt; + Arrays.toString(currPath));    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        shortesDistance = distance;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        System.arraycopy(currPath, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, bestPath, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, currPath.length);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/**  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * calculate total distance  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@param&lt;/span&gt; currPath  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@return&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     */&lt;/span&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;getToatalDistance&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;[] currPath)&lt;/span&gt; &lt;/span&gt;&amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; length = currPath.length;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; totalDistance = &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;D;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; length - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;; i++) &amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            totalDistance += city[currPath[i]][currPath[i + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]];    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        totalDistance += city[currPath[length - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]][&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; totalDistance;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/**  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * swap two elements in the old array to genreate new array  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@return&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     */&lt;/span&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;[] generateNextPath() &amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;[] nextPath = Arrays.copyOf(currPath, currPath.length);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Random random = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Random();    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; length = nextPath.length;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; fistIndex = random.nextInt(length - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; secIndex = random.nextInt(length - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (fistIndex == secIndex) &amp;#123;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            secIndex = random.nextInt(length - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; tmp = nextPath[fistIndex];    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nextPath[fistIndex] = currPath[secIndex];    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nextPath[secIndex] = tmp;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; nextPath;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上述代码就是为了解决旅行商问题。旅行商按一定的顺序访问N个城市的每个城市,使得每个城市都能被访问且仅能被访问一次,最后回到起点,而使花费的代价最小。本例中从第0个城市开始然后回到原点.&lt;/p&gt;
&lt;h2 id=&quot;Tips&quot;&gt;Tips&lt;/h2&gt;&lt;p&gt;模拟退火算法与初始值无关，算法求得的解与初始解状态S(是算法迭代的起点)无关；模拟退火算法具有渐近收敛性，已在理论上被证明是一种以概率l 收敛于全局最优解的全局优化算法；模拟退火算法具有并行性。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;模拟退火算法概述&quot;&gt;模拟退火算法概述&lt;/h1&gt;&lt;p&gt;模拟退火算法来源于固体退火原理，将固体加温至充分高，再让其徐徐冷却，加温时，固体内部粒子随温升变为无序状，内能增大，而徐徐冷却时粒子渐趋有序，在每个温度都达到平衡态，最后在常温时达到基态，内能减为最小。根据&lt;code&gt;Metropolis&lt;/code&gt;准则，粒子在温度T时趋于平衡的概率为&lt;code&gt;e-ΔE/(kT)&lt;/code&gt;，其中E为温度T时的内能，ΔE为其改变量，k为&lt;code&gt;Boltzmann&lt;/code&gt;常数。
    
    </summary>
    
      <category term="算法" scheme="http://peihao.space/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="算法" scheme="http://peihao.space/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>verilog笔记</title>
    <link href="http://peihao.space/2016/03/24/verilog_date/"/>
    <id>http://peihao.space/2016/03/24/verilog_date/</id>
    <published>2016-03-24T07:23:35.000Z</published>
    <updated>2016-03-24T16:18:20.089Z</updated>
    
    <content type="html">&lt;h1 id=&quot;模块&quot;&gt;模块&lt;/h1&gt;&lt;h2 id=&quot;模块介绍&quot;&gt;模块介绍&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;模块是Verilog HDL语言的基本单元，数字系统是用模块的形式来描述。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;模块是描述某个设计的功能、结构和其他模块通信的外部端口。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Verilog HDL中的各个模块是并行运行的&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;模块可以调用其他模块的实例   &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;模块结构&quot;&gt;模块结构&lt;/h2&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;module &amp;lt;模块名&amp;gt;(&amp;lt;端口列表&amp;gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	端口说明（input，output，inout）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	参数定义（可选）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	数据类型定义&lt;span class=&quot;comment&quot;&gt;//wire、reg、task、function&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	连续赋值语句（assign）&lt;span class=&quot;comment&quot;&gt;//组合逻辑&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	过程块（always和initial）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	-行为描述语句&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	低层模块实例&lt;span class=&quot;comment&quot;&gt;//调用其它模块&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	任务和函数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	延时说明块&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;语句模块描述方式&quot;&gt;语句模块描述方式&lt;/h1&gt;&lt;p&gt;Verilog有三种建模方式，分别是&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;结构化描述方式&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;数据流描述方式&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;行为描述方式&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;结构型描述&quot;&gt;结构型描述&lt;/h2&gt;&lt;p&gt;通过实例进行描述的方法，将预定义的基本原件实例嵌入语言中，监控实例的输入，一单任何一个发生变化便重新运算并输出。&lt;/p&gt;
&lt;h2 id=&quot;数据流型描述&quot;&gt;数据流型描述&lt;/h2&gt;&lt;p&gt;是一种描述组合逻辑功能的方法，用&lt;code&gt;assign&lt;/code&gt;连续赋值语句来实现。&lt;/p&gt;
&lt;p&gt;连续赋值语句完成如下的组合功能：等式右边的所有变量受持续监控，每当这些变量中有任何一个发生变化，整个表达式被重新赋值并送给等式左端。&lt;/p&gt;
&lt;h2 id=&quot;行为级描述&quot;&gt;行为级描述&lt;/h2&gt;&lt;p&gt;是通过描述行为特性来实现，关键词是&lt;code&gt;always&lt;/code&gt;，含义是一单敏感变量发货时能变化，就重新一次进行赋值，有无限循环之意。这种描述方法常用来实现时序电路，也可用来描述组合功能。&lt;/p&gt;
&lt;h2 id=&quot;Tip&quot;&gt;Tip&lt;/h2&gt;&lt;p&gt;用户可以混用上述三种描述方法，但需要说明的是，模块中门的实例、模块实例语句、assign语句和always语句是并发执行的，即执行顺序和书写次序无关。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Verilog HDL区分大小写&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Verilog HDL关键字一般为小写&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其中数据流描述方式经常使用连续赋值语句，某个值被赋给某个网线变量。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;assign [delay] net_name = expression;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;注意在各assign 语句之间，是并行执行的，即各语句的执行与语句之间的顺序无关。&lt;/p&gt;
&lt;p&gt;行为描述方式经常使用always、initial语句赋值。使用reg进行寄存器的声明。always是指一直在重复运行，由always后面括号的变量变化时触发。在always以及end之间是串行顺序执行的。&lt;/p&gt;
&lt;p&gt;数据流型描述是一种描述组合逻辑功能的方法，用assign连续赋值语句来实现。&lt;/p&gt;
&lt;h1 id=&quot;常量&quot;&gt;常量&lt;/h1&gt;&lt;h2 id=&quot;数字&quot;&gt;数字&lt;/h2&gt;&lt;p&gt;语法：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;位宽&amp;gt;&amp;#39;&amp;lt;进制&amp;gt;&amp;lt;数值&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;其中位宽是指对应二进制的位数    &lt;/p&gt;
&lt;p&gt;需要注意的是，尾款小于相应数值的实际位数时，相应的高位部分被忽略。&lt;code&gt;4&amp;#39;D61&lt;/code&gt;与&lt;code&gt;4&amp;#39;B1101&lt;/code&gt;相同。因为十进制下&lt;code&gt;61==111101&lt;/code&gt;，这里要求二进制4bit，所以是&lt;code&gt;1101&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&quot;parameter&quot;&gt;parameter&lt;/h2&gt;&lt;p&gt;语法:&lt;/p&gt;
&lt;figure class=&quot;highlight gams&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;parameter&lt;/span&gt; 参数名&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;=表达式，参数名&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;=表达式，......；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;例：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;parameter&lt;/span&gt; count_bits=&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;parameter&lt;/span&gt; sel=&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;,code=&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;&#39;ha3;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;parameter&lt;/span&gt; datawidth=&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;;addwidth=datawidth*&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;使用常量的目的:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;便于阅读&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;便于修改 &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;变量&quot;&gt;变量&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;网络型 nets type&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;指硬件电路中的各种连接，输出始终根据输入的变化更新其值的变化。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;寄存器型 register type &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;常指硬件中电路中具有状态保持作用的器件，如触发器、寄存器等等。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;nets type中最主要的就是wire型变量，常用来表示用assign语句赋值的组合逻辑信号。可以取值为0，1，x（不定值），z（高阻）    &lt;/p&gt;
&lt;p&gt;注意，Verilog HDL模块中的输入输出信号类型缺省时，自动定义为wire型变量。&lt;/p&gt;
&lt;p&gt;语法：&lt;br&gt;wire 数据1，数据2，……数据n.&lt;/p&gt;
&lt;p&gt;例子：&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wire a,b,c &lt;span class=&quot;comment&quot;&gt;//定义了三个wire型变量&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire[&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] databus &lt;span class=&quot;comment&quot;&gt;//定义了8bit宽wire型向量数据总线&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire[&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] addrbus  &lt;span class=&quot;comment&quot;&gt;//定义了20bit宽的wire型向量地址总线&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;p&gt;这里记录下register type中的reg型，常用的寄存器型变量&lt;/p&gt;
&lt;p&gt;语法： reg 数据1，数据2，数据3……;&lt;/p&gt;
&lt;p&gt;例子：&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;reg a,b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg[&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] data &lt;span class=&quot;comment&quot;&gt;//定义可8bit宽的reg型向量&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg[&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] mymem[&lt;span class=&quot;number&quot;&gt;1023&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] &lt;span class=&quot;comment&quot;&gt;//定义了1024字节（8bit*1024）的存储器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;常用语句&quot;&gt;常用语句&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;赋值           连续赋值语句、过程赋值语句&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;条件语句         if-else语句、case语句&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;循环语句         forever、repeat、while、for语句&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;结构说明语句     initial、always、task、function语句&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;编译预处理语句     ‘define ‘include ‘timescale语句&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;过程块&quot;&gt;过程块&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;always过程块&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;模板：&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;always @(&amp;lt;敏感信号表达式&amp;gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//过程赋值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//if语句	&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//case语句&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//while、repeat、for语句&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//task、function调用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;当敏感信号表达式的值改变时候，就执行一遍块内语句。同时always过程块是不能够嵌套使用的。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;关键字&lt;/strong&gt;&lt;code&gt;posedge&lt;/code&gt;与&lt;code&gt;negedge&lt;/code&gt;关键字分别是上升沿以及下降沿&lt;/p&gt;
&lt;p&gt;例如：同步时序电路的时钟信号为clk，clear为异步清零信号。敏感信号可写为：&lt;/p&gt;
&lt;figure class=&quot;highlight verilog&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//上升沿触发，高电平清0有效&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;always&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;@&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;posedge&lt;/span&gt; clk &lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;posedge&lt;/span&gt; clear)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//上升沿触发，低电平清0有效&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;always&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;@&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;posedge&lt;/span&gt; clk &lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;negedge&lt;/span&gt; clear)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例如当&lt;code&gt;negedge clear&lt;/code&gt;表示当&lt;code&gt;clear==0&lt;/code&gt;时&lt;/p&gt;
&lt;figure class=&quot;highlight verilog&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;always&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;@&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;posedge&lt;/span&gt; clk &lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;negedge&lt;/span&gt; clear)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;begin&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;!&lt;/span&gt;clear)&lt;span class=&quot;comment&quot;&gt;//当clear==0时候，always会由事件驱动&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			qout&lt;span class=&quot;keyword&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			qout&lt;span class=&quot;keyword&quot;&gt;=&lt;/span&gt;in;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol&gt;
&lt;li&gt;initial过程块&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;initial模板：&lt;/p&gt;
&lt;figure class=&quot;highlight erlang&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;initial&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;begin&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	语句&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	语句&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	......&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;对变量和存贮器初始化&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;initial&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	reg1=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(addr=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;addr&amp;lt;size;addr=addr+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		memory[addr]=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;initial语句主要面向功能模拟，通常不具有可综合性。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;模拟0时刻开始执行，只执行一次&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;同一模块内的多个initial过程块，模拟0时刻开始并行执行。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;initial与always语句一样，是不能嵌套使用的。即在initial语句中不能再次嵌套initial语句块。 &lt;/p&gt;
&lt;h2 id=&quot;赋值语句&quot;&gt;赋值语句&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;连续赋值语句assign常用于对wire型变量进行赋值&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;input a,b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output c;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assign c=a&amp;amp;b;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;a,b信号的任何变化，都将随时反映到c上来。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;过程赋值语句&lt;strong&gt;常用于对reg型变量进行赋值&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;一般分为两种方式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;非阻塞赋值：一条非阻塞赋值语句的执行是不会阻塞下一条语句的执行，也就是收本条非阻塞赋值语句的执行完毕之前，下一条语句也可以开始执行。非阻塞赋值语句在块结束时才一同完成赋值操作，在一块内非阻塞赋值语句并行执行。赋值符号&lt;code&gt;&amp;lt;=&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;阻塞赋值：该语句结束时就完成赋值操作，前面的语句没有完成之前，后面的语句是不能执行的，在一块内非阻塞赋值语句顺序执行。赋值符号&lt;code&gt;=&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;非阻塞赋值：&lt;/p&gt;
&lt;figure class=&quot;highlight verilog&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;module&lt;/span&gt; non_block (c, a,b,clk);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;output&lt;/span&gt; c,b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;input&lt;/span&gt; a,clk;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;typename&quot;&gt;reg&lt;/span&gt; c,b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;always&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;@&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;posedge&lt;/span&gt; clk)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;begin&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		b&lt;span class=&quot;keyword&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;=&lt;/span&gt;a;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		c&lt;span class=&quot;keyword&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;=&lt;/span&gt;b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;endmodule&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;由于是非阻塞赋值，bc在clk上升沿同时进行状态变化。所以&lt;code&gt;b&amp;lt;=a;c&amp;lt;=b;&lt;/code&gt;语句在同时执行，所以c的值是b上一个上升沿的值，b的值被赋值为a上一个上升沿的值。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/article/verilog_data_setvalue.jpg&quot; alt=&quot;仿真图片&quot;&gt;&lt;/p&gt;
&lt;p&gt;阻塞赋值：&lt;/p&gt;
&lt;figure class=&quot;highlight verilog&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;module&lt;/span&gt; block (c, a,b,clk);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;output&lt;/span&gt; c,b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;input&lt;/span&gt; a,clk;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;typename&quot;&gt;reg&lt;/span&gt; c,b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;always&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;@&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;posedge&lt;/span&gt; clk)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;begin&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		b&lt;span class=&quot;keyword&quot;&gt;=&lt;/span&gt;a;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		c&lt;span class=&quot;keyword&quot;&gt;=&lt;/span&gt;b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;endmodule&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;顺序执行有&lt;code&gt;c==b&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/article/verilog_date_setvalue2.jpg&quot; alt=&quot;仿真图片&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;条件语句&quot;&gt;条件语句&lt;/h2&gt;&lt;p&gt;if-else语句块&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pass&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;case语句&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; （&amp;lt;敏感表达式&amp;gt;）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	值&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;：语句或语句块&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; ；&lt;span class=&quot;comment&quot;&gt;//case分支项&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	值&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;：语句或语句块&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; ；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	……&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	值n：语句或语句块n ；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;：语句或语句块n+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;；&lt;span class=&quot;comment&quot;&gt;//可省略&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endcase&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Tips&quot;&gt;Tips&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;若没有列出所有条件分支，编译器认为条件不满足时，会引进触发器保持原值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;时序电路可利用上述特性来保持状态。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;组合电路必须列出所有条件分支，否则会产生隐含触发器。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;8bit二进制乘法器  integer&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;module &lt;span class=&quot;title&quot;&gt;mult_for&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(outcome,a,b)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parameter size=&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt; ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;*size:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] outcome;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input[size:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] a,b; &lt;span class=&quot;comment&quot;&gt;//乘数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;*size:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] outcome; &lt;span class=&quot;comment&quot;&gt;//积&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;integer i;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;always @(a or b)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		outcome=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (i=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;i&amp;lt;=size;i=i+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(b[i]) outcome=outcome+( a&amp;lt;&amp;lt;(i-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) ) ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;task、function&quot;&gt;task、function&lt;/h1&gt;&lt;h2 id=&quot;task&quot;&gt;task&lt;/h2&gt;&lt;p&gt;定义格式：&lt;/p&gt;
&lt;figure class=&quot;highlight verilog&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;&amp;lt;&lt;/span&gt;任务名&lt;span class=&quot;keyword&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	端口与类型说明&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	局部变量说明&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	语句或语句块&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;endtask&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;调用格式：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;任务名&amp;gt;(port1，port2，port3,......)&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;函数function&quot;&gt;函数function&lt;/h2&gt;&lt;p&gt;定义格式:&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;function &amp;lt;返回值位宽或类型&amp;gt; &amp;lt;函数名&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	输入端口与类型说明&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	局部变量说明&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	语句或语句块&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endfunction&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;调用格式:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;函数名&amp;gt; (&amp;lt;输入表达式1&amp;gt;,&amp;lt;输入表达式2&amp;gt;,&amp;lt;输入表达式3&amp;gt;,......)&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;module function_example(i,&lt;span class=&quot;keyword&quot;&gt;out&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;input&lt;/span&gt;[7:0] &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output[2:0] &lt;span class=&quot;keyword&quot;&gt;out&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;reg&lt;/span&gt;[2:0] &lt;span class=&quot;keyword&quot;&gt;out&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	function[2:0] gefun;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;input&lt;/span&gt;[7:0] x; &lt;span class=&quot;comment&quot;&gt;//输入端口说明&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;reg&lt;/span&gt;[2:0] &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		integer i;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;=0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(i=0;i&amp;lt;=7;i=i+1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(x[i]==1&#39;b0)&lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;=&lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;+1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			gefun=&lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	endfunction&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	always @(&lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;out&lt;/span&gt;=gefun(&lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;);&lt;span class=&quot;comment&quot;&gt;//这里要注意的是 in要与x位宽相同&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Verilog中函数function声明，在声明的最后一句一般都是对结果赋值。也就是对函数名赋值。如上例中，函数名gefun，在声明最后一句就是对gefun的赋值。&lt;/p&gt;
&lt;h1 id=&quot;编译预处理&quot;&gt;编译预处理&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;`define&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;`include&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;`timescale&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;编译指令以”`”反引号开头。不同于整数的单引号，预编译使用的是反引号，一般在键盘的左上角。&lt;/p&gt;
&lt;h1 id=&quot;顺序与并行&quot;&gt;顺序与并行&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;assign语句&lt;code&gt;之间&lt;/code&gt;:并行执行（同时执行）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;过程块&lt;code&gt;之间&lt;/code&gt;（always、initial）：并行执行&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;assign语句与过程块&lt;code&gt;之间&lt;/code&gt;：并行执行&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;过程块（initial、always）内部&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;串行块（begin-end）：顺序执行—非阻塞语句类似于并行语句&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;并行快（fork-join）：并行执行&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;模块&quot;&gt;模块&lt;/h1&gt;&lt;h2 id=&quot;模块介绍&quot;&gt;模块介绍&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;模块是Verilog HDL语言的基本单元，数字系统是用模块的形式来描述。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;模块是描述某个设计的功能、结构和其他模块通信的外部端口。&lt;/p&gt;
    
    </summary>
    
      <category term="Verilog" scheme="http://peihao.space/categories/Verilog/"/>
    
    
      <category term="Verilog HDL" scheme="http://peihao.space/tags/Verilog-HDL/"/>
    
  </entry>
  
  <entry>
    <title>verilog实例</title>
    <link href="http://peihao.space/2016/03/23/verilog_instance/"/>
    <id>http://peihao.space/2016/03/23/verilog_instance/</id>
    <published>2016-03-23T07:23:35.000Z</published>
    <updated>2016-03-24T08:24:58.586Z</updated>
    
    <content type="html">&lt;p&gt;模块（module）是Verilog 的基本描述单位，用于描述某个设计的功能或结构及与其他模块通信的外部端口。&lt;/p&gt;
&lt;p&gt;模块在概念上可等同一个器件就如我们调用通用器件（与门、三态门等）或通用宏单元（计数器、ALU、CPU）等，因此，一个模块可在另一个模块中调用。&lt;/p&gt;
&lt;p&gt;一个电路设计可由多个模块组合而成，因此一个模块的设计只是一个系统设计中的某个层次设计，模块设计可采用多种建模方式。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;小程序&quot;&gt;小程序&lt;/h1&gt;&lt;h2 id=&quot;加法器&quot;&gt;加法器&lt;/h2&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;module &lt;span class=&quot;title&quot;&gt;addr&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(a,b,&lt;span class=&quot;built_in&quot;&gt;cin&lt;/span&gt;,count,sum)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	input [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]a;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	input [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	input &lt;span class=&quot;built_in&quot;&gt;cin&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	output count;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	output [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]sum;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	assign &amp;#123;count,sum&amp;#125;=a+b+&lt;span class=&quot;built_in&quot;&gt;cin&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面的程序描述的是一个3位加法器，可以看出来，程序从module开始，以endmodule结束。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;input [2,0]a&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;表示声明一个3bit的输入变量，命名为a&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;assign {count，sum}=a+b+cin&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;表明为线网类型赋值，&lt;code&gt;{}&lt;/code&gt;是连接符号，count是1bit，sum是3bit，所以连接之后是4bit，最高位是count。等式右边是2个3bit相加，再加上一个1bit的，实现的全加器。&lt;/p&gt;
&lt;h2 id=&quot;比较器&quot;&gt;比较器&lt;/h2&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;module compare （equal，a，b）；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] a,b; &lt;span class=&quot;comment&quot;&gt;// declare the input signal ;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output equare ; &lt;span class=&quot;comment&quot;&gt;// declare the output signal;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assign equare = (a == b) ? &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/ * &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; a = b , output &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, otherwise &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;；*/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;逻辑部分是一个三目运算符号，有C语言基础的都可以看懂。&lt;/p&gt;
&lt;h1 id=&quot;三态驱动器&quot;&gt;三态驱动器&lt;/h1&gt;&lt;figure class=&quot;highlight verilog&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;module&lt;/span&gt; mytri (din, d_en, d_out);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;input&lt;/span&gt; din;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;input&lt;/span&gt; d_en;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;output&lt;/span&gt; d_out;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;// -- Enter your statements here -- //&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;assign&lt;/span&gt; d_out &lt;span class=&quot;keyword&quot;&gt;=&lt;/span&gt; d_en ? din &lt;span class=&quot;keyword&quot;&gt;:&lt;/span&gt;&#39;bz;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;endmodule&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;module&lt;/span&gt; trist (din, d_en, d_out);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;input&lt;/span&gt; din;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;input&lt;/span&gt; d_en;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;output&lt;/span&gt; d_out;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;// --statements here -- //&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mytri u_mytri(din,d_en,d_out);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;endmodule&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;该例描述了一个三态驱动器。其中三态驱动门在模块 mytri 中描述，而在模块trist 中调用了模 mytri 。模块mytri 对trist 而言相当于一个已存在的器件，在trist 模块中对该器件进行实例化，实例化名 u_mytri 。&lt;/p&gt;
&lt;h1 id=&quot;模块结构&quot;&gt;模块结构&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;模块内容是嵌在module 和endmodule两个语句之间。每个模块实现特定的功能，模块可进行层次的 套，因此可以将大型的数字电路设计分割成大小不一的小模块来实现特定的功能，最后通过由顶层模块调用子模块来实现整体功能，这就是Top-Down的设计思想.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;模块包括接口描述部分和逻辑功能描述部分。这可以把模块与器件相类比。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;模块的端口定义部分：&lt;/p&gt;
&lt;p&gt;如上例： module addr (a, b, cin, count, sum); 其中module 是模块的保留字，addr 是模块的名字，相当于器件名。（）内是该模块的端口声明，定义了该模块的管脚名，是该模块与其他模块&lt;br&gt;通讯的&lt;code&gt;外部接口&lt;/code&gt;，相当于器件的pin 。&lt;br&gt;模块的内容，包括I/O说明，内部信号、调用模块等的声明语句和功能定义语句。&lt;br&gt;I/O说明语句如： input [2:0] a; input [2:0] b; input cin; output count; 其中input 、&lt;br&gt;output、inout 是保留字，定义了管脚信号的流向，[n:0]表示该信号的&lt;code&gt;位宽&lt;/code&gt;（总线或单根信号线）。&lt;/p&gt;
&lt;p&gt;逻辑功能描述部分如： assign d_out = d_en ? din :’bz;&lt;br&gt;mytri u_mytri(din,d_en,d_out);&lt;/p&gt;
&lt;p&gt;功能描述用来产生各种逻辑（主要是组合逻辑和时序逻辑，可用多种方法进行描述），还可用来实例化一个器件，该器件可以是厂家的器件库也可以是我们自己用HDL设计的模块（相当于在原理图输入时调用一个库元件）。在逻辑功能描述中，主要用到assign 和always 两个语句。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;对每个模块都要进行端口定义，并说明输入、输出口，然后对模块的功能进行逻辑描述，当然，对测试模块，可以没有输入输出口。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Verilog HDL 的书写格式自由，一行可以写几个语句，也可以一个语句分几行写。具体由代码书写规范约束。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;除endmodule 语句外，每个语句后面需有分号表示该语句结束。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;全加器&quot;&gt;全加器&lt;/h1&gt;&lt;h2 id=&quot;一位全加器&quot;&gt;一位全加器&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/verilog_hdl.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;如上图是一位全加器&lt;/p&gt;
&lt;p&gt;这里先说明下什么是全加器，并说下全加器半加器的区别：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;半加器不考虑低位过来的进位，只计算2个一位二进制数相加。产生一个本位和，还有一个向高位的进位信号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;全加器考虑低位过来的进位，计算2个一位二进制数相加。产生一个本位和，还有一个向高位的进位信号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;即半加器有二个输入，二个输出。全加器有三个输入，2个输出。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight dns&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;module FA_struct (&lt;span class=&quot;keyword&quot;&gt;A&lt;/span&gt;, B, Cin, Sum, Count)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	input &lt;span class=&quot;keyword&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	input B&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	input Cin&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	output Sum&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	output Count&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	wire S1, T1, T2, T3&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	// -- statements -- //&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	xor x1 (S1, &lt;span class=&quot;keyword&quot;&gt;A&lt;/span&gt;, B)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	xor x2 (Sum, S1, Cin)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	and A1 (T3, &lt;span class=&quot;keyword&quot;&gt;A&lt;/span&gt;, B )&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	and A2 (T2, B, Cin)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	and A3 (T1, &lt;span class=&quot;keyword&quot;&gt;A&lt;/span&gt;, Cin)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	or O1 (Cout, T1, T2, T3 )&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;该实例显示了一个全加器由两个异或门、三个与门、一个或门构成。S1、T1、T2、T3则是门与门之间的连线。代码显示了用纯结构的建模方式，其中xor 、and、or 是Verilog HDL 内置的器件。以 xor x1 (S1, A, B) 该例化语句为例：&lt;br&gt;xor 表明调用一个内置的异或门，器件名称xor ，代码实例化名x1（类似原理图输入方式）。括号内的S1，A，B 表明该器件管脚的实际连接线（信号）的名称，其中 A、B是输入，S1是输出。其他同。&lt;/p&gt;
&lt;h2 id=&quot;两位全加器&quot;&gt;两位全加器&lt;/h2&gt;&lt;p&gt;两位的全加器可通过调用两个一位的全加器来实现。该设计的设计层次示意图和结构图如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/2bitFA.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight dns&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;module Four_bit_FA (FA, FB, FCin, FSum, FCout ) &lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	parameter SIZE = 2&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	input [SIZE:1] FA&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	input [SIZE:1] FB&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	input FCin&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	output [SIZE:1] FSum&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	output FCout&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	wire FTemp&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	FA_struct FA1(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		.&lt;span class=&quot;keyword&quot;&gt;A&lt;/span&gt; (FA[1]),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		.B (FB[1]),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		.Cin (FCin) ,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		.Sum (FSum[1]),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		.Cout (Ftemp)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	FA_struct FA2(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		.&lt;span class=&quot;keyword&quot;&gt;A&lt;/span&gt; (FA[2]),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		.B (FB[2]),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		.Cin (FTemp) ,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		.Sum (FSum[2]),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		.Cout (FCount )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;除了低位的进位Fcin，输入FA与FB都是两位，将输入的两位分别放到两个一位全加器上面，就好像我们在做两位数加法时，也是将个位、十位分别相加，再加上进位。&lt;/p&gt;
&lt;p&gt;该实例用结构化建模方式进行一个两位的全加器的设计，顶层模块Four_bit_FA 调用了两个一位的全加器 FA_struct 。在这里，以前的设计模块FA_struct 对顶层而言是一个现成的器件，顶层模块只要进行例化就可以了。注意这里的例化中，端口映射（管脚的连线）采用名字关联，如 .A （FA[2]） ，其中.A 表示 调用器件的管脚A，括号中的信号表示接到该管脚A的电路中的具体信号。wire 保留字表明信号Ftemp 是属线网类型（下面有具体描述）。&lt;/p&gt;
&lt;h1 id=&quot;Verilog建模&quot;&gt;Verilog建模&lt;/h1&gt;&lt;p&gt;Verilog有三种建模方式，分别是&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;结构化描述方式&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;数据流描述方式&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;行为描述方式&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其中数据流描述方式经常使用连续赋值语句，某个值被赋给某个网线变量。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;assign [delay] net_name = expression;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;注意在各assign 语句之间，是并行执行的，即各语句的执行与语句之间的顺序无关。&lt;/p&gt;
&lt;p&gt;行为描述方式经常使用always、initial语句赋值。使用reg进行寄存器的声明。always是指一直在重复运行，由always后面括号的变量变化时触发。在always以及end之间是串行顺序执行的。&lt;/p&gt;
&lt;p&gt;数据流型描述是一种描述组合逻辑功能的方法，用assign连续赋值语句来实现。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;模块（module）是Verilog 的基本描述单位，用于描述某个设计的功能或结构及与其他模块通信的外部端口。&lt;/p&gt;
&lt;p&gt;模块在概念上可等同一个器件就如我们调用通用器件（与门、三态门等）或通用宏单元（计数器、ALU、CPU）等，因此，一个模块可在另一个模块中调用。&lt;/p&gt;
&lt;p&gt;一个电路设计可由多个模块组合而成，因此一个模块的设计只是一个系统设计中的某个层次设计，模块设计可采用多种建模方式。&lt;/p&gt;
    
    </summary>
    
      <category term="Verilog" scheme="http://peihao.space/categories/Verilog/"/>
    
    
      <category term="Verilog HDL" scheme="http://peihao.space/tags/Verilog-HDL/"/>
    
  </entry>
  
  <entry>
    <title>Python中的numpy</title>
    <link href="http://peihao.space/2016/03/17/numpy/"/>
    <id>http://peihao.space/2016/03/17/numpy/</id>
    <published>2016-03-17T14:23:35.000Z</published>
    <updated>2016-03-29T15:06:08.637Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/article/article_numpy.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;Numpy&quot;&gt;Numpy&lt;/h1&gt;&lt;p&gt;&lt;em&gt;NumPy系统是Python的一种开源的数值计算扩展。这种工具可用来存储和处理大型矩阵，比Python自身的嵌套列表（nested list structure)结构要高效的多（该结构也可以用来表示矩阵（matrix））&lt;/em&gt;。&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;据说NumPy将Python相当于变成一种免费的更强大的MatLab系统。&lt;/p&gt;
&lt;p&gt;NumPy（Numeric Python）提供了许多高级的数值编程工具，如：矩阵数据类型、矢量处理，以及精密的运算库。专为进行严格的数字处理而产生。多为很多大型金融公司使用，以及核心的科学计算组织如：Lawrence Livermore，NASA用其处理一些本来使用C++，Fortran或Matlab等所做的任务。&lt;/p&gt;
&lt;h1 id=&quot;多维数组&quot;&gt;多维数组&lt;/h1&gt;&lt;p&gt;多维数组的类型是：&lt;code&gt;numpy.ndarray&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;使用numpy-array方法&quot;&gt;使用numpy.array方法&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;以list或tuple变量为参数产生一维数组：&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(np.array([&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(np.array((&lt;span class=&quot;number&quot;&gt;1.2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ &lt;span class=&quot;number&quot;&gt;1.2&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;2.&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;3.&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;4.&lt;/span&gt; ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; type(np.array((&lt;span class=&quot;number&quot;&gt;1.2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;type &lt;span class=&quot;string&quot;&gt;&#39;numpy.ndarray&#39;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;以list或tuple变量为元素产生二维数组：&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(np.array([[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;],[&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]]))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;指定数据类型&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;例如numpy.int32, numpy.int16, and numpy.float64等：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; np.array((&lt;span class=&quot;number&quot;&gt;1.2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;), dtype=np.int32)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;使用numpy.arange方法&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(np.arange(&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;13&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; type(np.arange(&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;type &lt;span class=&quot;string&quot;&gt;&#39;numpy.ndarray&#39;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; np.arange(&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;).reshape(&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;13&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; type(np.arange(&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;).reshape(&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;type &lt;span class=&quot;string&quot;&gt;&#39;numpy.ndarray&#39;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;使用numpy.linspace方法&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;例如，在从1到3中产生9个数：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(np.linspace(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;          &lt;span class=&quot;number&quot;&gt;1.22222222&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.44444444&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.66666667&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.88888889&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;2.11111111&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;2.33333333&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;2.55555556&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;2.77777778&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;3.&lt;/span&gt;        ]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;使用numpy.zeros，numpy.ones，numpy.eye&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;可以构造特定的矩阵&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(np.zeros((&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(np.ones((&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(np.eye(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;创建一个三维数组：&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(np.ones((&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[[ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [[ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [[ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]]]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;获取数组的属性&quot;&gt;获取数组的属性&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a = np.zeros((&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a.ndim)   &lt;span class=&quot;comment&quot;&gt;#数组的维数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a.shape)  &lt;span class=&quot;comment&quot;&gt;#数组每一维的大小&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a.size)   &lt;span class=&quot;comment&quot;&gt;#数组的元素数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a.dtype)  &lt;span class=&quot;comment&quot;&gt;#元素类型&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;float64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a.itemsize)  &lt;span class=&quot;comment&quot;&gt;#每个元素所占的字节数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;数组索引，切片，赋值&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt;&amp;gt;&amp;gt;a = np.array( [[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;],[&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;]] )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;]) &lt;span class=&quot;comment&quot;&gt;#index从0开始&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; a[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,:]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,:] = [&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;] &lt;span class=&quot;comment&quot;&gt;#直接赋值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;使用for操作元素&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; x &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; np.linspace(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;... &lt;/span&gt;    print(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;基本的数组运算&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;先构造数组a、b：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a = np.ones((&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;b = np.eye(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(b)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;数组的加减乘除&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a &amp;gt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [&lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a+b)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;2.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;2.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a-b)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(b*&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;2.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;2.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print((a*&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)*(b*&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;4.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;4.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(b/(a*&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt; ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print((b*&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)**&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;16.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;16.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;使用数组对象自带的方法&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a.sum() &lt;span class=&quot;comment&quot;&gt;#a的元素个数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a.sum(axis=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)   &lt;span class=&quot;comment&quot;&gt;#计算每一列（二维数组中类似于矩阵的列）的和&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;array([ &lt;span class=&quot;number&quot;&gt;2.&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;2.&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a.min()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a.max()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;使用numpy下的方法&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;np.sin(a)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;array([[ &lt;span class=&quot;number&quot;&gt;0.84147098&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;0.84147098&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [ &lt;span class=&quot;number&quot;&gt;0.84147098&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;0.84147098&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;np.max(a)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;np.floor(a)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;array([[ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;np.exp(a)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;array([[ &lt;span class=&quot;number&quot;&gt;2.71828183&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;2.71828183&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [ &lt;span class=&quot;number&quot;&gt;2.71828183&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;2.71828183&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;np.dot(a,a)   &lt;span class=&quot;comment&quot;&gt;##矩阵乘法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;array([[ &lt;span class=&quot;number&quot;&gt;2.&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;2.&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [ &lt;span class=&quot;number&quot;&gt;2.&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;2.&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;合并数组&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;使用numpy下的vstack和hstack函数：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a = np.ones((&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;b = np.eye(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(np.vstack((a,b)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#顾名思义 v--vertical  垂直&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(np.hstack((a,b)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#顾名思义 h--horizonal 水平&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;p&gt;看一下这两个函数有没有涉及到浅拷贝这种问题：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;c = np.hstack((a,b))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;b[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以看到，a、b中元素的改变并未影响c。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;深拷贝数组&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;数组对象自带了浅拷贝和深拷贝的方法，但是一般用深拷贝多一些：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a = np.ones((&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;b = a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(b &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; a)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;c = a.copy()  &lt;span class=&quot;comment&quot;&gt;#深拷贝&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;c &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;基本的矩阵运算&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;转置：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a = np.array([[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;],[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(a.transpose())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;迹：&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(np.trace(a))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;numpy.linalg关于矩阵运算的方法&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; import numpy.linalg as nplg&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;特征值、特征向量：&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; nplg.eig(a)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(array([ &lt;span class=&quot;number&quot;&gt;3.&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;]), array([[ &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;        ,  &lt;span class=&quot;number&quot;&gt;0.70710678&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [ &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;        , -&lt;span class=&quot;number&quot;&gt;0.70710678&lt;/span&gt;]]))&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;矩阵对象&quot;&gt;矩阵对象&lt;/h1&gt;&lt;p&gt;numpy模块中的矩阵对象为numpy.matrix，包括矩阵数据的处理，矩阵的计算，以及基本的统计功能，转置，可逆性等等，包括对复数的处理，均在matrix对象中。 &lt;/p&gt;
&lt;p&gt;&lt;code&gt;class numpy.matrix(data,dtype,copy)&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;返回一个矩阵，其中data为ndarray对象或者字符形式；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;dtype:为data的type；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;copy:为bool类型。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a = np.matrix(&lt;span class=&quot;string&quot;&gt;&#39;1 2 7; 3 4 8; 5 6 9&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a             &lt;span class=&quot;comment&quot;&gt;#矩阵的换行必须是用分号(;)隔开，内部数据必须为字符串形式(‘ ’)，矩&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;matrix([[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;],       &lt;span class=&quot;comment&quot;&gt;#阵的元素之间必须以空格隔开。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;b=np.array([[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;],[&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;x=np.matrix(b)   &lt;span class=&quot;comment&quot;&gt;#矩阵中的data可以为数组对象。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;x&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;matrix([[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;矩阵对象的属性&quot;&gt;矩阵对象的属性&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;matrix.T transpose&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;：返回矩阵的转置矩阵&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;matrix.H hermitian (conjugate) transpose&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;：返回复数矩阵的共轭元素矩阵&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;matrix.I inverse&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;：返回矩阵的逆矩阵&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;matrix.A base array&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;：返回矩阵基于的数组&lt;/p&gt;
&lt;h2 id=&quot;矩阵对象的方法&quot;&gt;矩阵对象的方法&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;all([axis, out]) :沿给定的轴判断矩阵所有元素是否为真(非0即为真)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;any([axis, out]) :沿给定轴的方向判断矩阵元素是否为真，只要一个元素为真则为真。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;argmax([axis, out]) :沿给定轴的方向返回最大元素的索引（最大元素的位置）.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;argmin([axis, out]): 沿给定轴的方向返回最小元素的索引（最小元素的位置）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;argsort([axis, kind, order]) :返回排序后的索引矩阵&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;astype(dtype[, order, casting, subok, copy]):将该矩阵数据复制，且数据类型为指定的数据类型&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;byteswap(inplace) Swap the bytes of the array elements&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;choose(choices[, out, mode]) :根据给定的索引得到一个新的数据矩阵（索引从choices给定）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;clip(a_min, a_max[, out]) :返回新的矩阵，比给定元素大的元素为a_max，小的为a_min&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;compress(condition[, axis, out]) :返回满足条件的矩阵&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;conj() :返回复数的共轭复数&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;conjugate() :返回所有复数的共轭复数元素&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;copy([order]) :复制一个矩阵并赋给另外一个对象，b=a.copy()&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;cumprod([axis, dtype, out]) :返回沿指定轴的元素累积矩阵&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;cumsum([axis, dtype, out]) :返回沿指定轴的元素累积和矩阵&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;diagonal([offset, axis1, axis2]) :返回矩阵中对角线的数据&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;dot(b[, out]) :两个矩阵的点乘&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;dump(file) :将矩阵存储为指定文件,可以通过pickle.loads()或者numpy.loads()如:a.dump(‘d:\a.txt’)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;dumps() :将矩阵的数据转存为字符串.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;fill(value) :将矩阵中的所有元素填充为指定的value&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;flatten([order]) :将矩阵转化为一个一维的形式，但是还是matrix对象&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;getA() :返回自己，但是作为ndarray返回&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;getA1()：返回一个扁平（一维）的数组（ndarray）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;getH() :返回自身的共轭复数转置矩阵&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;getI() :返回本身的逆矩阵&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;getT() :返回本身的转置矩阵&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;max([axis, out]) ：返回指定轴的最大值&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;mean([axis, dtype, out]) :沿给定轴方向，返回其均值&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;min([axis, out]) ：返回指定轴的最小值&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;nonzero() :返回非零元素的索引矩阵&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;prod([axis, dtype, out]) :返回指定轴方型上，矩阵元素的乘积.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ptp([axis, out]) :返回指定轴方向的最大值减去最小值.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;put(indices, values[, mode]) :用给定的value替换矩阵本身给定索引（indices）位置的值&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ravel([order]) :返回一个数组，该数组是一维数组或平数组&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;repeat(repeats[, axis]) :重复矩阵中的元素，可以沿指定轴方向重复矩阵元素，repeats为重复次数&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;reshape(shape[, order]) :改变矩阵的大小,如：reshape([2,3])&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;resize(new_shape[, refcheck]) :改变该数据的尺寸大小&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;round([decimals, out]) :返回指定精度后的矩阵，指定的位数采用四舍五入，若为1，则保留一位小数&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;searchsorted(v[, side, sorter]) :搜索V在矩阵中的索引位置&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;sort([axis, kind, order]) :对矩阵进行排序或者按轴的方向进行排序&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;squeeze([axis]) :移除长度为1的轴&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;std([axis, dtype, out, ddof]) :沿指定轴的方向，返回元素的标准差.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;sum([axis, dtype, out]) ：沿指定轴的方向，返回其元素的总和&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;swapaxes(axis1, axis2):交换两个轴方向上的数据.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;take(indices[, axis, out, mode]) :提取指定索引位置的数据,并以一维数组或者矩阵返回(主要取决axis)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;tofile(fid[, sep, format]) :将矩阵中的数据以二进制写入到文件&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;tolist() :将矩阵转化为列表形式&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;tostring([order]):将矩阵转化为python的字符串.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;trace([offset, axis1, axis2, dtype, out]):返回对角线元素之和&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;transpose(*axes) :返回矩阵的转置矩阵，不改变原有矩阵&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;var([axis, dtype, out, ddof]) ：沿指定轴方向，返回矩阵元素的方差&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;view([dtype, type]) :生成一个相同数据，但是类型为指定新类型的矩阵。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;举例&quot;&gt;举例&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a = np.asmatrix(&lt;span class=&quot;string&quot;&gt;&#39;0 2 7; 3 4 8; 5 0 9&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a.all()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a.all(axis=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;matrix([[&lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;,  &lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;]], dtype=bool)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a.all(axis=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;matrix([[&lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ &lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;]], dtype=bool)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Astype方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a.astype(float)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;matrix([[ &lt;span class=&quot;number&quot;&gt;12.&lt;/span&gt;,   &lt;span class=&quot;number&quot;&gt;3.&lt;/span&gt;,   &lt;span class=&quot;number&quot;&gt;5.&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ &lt;span class=&quot;number&quot;&gt;32.&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;23.&lt;/span&gt;,   &lt;span class=&quot;number&quot;&gt;9.&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ &lt;span class=&quot;number&quot;&gt;10.&lt;/span&gt;, -&lt;span class=&quot;number&quot;&gt;14.&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;78.&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Argsort方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a=np.matrix(&lt;span class=&quot;string&quot;&gt;&#39;12 3 5; 32 23 9; 10 -14 78&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a.argsort()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;matrix([[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Clip方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;matrix([[ &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;,   &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,   &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ &lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;,   &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, -&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;,  &lt;span class=&quot;number&quot;&gt;78&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a.clip(&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;matrix([[&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Cumprod方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a.cumprod(axis=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;matrix([[    &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;,     &lt;span class=&quot;number&quot;&gt;36&lt;/span&gt;,    &lt;span class=&quot;number&quot;&gt;180&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[    &lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;,    &lt;span class=&quot;number&quot;&gt;736&lt;/span&gt;,   &lt;span class=&quot;number&quot;&gt;6624&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[    &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;,   -&lt;span class=&quot;number&quot;&gt;140&lt;/span&gt;, -&lt;span class=&quot;number&quot;&gt;10920&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Cumsum方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a.cumsum(axis=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;matrix([[&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;55&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;64&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, -&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;74&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Tolist方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;b.tolist()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;], [&lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;], [&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, -&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;78&lt;/span&gt;]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Tofile方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;b.tofile(&lt;span class=&quot;string&quot;&gt;&#39;d:\\b.txt&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;compress()方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; numpy &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a = array([&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;40&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;condition = (a &amp;gt; &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;) &amp;amp; (a &amp;lt; &lt;span class=&quot;number&quot;&gt;35&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;condition&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;array([&lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;], dtype=bool)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a.compress(condition)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;array([&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;a[condition]                                      &lt;span class=&quot;comment&quot;&gt;# same effect&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;array([&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;compress(a &amp;gt;= &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;, a)                              &lt;span class=&quot;comment&quot;&gt;# this form a&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;so exists&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;array([&lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;40&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;b = array([[&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;],[&lt;span class=&quot;number&quot;&gt;40&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;60&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;b.compress(b.ravel() &amp;gt;= &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;array([&lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;40&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;60&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;x = array([&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;y = array([&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;101&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;b.compress(x &amp;gt;= &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, axis=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)                       &lt;span class=&quot;comment&quot;&gt;# illustrates &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;the use of the axis keyword&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;array([[&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;number&quot;&gt;40&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;60&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;prompt&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;b.compress(y &amp;gt;= &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;, axis=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;array([[&lt;span class=&quot;number&quot;&gt;40&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;60&lt;/span&gt;]])&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/article/article_numpy.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;Numpy&quot;&gt;Numpy&lt;/h1&gt;&lt;p&gt;&lt;em&gt;NumPy系统是Python的一种开源的数值计算扩展。这种工具可用来存储和处理大型矩阵，比Python自身的嵌套列表（nested list structure)结构要高效的多（该结构也可以用来表示矩阵（matrix））&lt;/em&gt;。
    
    </summary>
    
      <category term="Python" scheme="http://peihao.space/categories/Python/"/>
    
    
      <category term="Numpy" scheme="http://peihao.space/tags/Numpy/"/>
    
      <category term="Python" scheme="http://peihao.space/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Matplotlib快速绘图</title>
    <link href="http://peihao.space/2016/03/17/Matplotlib%E5%BF%AB%E9%80%9F%E7%BB%98%E5%9B%BE/"/>
    <id>http://peihao.space/2016/03/17/Matplotlib快速绘图/</id>
    <published>2016-03-17T14:23:35.000Z</published>
    <updated>2016-03-17T15:12:28.997Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Matplotlib&quot;&gt;Matplotlib&lt;/h1&gt;&lt;p&gt;&lt;em&gt;matplotlib 是python最著名的绘图库，它提供了一整套和matlab相似的命令API，十分适合交互式地行制图。而且也可以方便地将它作为绘图控件，嵌入GUI应用程序中。&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;优势&quot;&gt;优势&lt;/h2&gt;&lt;p&gt;作为python上最有名气的绘图库:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Matlab的语法&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;python语言&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;latex的画图质量&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;可以使用内嵌的latex引擎绘制的数学公式&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;快速绘图&quot;&gt;快速绘图&lt;/h2&gt;&lt;p&gt;matplotlib实际上是一套面向对象的绘图库，它所绘制的图表中的每个绘图元素，例如线条Line2D、文字Text、刻度等在内存中都有一个对象与之对应。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;为了方便快速绘图matplotlib通过pyplot模块提供了一套和MATLAB类似的绘图API，将众多绘图对象所构成的复杂结构隐藏在这套API内部。我们只需要调用pyplot模块所提供的函数就可以实现快速绘图以及设置图表的各种细节。&lt;/em&gt;pyplot模块虽然用法简单，但不适合在较大的应用程序中使用。&lt;/p&gt;
&lt;p&gt;为了将面向对象的绘图库包装成只使用函数的调用接口，pyplot模块的内部保存了当前图表以及当前子图等信息。当前的图表和子图可以使用&lt;code&gt;plt.gcf()&lt;/code&gt;和&lt;code&gt;plt.gca()&lt;/code&gt;获得，分别表示&lt;em&gt;“Get Current Figure”&lt;/em&gt;和&lt;em&gt;“Get Current Axes”&lt;/em&gt;。在pyplot模块中，许多函数都是对当前的&lt;code&gt;Figure&lt;/code&gt;或&lt;code&gt;Axes&lt;/code&gt;对象进行处理&lt;/p&gt;
&lt;p&gt;&lt;code&gt;plt.plot()&lt;/code&gt;实际上会通过plt.gca()获得当前的Axes对象ax，然后再调用ax.plot()方法实现真正的绘图&lt;/p&gt;
&lt;h1 id=&quot;柱状图&quot;&gt;柱状图&lt;/h1&gt;&lt;h2 id=&quot;横向&quot;&gt;横向&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/img/article/barh.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; matplotlib.pyplot &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; plt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.rcdefaults()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; numpy &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; np&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;people = (&lt;span class=&quot;string&quot;&gt;&#39;James&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Durant&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Kobe&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Wade&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Curry&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;Magic&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;Hardan&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;y_pos = np.arange(len(people))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;performance = &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt; * np.random.rand(len(people)) &lt;span class=&quot;comment&quot;&gt;#随机产生len(people)个 [0,1）的数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;error = np.random.rand(len(people))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.barh(y_pos, performance, xerr=error, align=&lt;span class=&quot;string&quot;&gt;&#39;center&#39;&lt;/span&gt;, alpha=&lt;span class=&quot;number&quot;&gt;0.4&lt;/span&gt;)&lt;span class=&quot;comment&quot;&gt;#这里是产生横向柱状图 barh h--horizontal&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.yticks(y_pos, people)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.xlabel(&lt;span class=&quot;string&quot;&gt;&#39;Performance&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.title(&lt;span class=&quot;string&quot;&gt;&#39;How efficient do you want to go today?&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.savefig(&lt;span class=&quot;string&quot;&gt;&quot;barh.png&quot;&lt;/span&gt;,format=&lt;span class=&quot;string&quot;&gt;&quot;png&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;纵向&quot;&gt;纵向&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/img/article/bar.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;people = (&lt;span class=&quot;string&quot;&gt;&#39;James&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Durant&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Kobe&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Wade&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Curry&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;Magic&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;Hardan&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;x_pos = np.arange(len(people))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;performance = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt; * np.random.rand(len(people)) &lt;span class=&quot;comment&quot;&gt;#随机产生len(people)个 [0,1）的数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;error = np.random.rand(len(people))/&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.bar(x_pos, performance, xerr=error, align=&lt;span class=&quot;string&quot;&gt;&#39;center&#39;&lt;/span&gt;, alpha=&lt;span class=&quot;number&quot;&gt;0.4&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.xticks(x_pos, people)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.ylabel(&lt;span class=&quot;string&quot;&gt;&#39;Performance&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.title(&lt;span class=&quot;string&quot;&gt;&#39;How efficient do you want to go today?&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.savefig(&lt;span class=&quot;string&quot;&gt;&quot;bar.png&quot;&lt;/span&gt;,format=&lt;span class=&quot;string&quot;&gt;&quot;png&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;解析&quot;&gt;解析&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;plt.rcdefaults()&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;恢复 rc 的默认设置&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;code&gt;barh()&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主要功能&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;：做一个横向条形图，横向条的矩形大小为: left, left + width, bottom, bottom + height&lt;/p&gt;
&lt;p&gt;&lt;code&gt;bar()&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主要功能&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;：做一个纵向条形图，纵向条的矩形大小为: left, left + width, bottom, bottom + height&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;参数&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;：barh ( bottom , width , height =0.8, left =0, ** kwargs )&lt;/p&gt;
&lt;p&gt;：bar  ( bottom , width , height =0.8, left =0, ** kwargs )&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;返回类型&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;：一个 class 类别，matplotlib.patches.Rectangle实例&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;参数说明&lt;br&gt;：&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;bottom&lt;/code&gt;: Bars 的垂直位置的底部边缘&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;width&lt;/code&gt;: Bars 的长度&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;可选参数：&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;height: bars 的高度&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;left: bars 左边缘 x 轴坐标值&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;color: bars 颜色&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;edgecolor: bars 边缘颜色&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;linewidth: bar 边缘宽度;None 表示默认宽度;0 表示不 i 绘制边缘&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;xerr: 若不为 None,将在 bar 图上生成 errobars&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;yerr: 若不为 None,将在 bar 图上生成 errobars&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ecolor: 指定 errorbar 颜色&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;capsize: 指定 errorbar 的顶部(cap)长度&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;align: &lt;code&gt;edge&lt;/code&gt; (默认) | &lt;code&gt;center&lt;/code&gt;:&lt;code&gt;edge&lt;/code&gt;以底部为准对齐;&lt;code&gt;center&lt;/code&gt;以 y 轴作为中心&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;log: [False|True] False (默认),若为 True,使用 log 坐标&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;图形填充&quot;&gt;图形填充&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/img/article/fill.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; numpy &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; np&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; matplotlib.pyplot &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; plt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;x = np.linspace(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;y = np.sin(&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; * np.pi * x) * np.exp(-&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt; * x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.fill(x, y, &lt;span class=&quot;string&quot;&gt;&#39;c&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.grid(&lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.savefig(&lt;span class=&quot;string&quot;&gt;&quot;fill.png&quot;&lt;/span&gt;,format=&lt;span class=&quot;string&quot;&gt;&quot;png&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;Tip&lt;/strong&gt;： grid 表示是否显示图轴网格。函数原型 matplotlib.pyplot.grid(b=None, which=’major’, axis=’both’, **kwargs)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;调用形式： &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;grid(self, b=None, which=’major’, axis=’both’, **kwargs)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主要参数：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;b&lt;/code&gt;： [True|False]或者是布尔数组、或[‘on’,‘off’] 表示网格是否开启&lt;/p&gt;
&lt;p&gt;&lt;code&gt;which&lt;/code&gt;： [major(默认)|minor|both] 选择主、次网格开启方式&lt;/p&gt;
&lt;p&gt;&lt;code&gt;axis&lt;/code&gt;： [both(默认)|x|y] 选择使用网格的数轴&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;x = np.linspace(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; * np.pi, &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;y1 = np.sin(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;y2 = np.sin(&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; * x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.fill(x, y1, &lt;span class=&quot;string&quot;&gt;&#39;b&#39;&lt;/span&gt;, x, y2, &lt;span class=&quot;string&quot;&gt;&#39;c&#39;&lt;/span&gt;, alpha=&lt;span class=&quot;number&quot;&gt;0.7&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plt.savefig(&lt;span class=&quot;string&quot;&gt;&quot;features.png&quot;&lt;/span&gt;,format=&lt;span class=&quot;string&quot;&gt;&quot;png&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;/img/article/features.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tip&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;alpha 表示透明度，0表示全透明，1表示完全不透明。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Matplotlib&quot;&gt;Matplotlib&lt;/h1&gt;&lt;p&gt;&lt;em&gt;matplotlib 是python最著名的绘图库，它提供了一整套和matlab相似的命令API，十分适合交互式地行制图。而且也可以方便地将它作为绘图控件，嵌入GUI应用程序中。&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;优势&quot;&gt;优势&lt;/h2&gt;&lt;p&gt;作为python上最有名气的绘图库:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Matlab的语法
    
    </summary>
    
      <category term="Python" scheme="http://peihao.space/categories/Python/"/>
    
    
      <category term="Python" scheme="http://peihao.space/tags/Python/"/>
    
      <category term="matplotlib" scheme="http://peihao.space/tags/matplotlib/"/>
    
  </entry>
  
  <entry>
    <title>洗白BT文件</title>
    <link href="http://peihao.space/2016/03/16/alter_torrent/"/>
    <id>http://peihao.space/2016/03/16/alter_torrent/</id>
    <published>2016-03-16T14:23:35.000Z</published>
    <updated>2016-03-16T07:15:51.237Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://www.bt.com.au/images/homepage/panotile001.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;写在前面&quot;&gt;写在前面&lt;/h1&gt;&lt;p&gt;接着上篇文章，&lt;a href=&quot;/2016/03/14/torrent/&quot;&gt;torrent文件编码&lt;/a&gt;.在&lt;code&gt;torrent文件编码&lt;/code&gt;这篇文章的开始我就说过，种子文件对于青年男士有着巨大的诱惑力。我也不例外，由于国内文化教育方面抓的比较紧，所以某些领域的文件信息无法通过种子文件离线下载、进入高速通道。这个实现的原理很简单，直接通过扫描种子文件的tracker、服务器地址显然不可取，那就遍历&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;torrent包含的文件名吧，这些文件往往会有很多露骨的字眼，净网行动进行了这么多年，文化教育领域对付这一套显然很有心得。&lt;/p&gt;
&lt;p&gt;下面我们就先看一下torrent文件包含的文件吧，当然不是通过BT下载器：）&lt;/p&gt;
&lt;h1 id=&quot;libtorrent&quot;&gt;libtorrent&lt;/h1&gt;&lt;p&gt;不造轮子，从我做起。网络上已经有大牛们制作的torrent库，其中最流行的应该就是libtorrent。  &lt;/p&gt;
&lt;p&gt;&lt;em&gt;LibTorrent 是一个C++ 语言的 BitTorrent 开发库，支持 Linux/Unix 系统。旨在提供高性能和良好代码风格的 BT 开发包。该开发包与其他包不同的是，它直接通过网络堆栈抓取文件页，因此性能是官方客户端的三倍。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;libtorrent的python版本：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Building the libtorrent python bindings will produce a shared library (DLL) which is a python module that can be imported in a python program.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;libtorrent API的中文翻译&lt;a href=&quot;http://ksharpdabu.ctfile.com/file/18920987&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;戳这里&lt;/a&gt;,当然没有python版本的API文件，不过既然已经安装了libtorrent的python binding，熟悉C++的API也是必做的一步。有条件的筒子们还是建议去读英文版的API吧&lt;a href=&quot;http://www.libtorrent.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Here&lt;/a&gt;，虽然我也不知道为什么这样推荐。&lt;/p&gt;
&lt;h1 id=&quot;torrent_info&quot;&gt;torrent_info&lt;/h1&gt;&lt;p&gt;上篇文章已经介绍了torrent文件包含的基本结构，一般来讲，简单的torrent文件有以下内容:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;info&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;包含文件的信息files、torrent显示的文件名name、发行商publisher-url。注意这里torrent文件名并不是那个我们可以简单通过重命名定义的name，而是torrent指向的那个大的文件或者文件夹名。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;comment&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;种子文件的注释&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;encoding&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;目前一般为utf-8&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;creation date&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;该关键字对应的值存放的是种子文件创建的时间&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;announce-list&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;存放的是备用Tracker的URL&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;created by&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;值存放生成种子文件的BT客户端软件的信息，如客户端名、版本号&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;nodes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;包含一系列ip和相应端口的列表，是用于连接DHT初始node。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;announce&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tracker的URL&lt;/p&gt;
&lt;p&gt;其中我们最常用的信息就是&lt;code&gt;info&lt;/code&gt;字段，里面包含我们需要的大部分信息。&lt;/p&gt;
&lt;p&gt;种子文件分为单文件种子以及多文件种子：&lt;/p&gt;
&lt;h2 id=&quot;单文件&quot;&gt;单文件&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;name&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;要下载的文件名字&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;length&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;要下载文件的大小（单位为byte）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;piece length&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;要下载文件按照piece length指定大小分片，此处指明单个分片大小。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pieces&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;存储每个分片的SHA1值(每个SHA1的hash长度为20byte)&lt;/p&gt;
&lt;h2 id=&quot;多文件&quot;&gt;多文件&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;files  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;表示该torrent为多文件形式，每个文件都是dictionary类型数据表示。 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;name&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;表示多个文件存储在以name命名的文件夹。 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;length&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;要下载文件的大小（单位为byte） &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;path&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;指出要下载文件存储相对于name字段表示的文件夹的位置。    &lt;/p&gt;
&lt;p&gt;假设name为dir1，此时： &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;如果path值为file1.rmvb，表示file1.rmvb的存储路径为dir1\file1.rmvb  &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果path值为dir2\file1.rmvb，表示file1.rmvb的存储路径为dir1\dir2\file1.rmvb&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;piece length&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;要下载文件安装piece length指定大小分片，此处指明单个分片大小。 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pieces&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;存储每个分片的SHA1值（每个SHA1的hash长度为20字节）&lt;/p&gt;
&lt;p&gt;下面是子啊python下使用libtorrent库对torrent文件的操作:&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; libtorrent &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; lt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bt=lt.torrent_info(filepath)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bt.files()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#返回一个包含文件的列表&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bt.nodes()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#返回DHT初始node&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bt.name()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#返回torrent文件名&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bt.pieces()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#分片SHA1值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;洗白&quot;&gt;洗白&lt;/h1&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;s= lt.bdecode(open(filepath, &lt;span class=&quot;string&quot;&gt;&#39;rb&#39;&lt;/span&gt;).read())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#通过对应的解码算法获取torrent文件的内容&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 修改说明文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; s:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; len(re.findall(&lt;span class=&quot;string&quot;&gt;&#39;comment.*?&#39;&lt;/span&gt;,item)):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        s[item]=str(s[item].__hash__())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#修改torrent文件名，保持了原来的文件格式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;alertFileName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(dic)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; dic:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; len(re.findall(&lt;span class=&quot;string&quot;&gt;&#39;(name).*?&#39;&lt;/span&gt;,i)):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; dic[i].find(&lt;span class=&quot;string&quot;&gt;&#39;.&#39;&lt;/span&gt;)&amp;lt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        dic[i]=&lt;span class=&quot;string&quot;&gt;&#39;[peihao.space]&#39;&lt;/span&gt;+str(&lt;span class=&quot;string&quot;&gt;b&#39;x&#39;&lt;/span&gt;)+str(path.__hash__())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; :&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                tem=dic[i].split(&lt;span class=&quot;string&quot;&gt;&#39;.&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                tem[len(tem)-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]=(re.findall(&lt;span class=&quot;string&quot;&gt;&#39;(\w+).*?&#39;&lt;/span&gt;,tem[len(tem)-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]))[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                dic[i]=&lt;span class=&quot;string&quot;&gt;&#39;[peihao.space]&#39;&lt;/span&gt;+str(&lt;span class=&quot;string&quot;&gt;b&#39;a&#39;&lt;/span&gt;)+str(tem[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;].__hash__())+&lt;span class=&quot;string&quot;&gt;&quot;.&quot;&lt;/span&gt;+tem[len(tem)-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#判断种子文件是否是多文件结构&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isMultiFiles&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(dict)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; dict[&lt;span class=&quot;string&quot;&gt;&#39;info&#39;&lt;/span&gt;]:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; i==&lt;span class=&quot;string&quot;&gt;&#39;files&#39;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#深度修改所有包含文件的名字 并保持原有文件格式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;deepSetFilesName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(dict)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; dict:&lt;span class=&quot;comment&quot;&gt;#item是一个个包含文件信息的序列&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; info &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; item:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; len(re.findall(&lt;span class=&quot;string&quot;&gt;&#39;(path).*?&#39;&lt;/span&gt;,info)):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; range(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,len(item[info])):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    path=item[info][i]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; path.find(&lt;span class=&quot;string&quot;&gt;&#39;.&#39;&lt;/span&gt;)&amp;lt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        item[info][i]=&lt;span class=&quot;string&quot;&gt;&#39;[peihao.space]&#39;&lt;/span&gt;+str(&lt;span class=&quot;string&quot;&gt;b&#39;x&#39;&lt;/span&gt;)+str(path.__hash__())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; :&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        tem=path.split(&lt;span class=&quot;string&quot;&gt;&#39;.&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        tem[len(tem)-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]=(re.findall(&lt;span class=&quot;string&quot;&gt;&#39;(\w+).*?&#39;&lt;/span&gt;,tem[len(tem)-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]))[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        item[info][i]=&lt;span class=&quot;string&quot;&gt;&#39;[peihao.space]&#39;&lt;/span&gt;+str(&lt;span class=&quot;string&quot;&gt;b&#39;a&#39;&lt;/span&gt;)+str(tem[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;].__hash__())+&lt;span class=&quot;string&quot;&gt;&quot;.&quot;&lt;/span&gt;+tem[len(tem)-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 种子转磁力链&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;bt2mag&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(name)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bt=lt.torrent_info(name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;magnet:?xt=urn:btih:%s&amp;amp;dn=%s&quot;&lt;/span&gt; % (bt.info_hash(), bt.name())&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;效果&quot;&gt;效果&lt;/h1&gt;&lt;p&gt;将生成的种子洗白程序用Tk造了一个壳子，效果如下&lt;/p&gt;
&lt;p&gt;原来的torrent内容:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/torrent1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;generate之后内容:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/torrent2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://pan.baidu.com/s/1pJZItsv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;程序下载戳这里&lt;/a&gt; 密码: agr3&lt;/p&gt;
&lt;p&gt;有多个版本python时，使用各自版本的Script一定要注意，像如果我要使用&lt;code&gt;pyinstaller&lt;/code&gt;这个软件生成exe，最好在环境变量中先将想使用的有关python版本的路径放置在最前面&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pyinstaller -i=favicon.ico -F -w torrent.py&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;因为这里不止要保证pyinstaller的版本正确（可以用 绝对路径/pyinstaller.exe确认），隐式的python版本没办法显式设定，所以把在环境变量中的路径先更新，使用完之后在还原即可。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://www.bt.com.au/images/homepage/panotile001.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;写在前面&quot;&gt;写在前面&lt;/h1&gt;&lt;p&gt;接着上篇文章，&lt;a href=&quot;/2016/03/14/torrent/&quot;&gt;torrent文件编码&lt;/a&gt;.在&lt;code&gt;torrent文件编码&lt;/code&gt;这篇文章的开始我就说过，种子文件对于青年男士有着巨大的诱惑力。我也不例外，由于国内文化教育方面抓的比较紧，所以某些领域的文件信息无法通过种子文件离线下载、进入高速通道。这个实现的原理很简单，直接通过扫描种子文件的tracker、服务器地址显然不可取，那就遍历
    
    </summary>
    
      <category term="torrent" scheme="http://peihao.space/categories/torrent/"/>
    
    
      <category term="torrent" scheme="http://peihao.space/tags/torrent/"/>
    
      <category term="编码" scheme="http://peihao.space/tags/%E7%BC%96%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>torrent文件编码</title>
    <link href="http://peihao.space/2016/03/14/torrent/"/>
    <id>http://peihao.space/2016/03/14/torrent/</id>
    <published>2016-03-14T14:23:35.000Z</published>
    <updated>2016-03-16T07:01:57.107Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://img1.mydrivers.com/img/20150517/008c977d53a449319839b62734ab656b.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;Torrent小记&quot;&gt;Torrent小记&lt;/h1&gt;&lt;p&gt;由于某些众所周知的原因，我对torrent文件(也就是我们常说的种子文件)产生了浓厚的兴趣，这里是官方百科对torrent文件的定义：&lt;/p&gt;
&lt;p&gt;&lt;em&gt;torrent文件本质上是文本文件，包含Tracker信息和文件信息两部分。Tracker信息主要是BT下载中需要用到的Tracker服务器的地址和针对Tracker服务器的设置，文件信息是根据对目标文件的计算生成的，计算结果根据BitTorrent协议内的B编码规则进行编码。所以，torrent文件就是被下载文件的“索引”。&lt;/em&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;既然是文本文件，使用文本编辑器，意料之中的失败，打开之后是大片大片的乱码，当然主要是中文乱码… 数字以及字母信息还是显示的相当完整的。也许当我打开一个纯英文Tracker信息的torrent文件时，就可以很清楚的了解其中的内容了。现在先来看一下torrent文件的编码格式.&lt;/p&gt;
&lt;h1 id=&quot;bencoding编码&quot;&gt;bencoding编码&lt;/h1&gt;&lt;p&gt;BT种子文件使用了一种叫bencoding的编码方法来保存数据。&lt;/p&gt;
&lt;p&gt;bencoding现有四种类型的数据：&lt;code&gt;srings&lt;/code&gt;(字符串)，&lt;code&gt;integers&lt;/code&gt;(整数)，&lt;code&gt;lists&lt;/code&gt;(列表)，&lt;code&gt;dictionaries&lt;/code&gt;(字典)&lt;/p&gt;
&lt;p&gt;编码规则如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;strings(字符串)&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;编码为：&amp;lt;字符串长度&amp;gt;：&amp;lt;字符串&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;例如： &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;:test 表示为字符串&lt;span class=&quot;string&quot;&gt;&quot;test&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;:例子 表示为字符串“例子”&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;字符串长度单位为字节&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;没开始或结束标记&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;integers(整数)&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;编码为：i&amp;lt;整数&amp;gt;e&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;开始标记i，结束标记为e&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;例如： &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;i1234e 表示为整数&lt;span class=&quot;number&quot;&gt;1234&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;i-&lt;span class=&quot;number&quot;&gt;1234&lt;/span&gt;e 表示为整数-&lt;span class=&quot;number&quot;&gt;1234&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;整数没有大小限制&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;i0e 表示为整数&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;i-&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;e 为非法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;以&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;开头的为非法如： i01234e 为非法&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;lists(列表)&lt;/p&gt;
&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;编码为：&lt;span class=&quot;keyword&quot;&gt;l&lt;/span&gt;&amp;lt;bencoding编码类型&amp;gt;&lt;span class=&quot;literal&quot;&gt;e&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;开始标记为&lt;span class=&quot;keyword&quot;&gt;l&lt;/span&gt;,结束标记为&lt;span class=&quot;literal&quot;&gt;e&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;列表里可以包含任何bencoding编码类型，包括整数，字符串，列表，字典。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;例如： l4:test5abcdee 表示为二个字符串[&lt;span class=&quot;string&quot;&gt;&quot;test&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;abcde&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;dictionaries(字典)&lt;/p&gt;
&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;编码为&lt;span class=&quot;keyword&quot;&gt;d&lt;/span&gt;&amp;lt;bencoding字符串&amp;gt;&amp;lt;bencoding编码类型&amp;gt;&lt;span class=&quot;keyword&quot;&gt;e&lt;/span&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;开始标记为&lt;span class=&quot;keyword&quot;&gt;d&lt;/span&gt;,结束标记为&lt;span class=&quot;literal&quot;&gt;e&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;关键字必须为bencoding字符串&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;值可以为任何bencoding编码类型&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;例如： d3:agei20ee 表示为&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;age&quot;&lt;/span&gt;=20&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d4:path3:C:\8:filename8:&lt;span class=&quot;keyword&quot;&gt;test&lt;/span&gt;.txte 表示为&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;path&quot;&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;C:\&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;filename&quot;&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;test.txt&quot;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;Torrent文件基本结构&quot;&gt;Torrent文件基本结构&lt;/h1&gt;&lt;p&gt;种子具体文件结构如下：&lt;/p&gt;
&lt;p&gt;全部内容必须都为bencoding编码类型。&lt;/p&gt;
&lt;p&gt;如果字典用{}表示，列表用[]表示，字符用””表示，目录类型的BT文件大致是这样的&lt;/p&gt;
&lt;figure class=&quot;highlight nimrod&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;announce&quot;&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://btfans.3322.org:8000/announce&quot;&lt;/span&gt;   ;tracker 服务器的&lt;span class=&quot;type&quot;&gt;URL&lt;/span&gt;(字符串)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;announce-list&quot;&lt;/span&gt;=[&lt;span class=&quot;string&quot;&gt;&quot;http://..&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;http://..&quot;&lt;/span&gt;]           ;备用tracker服务器列表(列表)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;creation date&quot;&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;1175204110&lt;/span&gt;                          ;种子创建的时间，&lt;span class=&quot;type&quot;&gt;Unix&lt;/span&gt;标准时间格式&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;encoding&quot;&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;GBK&quot;&lt;/span&gt;                                    ;编码&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;comment&quot;&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;备注&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;created by&quot;&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;创建人信息&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;info&quot;&lt;/span&gt;=&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;files&quot;&lt;/span&gt;=[&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;filehash&quot;&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;SHA1 Hash&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;length&quot;&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;168099584&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;path&quot;&lt;/span&gt;=[&lt;span class=&quot;string&quot;&gt;&quot;01.rmvb&quot;&lt;/span&gt;]&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  &lt;span class=&quot;decorator&quot;&gt;&amp;#123;...&amp;#125;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  &lt;span class=&quot;decorator&quot;&gt;&amp;#123;...&amp;#125;&lt;/span&gt;                &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;保存目录名&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;string&quot;&gt;&quot;piece length&quot;&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;2097152&lt;/span&gt;    ；每个块的大小，单位字节(整数)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;string&quot;&gt;&quot;pieces&quot;&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;每个块的SHA1 Hash的值的顺序排列(二进制格式,长度为&quot;&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt; X 块数&lt;span class=&quot;string&quot;&gt;&quot;)&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中，filehash为20个字节的二进制的SHA1 Hash&lt;/p&gt;
&lt;p&gt;需要下载文件的主要信息保存在&lt;code&gt;&amp;#39;info&amp;#39;&lt;/code&gt;值中，可以逐字解码。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://img1.mydrivers.com/img/20150517/008c977d53a449319839b62734ab656b.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;Torrent小记&quot;&gt;Torrent小记&lt;/h1&gt;&lt;p&gt;由于某些众所周知的原因，我对torrent文件(也就是我们常说的种子文件)产生了浓厚的兴趣，这里是官方百科对torrent文件的定义：&lt;/p&gt;
&lt;p&gt;&lt;em&gt;torrent文件本质上是文本文件，包含Tracker信息和文件信息两部分。Tracker信息主要是BT下载中需要用到的Tracker服务器的地址和针对Tracker服务器的设置，文件信息是根据对目标文件的计算生成的，计算结果根据BitTorrent协议内的B编码规则进行编码。所以，torrent文件就是被下载文件的“索引”。&lt;/em&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="torrent" scheme="http://peihao.space/categories/torrent/"/>
    
    
      <category term="torrent" scheme="http://peihao.space/tags/torrent/"/>
    
      <category term="编码" scheme="http://peihao.space/tags/%E7%BC%96%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>Verilog小叙(三)</title>
    <link href="http://peihao.space/2016/03/09/verilog_hdl3/"/>
    <id>http://peihao.space/2016/03/09/verilog_hdl3/</id>
    <published>2016-03-09T14:23:35.000Z</published>
    <updated>2016-03-09T05:35:46.256Z</updated>
    
    <content type="html">&lt;p&gt;好的，接着上篇文章&lt;a href=&quot;/2016/03/08/verilog_hdl2/&quot;&gt;Verilog小叙(二)&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;数据流建模&quot;&gt;数据流建模&lt;/h1&gt;&lt;p&gt;之前的介绍中，我们已经初步了解到数据流描述方式，本节对数据流的建模方式进一步讨论，主要讲述连续赋值语句、阻塞赋值语句、非阻塞赋值语句，并针对一个系统设计频率计数器的实例进行讲解。&lt;/p&gt;
&lt;h2 id=&quot;连续赋值语句&quot;&gt;连续赋值语句&lt;/h2&gt;&lt;p&gt;数据流的描述是采用连续赋值语句(assign )语句来实现的。语法如下：&lt;br&gt;&lt;code&gt;assign net_type = 表达式；&lt;/code&gt;&lt;br&gt;连续赋值语句用于组合逻辑的建模。 等式左边是wire 类型的变量。等式右边可以是常量、由运算符如逻辑运算符、算术运算符参与的表达。&lt;br&gt;如下几个实例：&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wire [3:0] Z, preset,clear; //线网说明&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assign z = preset &amp;amp; clear; //连续赋值语句&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire cout, cin ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire [3:0] sum, a, bB;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;. . .&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assign &amp;#123;cout,sum&amp;#125; = a + b + cin;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assign mux = (s == 3)? d : &#39;bz;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注意如下几个方面：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;连续赋值语句的执行是：只要右边表达式任一个变量有变化，表达式立即被计算，计算的结果立即赋给左边信号。&lt;/li&gt;
&lt;li&gt;连续赋值语句之间是并行语句，因此与位置顺序无关。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Tips：&lt;/strong&gt;&lt;br&gt;实际电路中赋值语句的执行其实会有ps级别的延迟，这个延迟是线、门器件本身特性造成的，不过只要是同步电路，那么ps级别延迟就可以忽略不计，因为后续的寄存器是在时钟上升沿采样，ps级别延迟和一个典型的时钟周期来比，完全不用考虑。&lt;/p&gt;
&lt;h2 id=&quot;阻塞赋值语句&quot;&gt;阻塞赋值语句&lt;/h2&gt;&lt;p&gt;“=”用于阻塞的赋值，凡是在组合逻辑（如在assign 语句中）赋值的请用阻塞赋值。阻塞赋值“=”在begin 和end 之间的语句是顺序执行，属于串行语句&lt;br&gt;说明：&lt;br&gt;always语句的敏感变量如果不含有时钟，即always（*）这样描述，那么也属于组合逻辑，需要使用阻塞赋值。&lt;br&gt;一个组合逻辑的例子：&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;always @(*) begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if ( new_vld_after == 1&#39;b1 )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;port_win = new_port_after ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;else if ( new_vld_before ==1&#39;b1 )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;port_win = new_port_before ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;port_win = last_sel_port ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end//阻塞赋值在begin-end之间串行执行&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;非阻塞赋值语句&quot;&gt;非阻塞赋值语句&lt;/h2&gt;&lt;p&gt;&lt;code&gt;“&amp;lt;=”&lt;/code&gt;用于阻塞的赋值，凡是在时序逻辑（如在always语句中）赋值的请用非阻塞赋值，非阻塞赋值&lt;code&gt;“&amp;lt;=”&lt;/code&gt;在&lt;code&gt;begin&lt;/code&gt;和&lt;code&gt;end&lt;/code&gt;之间的语句是并行执行，属于并行执语句。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tips：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;时序逻辑值&lt;/code&gt;的是&lt;code&gt;带有时钟的always块逻辑&lt;/code&gt;，只有always带有时钟，那么这个逻辑才能是寄存器。&lt;br&gt;一个时序逻辑的例子：&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;always @(posedge sys_clk or negedge sys_rst_n) begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if (sys_rst_n ==1&#39;b0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;clk_cnt &amp;lt;= 26&#39;b0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;clk_cnt &amp;lt;= clk_cnt + 26&#39;b1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;数据流建模具体实例&quot;&gt;数据流建模具体实例&lt;/h2&gt;&lt;p&gt;以上面的频率计数器为例，其中的AND2模块我们用数据流来建模。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/top_down.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;AND2模块对应文件AND2.v 的内容如下：&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;module &lt;span class=&quot;title&quot;&gt;AND2&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(A0, A1, Y)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input A0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input A1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output Y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire A0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire A1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire Y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assign Y = A0 &amp;amp; A1;&lt;span class=&quot;comment&quot;&gt;//连续赋值语句&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;行为建模&quot;&gt;行为建模&lt;/h1&gt;&lt;p&gt;在第四节中，我们已经对行为描述方式有个概念，这里对行为建模进一步的描述，并通过一个系统设计频率计数器加以巩固。&lt;/p&gt;
&lt;h2 id=&quot;简介&quot;&gt;简介&lt;/h2&gt;&lt;p&gt;行为建模方式是通过对设计的行为的描述来实现对设计建模，一般是指用过程赋值语句（&lt;code&gt;initial&lt;/code&gt;语句和&lt;code&gt;always&lt;/code&gt;语句）来设计的称为行为建模。&lt;/p&gt;
&lt;h2 id=&quot;顺序语句块&quot;&gt;顺序语句块&lt;/h2&gt;&lt;p&gt;语句块提供将两条或更多条语句组合成语法结构上相当于一条语句的机制。这里主要讲Verilog HDL的顺序语句块(begin . . . end)：语句块中的语句按给定次序顺序执行。&lt;br&gt;顺序语句块中的语句按顺序方式执行。每条语句中的时延值与其前面的语句执行的模拟时间相关。一旦顺序语句块执行结束，跟随顺序语句块过程的下一条语句继续执行。顺序语句块的语法如下：&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;begin [:block_id&amp;#123;declarations&amp;#125;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;procedural_statement (s)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例如：&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 产生波形:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; Stream = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; Stream = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; Stream = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; Stream = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; Stream = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; Stream = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;假定顺序语句块在第10个时间单位开始执行。两个时间单位后第1条语句执行，即第12个时间单位。此执行完成后，下1条语句在第17个时间单位执行(延迟5 个时间单位)。然后下1条语句在第20个时间单位执行，以此类推。该顺序语句块执行过程中产生的波形如图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/verilog_stream.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;过程赋值语句&quot;&gt;过程赋值语句&lt;/h2&gt;&lt;p&gt;Verilog HDL中提供两种过程赋值语句initial和always语句，用这两种语句来实现行为的建模。这两种语句之间的执行是并行的，即语句的执行与位置顺序无关。这两种语句通常与语句块（begin ….end）相结合，则语句块中的执行是按顺序执行的。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;initial 语句&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;initial语句只执行一次，即在设计被开始模拟执行时开始（0时刻）。&lt;em&gt;通常只用在对设计进行仿真的测试文件中，用于对一些信号进行初始化和产生特定的信号波形&lt;/em&gt;。&lt;br&gt;语法如下：（大家只要先有个概念就可以）&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;initial&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[timing_control] procedural_statement&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;procedural_statement 是下列语句之一：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;procedural_assignment(blocking or non-blocking) &lt;span class=&quot;comment&quot;&gt;//阻塞或非阻塞性过程赋值语句&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;procedural_continuous_assignment&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;conditional_statement&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;case_statement&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;loop_statement&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wait_statement&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;disable_statement&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;event_trigger&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title&quot;&gt;task_enable&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(user or system)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例子如上产生一个信号波形：&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;initial&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; Stream = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; Stream = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; Stream = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; Stream = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; Stream = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; Stream = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;说明：&lt;br&gt;initial只能使用在仿真中，是不可综合语法，很多初学者在开始的时候以为initial是可以综合的。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;always 语句&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;always语句与initial语句相反，是被重复执行，执行机制是通过对一个称为敏感变量表的&lt;strong&gt;事件驱动&lt;/strong&gt;来实现的，下面会具体讲到。always 语句可实现组合逻辑或时序逻辑的建模。&lt;br&gt;例子1：&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;initial&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;clk = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; ；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;always&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; clk = ~clk；&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;因为always 语句是重复执行的，因此，clk是初始值为0 的，周期为10 的方波。&lt;br&gt;例子2： D触发器&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//并行执行&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;always @ ( posedge clk or negedge rst ) begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; （ rst == &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;’b0 ）&lt;span class=&quot;comment&quot;&gt;//当rst为0时&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		q &amp;lt;= ‘ b &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		q &amp;lt;= d;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面&lt;em&gt;括号内的内容称为敏感变量&lt;/em&gt;，即整个always 语句当敏感变量有变化时被执行，否则不执行。因此，当rst为0时，q被复位，在时钟上升沿时，d被采样到q。&lt;/p&gt;
&lt;p&gt;例子3： 2选一的分配器&lt;/p&gt;
&lt;p&gt;&lt;code&gt;always @( sel ，a ，b）&lt;/code&gt;&lt;br&gt;&lt;code&gt;c = sel ? a ：b；&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这里的sel ，a，b 同样称为敏感变量，当三者之一有变化时，always 被执行，当sel 为 1 ，c被赋值为a ，否则为b 。描述的是一个组合逻辑 mux 器件。&lt;br&gt;说明：&lt;br&gt;Verilog 2001语法定义敏感变量可以使用“*”代替，&lt;br&gt;例子3的2 选一的分配器可以这样写：：&lt;br&gt;&lt;figure class=&quot;highlight applescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;always @&lt;span class=&quot;comment&quot;&gt;(*）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c = sel ? a ：b；&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;此处强烈建议大家使用*替代敏感变量，减少错误发生。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tips:&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;对&lt;strong&gt;组合逻辑&lt;/strong&gt;的always 语句，敏感变量建议使用*替代。&lt;/li&gt;
&lt;li&gt;对组合逻辑器件的赋值采用阻塞赋值 “=”。&lt;/li&gt;
&lt;li&gt;时序逻辑器件的赋值语句采用非阻塞赋值 “&amp;lt;=”；&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;状态机&quot;&gt;状态机&lt;/h1&gt;&lt;p&gt;有限状态机英文名字，&lt;em&gt;Finite State Machine&lt;/em&gt;，简称状态机，缩写为FSM。&lt;/p&gt;
&lt;p&gt;有限状态机是指输出取决于过去输入部分和当前输入部分的时序逻辑电路。有限状态机又可以认为是组合逻辑和寄存器逻辑的一种组合。状态机特别适合描述那些发生有先后顺序或者有逻辑规律的事情，其实这就是状态机的本质。状态机就是对具有逻辑顺序或时序规律的事件进行描述的一种方法&lt;/p&gt;
&lt;p&gt;根据状态机的输出是否与输入条件相关，可将状态机分为两大类，即摩尔 (Moore) 型状态机和米勒 (Mealy) 型状态机。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Mealy状态机：时序逻辑的输出不仅取决于当前状态，还取决于输入。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Moore状态机：时序逻辑的输出只取决于当前。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;根据实际写法，状态机还可以分为一段式、二段式和三段式状态机。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;一段式： 把整个状态机写在一个always模块中， 并且这个模块既包含状态转移，又含有组合逻辑输入 /输出 。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;二段式： 状态切换用时序逻辑，次态输出和信号输出用组合逻辑。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;三段式： 状态切换用时序逻辑，次态输出用组合逻辑，信号输出用时序逻辑。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Tips：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;实际应用中三段式使用最多，也最为可靠，避免了状态和输入输出的干扰，推荐大家使用第三种写法，我们实际项目中基本全部是第三种写法。本文也着重讲解三段式。&lt;/p&gt;
&lt;h2 id=&quot;Mealy状态机&quot;&gt;Mealy状态机&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;下一个状态 = F(当前状态，输入信号)； &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;输出信号 = G(当前状态，输入信号)；&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/mealy.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;Moore状态机&quot;&gt;Moore状态机&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;下一个状态 = F(当前状态，输入信号)； &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;输出信号 = G(当前状态)；&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/moore.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;三段式状态机&quot;&gt;三段式状态机&lt;/h2&gt;&lt;p&gt;两段式直接采用组合逻辑输出，而三段式则通过在组合逻辑后再增加一级寄存器来实现时序逻辑输出。这样做的好处是可以有效地滤去租个逻辑输出的毛刺，同时可以有效地进行时序计算与约束，另外对于总线形式的输出信号来说，容易使总线数据对齐，从而减小总线数据间的偏移，减小接收端数据采样出错的频率。&lt;br&gt;三段式状态机的基本格式是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;第一个always语句实现同步状态跳转；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第二个always语句实现组合逻辑；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第三个always语句实现同步输出。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Verilog描述状态机需要注意的事项：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;定义模块名和输入出端口；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;定义输入、输出变量或寄存器；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;定义时钟和复位信号；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;定义状态变量和状态寄存器；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用时钟沿触发的&lt;code&gt;always&lt;/code&gt;块表示状态转移过程；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在复位信号有效时给状态寄存器赋初始值；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;描述状态的转换过程：符合条件，从一个状态到另外一个状态。否则留在原状态；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;验证状态转移的正确性，必须完整和全面。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;一个三段式状态机例子：&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;module divider7_fsm (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//input&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input sys_clk ,    //系统时钟&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input sys_rst_n ,  //系统复位，以n结尾-低为有效&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//output&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output reg clk_divide_7 // 七分Clock&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//reg define&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg [6:0] curr_st ; // 状态机目前的状态&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg [6:0] next_st ; // 状态机下一时刻状态&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg clk_divide_7 ; // 时钟七分频&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//wire define&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//parameter define&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//one hot code design&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parameter S0 = 7&#39;b0000000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parameter S1 = 7&#39;b0000001;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parameter S2 = 7&#39;b0000010;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parameter S3 = 7&#39;b0000100;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parameter S4 = 7&#39;b0001000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parameter S5 = 7&#39;b0010000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parameter S6 = 7&#39;b0100000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/********************************************&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;** Main Program&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*********************************************/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//同步状态跳转  时钟上升沿或下降沿系统复位为低是事件驱动&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;always @(posedge sys_clk or negedge sys_rst_n) begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if (sys_rst_n ==1&#39;b0) begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		curr_st &amp;lt;= 7&#39;b0;//非阻塞赋值，并行&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	else begin//系统时钟上升沿&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		curr_st &amp;lt;= next_st;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//实现组合逻辑&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;always @(*) begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	case (curr_st)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		S0: begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			next_st = S1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		S1: begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			next_st = S2;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		S2: begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			next_st = S3;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		S3: begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			next_st = S4;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		S4: begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			next_st = S5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		S5: begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			next_st = S6;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		S6: begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			next_st = S0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		default: next_st = S0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	endcase&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//control divide clock offset实现同步输出&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;always @(posedge sys_clk or negedge sys_rst_n) begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if (sys_rst_n ==1&#39;b0) begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		clk_divide_7 &amp;lt;= 1&#39;b0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	else if ((curr_st == S0) | (curr_st == S1) | (curr_st == S2) | (curr_st == S3))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		clk_divide_7 &amp;lt;= 1&#39;b0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	else if ((curr_st == S4) | (curr_st == S5) | (curr_st == S6))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		clk_divide_7 &amp;lt;= 1&#39;b1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//end of RTL code&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;说明：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;本状态机采用独热码设计，简称one-hot code，独热码编码的最大优势在于状态比较时仅仅需要比较一个位，从而一定程度上简化了译码逻辑。&lt;/li&gt;
&lt;li&gt;一般状态机状态编码使用二进制编码、格雷码、独热码。 各种编码比较: 二进制编码、格雷码编码使用最少的触发器，消耗较多的组合逻辑，而独热码编码反之。独热码编码的最大优势在于状态比较时仅仅需要比较一个位，从而一定程度上简化了译码逻辑。虽然在需要表示同样的状态数时，独热编码占用较多的位，也就是消耗较多的触发器，但这些额外触发器占用的面积可与译码电路省下来的面积相抵消。 Binary（二进制编码）、gray-code（格雷码）编码使用最少的触发器，较多的组合逻辑，而one-hot（独热码）编码反之。one-hot 编码的最大优势在于状态比较时仅仅需要比较一个bit，一定程度上从而简化了比较逻辑，减少了毛刺产生的概率。另一方面，对于小型设计使用gray-code和binary编码更有效，而大型状态机使用one-hot更高效。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;行为建模具体实例&quot;&gt;行为建模具体实例&lt;/h2&gt;&lt;p&gt;以上面的LED流水灯为例，采用行为建模方法。&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;module LED (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//input&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input sys_clk , //系统时钟&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input sys_rst_n , //系统复位，低电平有效&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//output&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output reg [7:0] LED );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//Parameter define&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parameter WIDTH = 8 ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parameter SIZE = 8 ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parameter WIDTH2 = 18 ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parameter Para = 100000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//Reg define&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg [SIZE-1:0] counter ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg [WIDTH2-1:0] count ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//Wire define&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//*****************************************************&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//** Main Program&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//*****************************************************&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// count for add counter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;always @(posedge sys_clk or negedge sys_rst_n) begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if (sys_rst_n ==1&#39;b0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		count &amp;lt;= 18&#39;b0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		count &amp;lt;= count + 18&#39;b1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// counter for delay time to LED display&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;always @(posedge sys_clk or negedge sys_rst_n) begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if (sys_rst_n ==1&#39;b0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		counter &amp;lt;= 8&#39;b0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	else if ( count == Para)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		counter &amp;lt;= counter + 8&#39;b1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	else ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// ctrlLED pipeline display when counter is equal 10 or 20 ....&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;always @(posedge sys_clk or negedge sys_rst_n) begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if (sys_rst_n ==1&#39;b0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		LED &amp;lt;= 8&#39;b0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	else begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		case (counter)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			8&#39;d10 : LED &amp;lt;= 8&#39;b10000000 ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			8&#39;d20 : LED &amp;lt;= 8&#39;b01000000 ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			8&#39;d30 : LED &amp;lt;= 8&#39;b00100000 ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			8&#39;d40 : LED &amp;lt;= 8&#39;b00010000 ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			8&#39;d50 : LED &amp;lt;= 8&#39;b00001000 ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			8&#39;d60 : LED &amp;lt;= 8&#39;b00000100 ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			8&#39;d70 : LED &amp;lt;= 8&#39;b00000010 ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			8&#39;d80 : LED &amp;lt;= 8&#39;b00000001 ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			default : LED &amp;lt;= 8&#39;b00000000 ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		endcase&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;好的，接着上篇文章&lt;a href=&quot;/2016/03/08/verilog_hdl2/&quot;&gt;Verilog小叙(二)&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;数据流建模&quot;&gt;数据流建模&lt;/h1&gt;&lt;p&gt;之前的介绍中，我们已经初步了解到数据流描述方式，本节对数据流的建模方式进一步讨论，主要讲述连续赋值语句、阻塞赋值语句、非阻塞赋值语句，并针对一个系统设计频率计数器的实例进行讲解。&lt;/p&gt;
&lt;h2 id=&quot;连续赋值语句&quot;&gt;连续赋值语句&lt;/h2&gt;&lt;p&gt;数据流的描述是采用连续赋值语句(assign )语句来实现的。语法如下：&lt;br&gt;&lt;code&gt;assign net_type = 表达式；&lt;/code&gt;&lt;br&gt;连续赋值语句用于组合逻辑的建模。 等式左边是wire 类型的变量。等式右边可以是常量、由运算符如逻辑运算符、算术运算符参与的表达。&lt;br&gt;如下几个实例：&lt;/p&gt;
    
    </summary>
    
      <category term="Verilog" scheme="http://peihao.space/categories/Verilog/"/>
    
    
      <category term="Verilog HDL" scheme="http://peihao.space/tags/Verilog-HDL/"/>
    
      <category term="仿真" scheme="http://peihao.space/tags/%E4%BB%BF%E7%9C%9F/"/>
    
  </entry>
  
  <entry>
    <title>Verilog小叙(二)</title>
    <link href="http://peihao.space/2016/03/08/verilog_hdl2/"/>
    <id>http://peihao.space/2016/03/08/verilog_hdl2/</id>
    <published>2016-03-08T14:23:35.000Z</published>
    <updated>2016-03-22T11:38:38.841Z</updated>
    
    <content type="html">&lt;p&gt;好的，接着上篇文章&lt;a href=&quot;/2016/03/06/verilog_hdl/&quot;&gt;Verilog小叙(一)&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;常量&quot;&gt;常量&lt;/h1&gt;&lt;p&gt;Verilog HDL中有三种常量：&lt;br&gt;整型、实型、字符串型。&lt;br&gt;下划线符号“_”可以随意用在整数或实数中，它们就数量本身没有意义。它们能用来提高易读性；唯一的限制是下划线符号不能用作为首字符。&lt;br&gt;下面主要介绍整型和字符串型。&lt;/p&gt;
&lt;h2 id=&quot;整型&quot;&gt;整型&lt;/h2&gt;&lt;p&gt;整型数可以按如下两种方式书写：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;简单的十进制数格式&lt;/li&gt;
&lt;li&gt;基数格式&lt;/li&gt;
&lt;/ol&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;简单的十进制格式&quot;&gt;简单的十进制格式&lt;/h2&gt;&lt;p&gt;这种形式的整数定义为带有一个可选的“+”（一元）或“－”（一元）操作符的数字序列。&lt;br&gt;下面是这种简易十进制形式整数的例子。&lt;br&gt;32 十进制数32&lt;br&gt;－15 十进制数－15&lt;/p&gt;
&lt;h2 id=&quot;基数表示法&quot;&gt;基数表示法&lt;/h2&gt;&lt;p&gt;这种形式的整数格式为：&lt;br&gt;[size ] ‘base value&lt;br&gt;size 定义以位计的常量的位长；&lt;br&gt;base 为o或O（表示八进制），b或B（表示二进制），d或D（表示十进制），h 或H （表示十六进制）之一；&lt;br&gt;value 是基于base 的值的数字序列。值x和z以及十六进制中的a 到f 不区分大小写。&lt;br&gt;下面是一些具体实例：&lt;br&gt;&lt;figure class=&quot;highlight rust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;o37&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//5位八进制数（二进制11111）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;d2&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//4位十进制数（二进制0011）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;b1x_01&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//4位二进制数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;hx&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//7位x(扩展的x), 即xxxxxxx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;hz&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//4位z(扩展的z) , 即zzzz&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;d&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//非法：数值不能为负&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&#39; b &lt;span class=&quot;number&quot;&gt;001&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//非法：和基数b之间不允许出现空格&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;+&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;)&lt;span class=&quot;string&quot;&gt;&#39;b10&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//非法：位长不能够为表达式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;注意，x（或z）在十六进制值中代表4位x（或z），在八进制中代表3位x（或z ），在二进制中代表1位x（或z）。&lt;br&gt;基数格式计数形式的数通常为无符号数。这种形式的整型数的长度定义是可选的。如果没有定义一个整数型的长度，数的长度为相应值中定义的位数。下面是两个例子：&lt;br&gt;‘o 7219 3位八进制数&lt;br&gt;‘h AF8 4位十六进制数&lt;/p&gt;
&lt;p&gt;如果定义的长度比为常量指定的长度长，通常在左边填0补位。但是如果数最左边一位为x 或z，就相应地用x 或z 在左边补位。例如：&lt;br&gt;&lt;code&gt;10&amp;#39;b10&lt;/code&gt;左边添0占位,0000000010&lt;br&gt;&lt;code&gt;10&amp;#39;bx0x1&lt;/code&gt;左边添x占位, xxxxxxx0x1&lt;br&gt;如果长度定义得更小，那么最左边的位相应地被截断。例如：&lt;br&gt;&lt;code&gt;3 &amp;#39; b1001_0011&lt;/code&gt;与&lt;code&gt;3&amp;#39;b011&lt;/code&gt;相等&lt;br&gt;&lt;code&gt;5&amp;#39;H0FFF&lt;/code&gt;与&lt;code&gt;5&amp;#39;H1F&lt;/code&gt;相等&lt;/p&gt;
&lt;h2 id=&quot;字符串型&quot;&gt;字符串型&lt;/h2&gt;&lt;p&gt;字符串是双引号内的字符序列。字符串不能分成多行书写。&lt;br&gt;例如：&lt;br&gt;&lt;code&gt;&amp;quot;INTERNAL ERROR&amp;quot;&lt;/code&gt;&lt;br&gt;&lt;code&gt;&amp;quot; REACHED－&amp;gt;HERE &amp;quot;&lt;/code&gt;&lt;br&gt;用8位ASCII值表示的字符可看作是无符号整数。因此字符串是8位ASCII 值的序列。为存储字符串&lt;code&gt;“INTERNAL ERROR”&lt;/code&gt;，变量需要8x14位。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;reg [1:8*14] Message;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;Message = &amp;quot;INTERNAL ERROR&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;数据类型&quot;&gt;数据类型&lt;/h1&gt;&lt;p&gt;Verilog HDL 主要包括两种数据类型&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;线网类型(net type) &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;寄存器类型（reg type）&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;线网类型&quot;&gt;线网类型&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/verilog_hdl.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;wire 和 tri 定义&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;线网类型主要有wire 和tri两种&lt;/strong&gt;。线网类型用于对结构化器件之间的物理连线的建模.如器件的管脚，内部器件如与门的输出等。以上面的加法器为例，输入信号A，B是由外部器件所驱动，异或门X1的输出S1是与异或门X2输入脚相连的物理连接线，它由异或门X1所驱动。简单地讲，S1由X1驱动。&lt;br&gt;由于线网类型代表的是物理连接线，因此它不存贮逻辑值。必须由器件所驱动。通常由assign进行赋值。如 assign A = B ^ C；&lt;br&gt;当一个wire 类型的信号没有被驱动时，缺省值为Z（高阻）。&lt;br&gt;信号没有定义数据类型时，缺省为 wire 类型。&lt;br&gt;如上面一位全加器的端口信号 A，B，SUM等，没有定义类型，故缺省为wire 线网类型。&lt;br&gt;&lt;strong&gt;两者区别&lt;/strong&gt;&lt;br&gt;tri主要用于定义三态的线网。&lt;/p&gt;
&lt;h2 id=&quot;寄存器类型&quot;&gt;寄存器类型&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;定义&lt;br&gt;reg 是最常用的寄存器类型，寄存器类型通常用于对存储单元的描述，如D型触发器、ROM等。存储器类型的信号当在某种触发机制下分配了一个值，在分配下一个值之时保留原值。&lt;br&gt;reg 类型定义语法如下：&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;reg [msb: lsb] reg1, reg2, . . . reg N;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;msb 和lsb 定义了范围，并且均为常数值表达式。范围定义是可选的；如果没有定义范围，缺省值为&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; 位寄存器。例如：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg [&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] Sat; &lt;span class=&quot;comment&quot;&gt;// Sat 为4 位寄存器。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg Cnt; &lt;span class=&quot;comment&quot;&gt;//1 位寄存器。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;] Kisp, Pisp, Lisp ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//寄存器类型的值可取负数，但若该变量用于表达式的运算中，则按无符号类型处理，如：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg A ；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.....&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A = -&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;....&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;则A的二进制为&lt;span class=&quot;number&quot;&gt;1111&lt;/span&gt;，在运算中，A总按 无符号数&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;来看待。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;寄存器类型的存储单元建模举例&lt;br&gt;用寄存器类型来构建两位的D触发器如下：&lt;/p&gt;
&lt;figure class=&quot;highlight asciidoc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;reg [1：0] dout ；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;code&quot;&gt;.....&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;always@(posedge clk)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dout &amp;lt;= din;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;....&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;用寄存器数组类型来建立存储器的模型，如对2个8位的RAM建模如下：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg [7：0] mem[0：1] ；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;对存储单元的赋值必须一个个第赋值，如上2个8位的RAM的赋值必须用两条赋值语句：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;code&quot;&gt;.....&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mem[0] = ’ h 55；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mem[1] = ’ haa；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;....&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;书写规范建议&lt;br&gt;对数组类型，请按降序方式，如[7：0] ；&lt;br&gt;&lt;strong&gt;Tips:&lt;/strong&gt;&lt;br&gt;reg的类型不一定是寄存器，只有带有时钟的always块才能是寄存器，不带时钟的always块是组合逻辑。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;运算符和表达式&quot;&gt;运算符和表达式&lt;/h2&gt;&lt;p&gt;Verilog HDL中的操作符可以分为下述类型：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;算术操作符&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;关系操作符&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;相等操作符&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;逻辑操作符&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;按位操作符&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;归约操作符&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;移位操作符&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;条件操作符&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;连接和复制操作符&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;下表显示了所有操作符的优先级和名称。操作符从最高优先级（顶行）到最低优先级（底行）排列。同一行中的操作符优先级相同。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/veriloghdl2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;算术运算符&quot;&gt;算术运算符&lt;/h2&gt;&lt;p&gt;在常用的算术运算符主要是 ：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;加法（二元运算符）：“+”；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;减法 （二元运算符）：“-”；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;乘法（二元运算符）：“*”；&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在算术运算符的使用中，注意如下两个问题：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;算术操作结果的位数长度&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;算术表达式结果的长度由最长的操作数决定。在赋值语句下，算术操作结果的长度由操作符左端目标长度决定。考虑如下实例：&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;reg [&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] arc, bar, crt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg [&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] frx;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;. . .&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;arc = bar + crt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;frx = bar + crt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第一个加的结果长度由bar，crt 和 arc 长度决定，长度为4位。&lt;br&gt;第二个加法操作的长度同样由frx 的长度决定（frx 、bat 和crt 中的最长长度），长度为6位。&lt;br&gt;在第一个赋值中，加法操作的溢出部分被丢弃；而在第二个赋值中，任何溢出的位存储在结&lt;br&gt;果位frx [ 4 ]中。&lt;br&gt;在较大的表达式中，中间结果的长度如何确定？在Verilog HDL 中定义了如下规则：表达式中的所有中间结果应取最大操作数的长度（赋值时，此规则也包括左端目标）。考虑另一个实例：&lt;br&gt;wire [4:1] box, drt;&lt;br&gt;wire [5:1] cfg;&lt;br&gt;wire [6:1] peg;&lt;br&gt;wire [8:1] adt;&lt;br&gt;. . .&lt;br&gt;assign adt = (box + cfg) + (drt + peg) ;&lt;br&gt;表达式右端的操作数最长为6 ，但是将左端包含在内时，最大长度为8 。所以所有的加操作使用8 位进行。例如：box 和cfg 相加的结果长度为8 位。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;有符号数和无符号数在设计中，请先按无符号数进行。&lt;h2 id=&quot;关系运算符&quot;&gt;关系运算符&lt;/h2&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;关系运算符有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;?&amp;gt;（大于）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;?&amp;lt;（小于）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;?&amp;gt;=（不小于）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;?&amp;lt;=（不大于）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;= = （逻辑相等）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;= （逻辑不等）&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;关系操作符的结果为真（1 ）或假（0 ）。如果操作数中有一位为X 或Z ，那么结果为X 。&lt;br&gt;例：&lt;br&gt;23 &amp;gt; 45&lt;br&gt;结果为假（0 ），而：&lt;br&gt;52 &amp;lt; 8’hxFF&lt;br&gt;结果为x 。&lt;br&gt;如果操作数长度不同，长度较短的操作数在最重要的位方向（左方）添0 补齐。例如：&lt;br&gt;‘b1000 &amp;gt; = ‘b01110&lt;br&gt;等价于：&lt;br&gt;‘b01000 &amp;gt; = ‘b01110&lt;br&gt;结果为假（0 ）。&lt;br&gt;在逻辑相等与不等的比较中，只要一个操作数含有x 或z，比较结果为未知 （x），如：&lt;br&gt;假定：&lt;br&gt;Data = ‘b11x0;&lt;br&gt;Addr = ‘b11x0;&lt;br&gt;那么：&lt;br&gt;Data = = Addr 比较结果不定，也就是说值为x 。&lt;/p&gt;
&lt;h2 id=&quot;逻辑运算符&quot;&gt;逻辑运算符&lt;/h2&gt;&lt;p&gt;逻辑运算符有：&lt;br&gt;&amp;amp;&amp;amp; (逻辑与)&lt;br&gt;|| (逻辑或)&lt;br&gt;！(逻辑非)&lt;br&gt;用法为：（表达式1） 逻辑运算符 （表达式2） ….&lt;br&gt;这些运算符在逻辑值0（假） 或1（真） 上操作。逻辑运算的结果为0 或1 。例如, 假定：&lt;br&gt;crd = ‘b0; //0 为假&lt;br&gt;dgs = ‘b1; //1 为真&lt;br&gt;那么：&lt;br&gt;crd &amp;amp;&amp;amp; dgs 结果为0 (假)&lt;br&gt;crd || dgs 结果为1 (真)&lt;br&gt;！dgs 结果为0 (假)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;按位逻辑运算符&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;按位运算符有：&lt;br&gt;?~（一元非）：（相当于非门运算）&lt;br&gt;?&amp;amp;（二元与）：（相当于与门运算）&lt;br&gt;?|（二元或）： （相当于或门运算）&lt;br&gt;?^（二元异或）：（相当于异或门运算）&lt;br&gt;?~ ^, ^ ~（二元异或非即同或）：（相当于同或门运算）&lt;br&gt;这些操作符在输入操作数的对应位上按位操作，并产生向量结果。&lt;br&gt;例如，假定,&lt;br&gt;A = ‘b0110;&lt;br&gt;B = ‘b0100;&lt;br&gt;那么：&lt;br&gt;A | B 结果为0110&lt;br&gt;A &amp;amp; B 结果为0100&lt;br&gt;如果操作数长度不相等, 长度较小的操作数在最左侧添0补位。例如,&lt;br&gt;‘b0110 ^ ‘b10000&lt;br&gt;与如下式的操作相同：&lt;br&gt;‘b00110 ^ ‘b10000&lt;br&gt;结果为’b10110。&lt;/p&gt;
&lt;h2 id=&quot;条件运算符&quot;&gt;条件运算符&lt;/h2&gt;&lt;p&gt;条件操作符根据条件表达式的值选择表达式，形式如下：&lt;br&gt;cond_expr ? expr1 : expr2&lt;br&gt;如果cond_expr 为真(即值为1 )，选择expr1 ；如果cond_expr 为假(值为0 )，选择expr2 。如果cond_expr 为x 或z ，结果将是按以下逻辑expr1 和expr2 按位操作的值： 0 与0 得0 ，1 与1 得1 ，其余情况为x 。&lt;br&gt;如下所示:&lt;br&gt;wire [2:0] student = marks &amp;gt; 18 ? grade_a : grade_c;&lt;br&gt;计算表达式marks &amp;gt; 18; 如果真,grade_a 赋值为student；如果marks &amp;lt; =18, grade_c 赋值为student 。&lt;/p&gt;
&lt;h2 id=&quot;连接运算符&quot;&gt;连接运算符&lt;/h2&gt;&lt;p&gt;连接操作是将小表达式合并形成大表达式的操作。形式如下：&lt;br&gt;{expr1, expr2, . . .，exprN}&lt;br&gt;实例如下所示：&lt;br&gt;wire [7:0] Dbus;&lt;br&gt;assign Dbus [7:4] = {Dbus [0], Dbus [1], Dbus[2], Dbus[ 3 ]};&lt;br&gt;//以反转的顺序将低端4 位赋给高端4 位。&lt;br&gt;assign Dbus = {Dbus [3:0], Dbus [7:4]};&lt;br&gt;//高4 位与低4 位交换。&lt;br&gt;由于非定长常数的长度未知, 不允许连接非定长常数。例如,下列式子非法：&lt;br&gt;{Dbus,5} //不允许连接操作非定长常数。&lt;/p&gt;
&lt;h2 id=&quot;条件语句&quot;&gt;条件语句&lt;/h2&gt;&lt;p&gt;if 语句的语法如下：&lt;br&gt;&lt;figure class=&quot;highlight gcode&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;(condition_1)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;procedural_stateme&lt;span class=&quot;label&quot;&gt;nt_1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;else &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;(condition_2)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;procedural_stateme&lt;span class=&quot;label&quot;&gt;nt_2&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;procedural_stateme&lt;span class=&quot;label&quot;&gt;nt_3&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果对condition_1 求值的结果为个&lt;strong&gt;非1&lt;/strong&gt;，那么procedural_statement_1 被执，如果condition_1 的值为0 、x 或z ，那么procedural_statement_1 不执行。如果存在一个else 分支，那么这个分支被执行。&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (sum &amp;lt; &lt;span class=&quot;number&quot;&gt;60&lt;/span&gt;) begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;grade = c;&lt;span class=&quot;comment&quot;&gt;//串行语句&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;total_c = total _c + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(sum &amp;lt; &lt;span class=&quot;number&quot;&gt;75&lt;/span&gt;)&lt;/span&gt; begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;grade &lt;/span&gt;= b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;total_b = total_b + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;grade = a;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;total_a = total_a + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;若为if - if 语句，请使用块语句 begin — end ：&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(clk == &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) &lt;span class=&quot;function&quot;&gt;begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(reset== &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;q &lt;/span&gt;= &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;q = d;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;对if语句，除非在时序逻辑中，if 语句需要有else语句。若没有缺省语句，设计将产生一个锁存器，锁存器在asic设计中有诸多的弊端。&lt;br&gt;如下一例：&lt;br&gt;if （t == 1）&lt;br&gt;q = d；&lt;br&gt;没有else 语句，当t为1（真）时，d 被赋值给q，当t为0（假）时，因为没有else 语句，电路保持 q 以前的值，这就形成一个锁存器。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;case语句&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;case 语句是一个多路条件分支形式，其语法如下：&lt;br&gt;&lt;figure class=&quot;highlight ceylon&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt;expr)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt;item&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt;expr&amp;#123; ,&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt;item&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt;expr&amp;#125; :procedural&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt;statement&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;. . .&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;. . .&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;annotation&quot;&gt;default&lt;/span&gt;:procedural&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt;statement]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endcase&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;case 语句首先对条件表达式case_expr 求值，然后依次对各分支项求值并进行比较，第一个与条件表达式值相匹配的分支中的语句被执行。可以在1 个分支中定义多个分支项；这些值不需要互斥。缺省分支覆盖所有没有被分支表达式覆盖的其他分支。&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;case (HEX)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b0001 : led = 7&#39;b1111001; // 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b0010 : led = 7&#39;b0100100; // 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b0011 : led = 7&#39;b0110000; // 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b0100 : led = 7&#39;b0011001; // 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b0101 : led = 7&#39;b0010010; // 5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b0110 : led = 7&#39;b0000010; // 6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b0111 : led = 7&#39;b1111000; // 7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b1000 : led = 7&#39;b0000000; // 8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b1001 : led = 7&#39;b0010000; // 9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b1010 : led = 7&#39;b0001000; // a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b1011 : led = 7&#39;b0000011; // b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b1100 : led = 7&#39;b1000110; // c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b1101 : led = 7&#39;b0100001; // d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b1110 : led = 7&#39;b0000110; // e&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&#39;b1111 : led = 7&#39;b0001110; // f&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;default : led = 7&#39;b1000000; // 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endcase&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;case 的缺省项必须写，防止产生锁存器。&lt;/p&gt;
&lt;p&gt;只有组合逻辑才可能产生锁存器，时序逻辑不会产生锁存器。&lt;/p&gt;
&lt;h1 id=&quot;结构建模&quot;&gt;结构建模&lt;/h1&gt;&lt;h2 id=&quot;模块定义结构&quot;&gt;模块定义结构&lt;/h2&gt;&lt;p&gt;我们已经了解到，一个设计实际上是由一个个module 组成的。一个模块module 的结构如下：&lt;br&gt;module module_name (&lt;br&gt;port_list&lt;br&gt;) ;&lt;br&gt;Declarations_and_Statements&lt;br&gt;endmodule&lt;br&gt;在结构建模中，描述语句主要是实例化语句，包括对Verilog HDL 内置门如与门（and）异或门（xor）等的例化，如全加器的xor 门的调用；及对其他器件的调用，这里的器件包括FPGA厂家提供的一些宏单元以及设计者已经有的设计。&lt;br&gt;在实际应用中，实例化语句主用指后者，对内置门建议不采纳，而用数据流或行为级方式对基本门电路的描述。&lt;br&gt;端口队列port_list 列出了该模块通过哪些端口与外部模块通信，在Verilog 2001语法中还包括输入输出、wire/reg类型、位宽定义。&lt;/p&gt;
&lt;h2 id=&quot;模块端口&quot;&gt;模块端口&lt;/h2&gt;&lt;p&gt;模块的端口可以是输入端口、输出端口或双向端口。缺省的端口类型为线网类型（即wire 类型）。输入端口默认为wire类型，不需要定义，输出或双向端口能够声明为wire/reg 型，使用reg必须显式声明，使用wire也强烈建议显式声明。&lt;br&gt;Verilog 2001语法中的输入输出包括端口名、输入输出、wire/reg类型、位宽定义，极大的减少了端口声明占用的代码行数。当前已经非常普及。&lt;br&gt;例子：&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;module &lt;span class=&quot;title&quot;&gt;LED&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//input&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input sys_clk , &lt;span class=&quot;comment&quot;&gt;//system clock;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input sys_rst_n , &lt;span class=&quot;comment&quot;&gt;//system reset, low is active;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//output&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output reg [&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] LED )&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;该例子包括输入、输出、姓名名称、位宽、输出的信号类型。&lt;/p&gt;
&lt;h2 id=&quot;实例化语句&quot;&gt;实例化语句&lt;/h2&gt;&lt;p&gt;一个模块能够在另外一个模块中被引用，这样就建立了描述的层次。模块实例化语句形式如下：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;module_name instance_name(port_associations);&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;信号端口可以通过位置或名称关联；&lt;/p&gt;
&lt;p&gt;但是关联方式不能够混合使用。端口关联形式如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;PortName //通过位置。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;.PortName (port_expr) //通过名称。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;建议使用名称进行关联。&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// instantance RR_CORE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RR_CORE U_RR_CORE (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.rr_en ( rr_en ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.port_vld ( key ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.last_sel_port ( last_sel_port ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.port_win ( port_win )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;port_expr 可以是以下的任何类型：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;标识符（reg 或net ）如 .C（T3），T3为wire型标识符。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;位选择 ，如 .C（D[0]），C端口接到D信号的第0bit 位。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;部分选择 ，如 .Bus （Din[5：4]）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;上述类型的合并，如 .Addr（{ A1，A2[1：0]}。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;表达式（只适用于输入端口），如 .A （wire Zire = 0 ）。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;建议：&lt;br&gt;在例化的端口映射中请采用名字关联，这样，当被调用的模块管脚改变时不易出错。&lt;/p&gt;
&lt;h2 id=&quot;悬空端口的处理&quot;&gt;悬空端口的处理&lt;/h2&gt;&lt;p&gt;在我们的实例化中，可能有些管脚没用到，可在映射中采用空白处理，如：&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;DFF U_DFF_0 (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.q(qs),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.qbar ( ), //管脚悬空&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.data (d ) ,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.preset ( ), // 该管脚悬空&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.clock (ck)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;); //名称对应方式。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;对输入管脚悬空的，则该管脚输入为高阻 Z，输出管脚被悬空的，该输出管脚废弃不用。&lt;br&gt;建议：&lt;br&gt;大规模电路设计的时候，悬空的端口最好使用XX_nc（wire类型）进行显式声明，提高检视代码的效率。&lt;/p&gt;
&lt;h2 id=&quot;不同端口长度的处理&quot;&gt;不同端口长度的处理&lt;/h2&gt;&lt;p&gt;当端口和局部端口表达式的长度不同时，端口通过无符号数的右对齐或截断方式进行匹配。&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;module &lt;span class=&quot;title&quot;&gt;Child&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(Pba, Ppy)&lt;/span&gt; &lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input [&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] Pba;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] Ppy;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;. . .&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;module Top;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;] Bdl;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;] Mpr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;Child &lt;span class=&quot;title&quot;&gt;C1&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(Bdl, Mpr)&lt;/span&gt; &lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在对Child 模块的实例中，Bdl[2]连接到Pba[ 0 ]，Bdl[1] 连接到Pba[ 1 ]，余下的输入端口Pba[5]、Pba[4]、Pba[2]和Pba[3]悬空，因此为高阻态z 。与之相似，Mpr[6]连接到Ppy[0]，Mpr[5]连接到Ppy[1]，Mpr[4] 连接到Ppy[2]。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/port_cond.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;结构化建模具体实例&quot;&gt;结构化建模具体实例&lt;/h2&gt;&lt;p&gt;对一个数字系统的设计，我们采用的是自顶向下的设计方式。可把系统划分成几个功能模块，每个功能模块再划分成下一层的子模块。每个模块的设计对应一个module，一个module 设计成一个verilog HDL 程序文件。因此，对一个系统的顶层模块，我们采用结构化的设计，即顶层模块分别调用了各个功能模块。下面以一个实例（一个频率计数器系统）说明如何用HDL进行系统设计。&lt;br&gt;在该系统中，我们划分成如下三个部分：2输入与门模块，LED显示模块，4位计数器模块。系统的层次描述如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/top_down.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;顶层模块CNT_BCD，文件名CNT_BCD.v，该模块调用了低层模块 AND2、CNT_4b和HEX2LED 。&lt;br&gt;顶层模块CNT_BCD对应的设计文件 CNT_BCD.v 内容为：&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;module CNT_BCD (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// ------------ Port declarations --------- //&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input CLK,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input GATE,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input RESET,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output wire [3:0] BCD_A,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output wire [3:0] BCD_B,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output wire [3:0] BCD_C,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output wire [3:0] BCD_D&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;) ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// ----------- Signal declarations -------- //&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire NET104;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire NET124;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire NET132;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire NET80;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// -------- Component instantiations -------//&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CNT_4b U0(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.CLK(CLK),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.ENABLE(GATE),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.FULL(NET80),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.Q(BCD_A),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.RESET(RESET)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;AND2 U6(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.A0(NET104),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.A1(NET124),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.Y(NET132)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tips:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;这里的AND2是为了举例说明，在实际设计中，对门级不要重新设计成一个模块，同时对涉及保留字的（不管大小写）相类似的标识符最好不用。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;好的，接着上篇文章&lt;a href=&quot;/2016/03/06/verilog_hdl/&quot;&gt;Verilog小叙(一)&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;常量&quot;&gt;常量&lt;/h1&gt;&lt;p&gt;Verilog HDL中有三种常量：&lt;br&gt;整型、实型、字符串型。&lt;br&gt;下划线符号“_”可以随意用在整数或实数中，它们就数量本身没有意义。它们能用来提高易读性；唯一的限制是下划线符号不能用作为首字符。&lt;br&gt;下面主要介绍整型和字符串型。&lt;/p&gt;
&lt;h2 id=&quot;整型&quot;&gt;整型&lt;/h2&gt;&lt;p&gt;整型数可以按如下两种方式书写：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;简单的十进制数格式&lt;/li&gt;
&lt;li&gt;基数格式&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="Verilog" scheme="http://peihao.space/categories/Verilog/"/>
    
    
      <category term="Verilog HDL" scheme="http://peihao.space/tags/Verilog-HDL/"/>
    
      <category term="仿真" scheme="http://peihao.space/tags/%E4%BB%BF%E7%9C%9F/"/>
    
  </entry>
  
  <entry>
    <title>session教务数据</title>
    <link href="http://peihao.space/2016/03/08/net_auth/"/>
    <id>http://peihao.space/2016/03/08/net_auth/</id>
    <published>2016-03-08T14:23:35.000Z</published>
    <updated>2016-03-16T07:29:35.182Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;http://file.koolearn.com/20150326/14273404312699.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;之前写过一篇文章&lt;a href=&quot;/2016/02/24/Internet_authentication/&quot;&gt;校园网上网认证&lt;/a&gt;,是讲我在校园里通过python实现子的那个上网登录，后来我在这个基础上增加了账号密码存储功能。到这里可能大家又会想到这是上一篇的延续，实际上并不是。在那篇文章里面，我在尝试了几种网络模块之后选择了Requests，它基于urllib3，隐式的在内部实现了很多特性。&lt;/p&gt;
&lt;p&gt;在&lt;a href=&quot;/2016/02/27/selenium/&quot;&gt;Selenium模拟测试教务数据&lt;/a&gt;这篇文章中，我说过，&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;尝试了很长时间，一直不能通过python网络模块模拟获取教务信息，在那时候我就知道是因为cookie机制的不熟悉，因为在requests使用了cookie之后可以访问需要cookie的第一个界面，但之后需要相同cookie的页面全都无法访问。见猎心起，我用了大名鼎鼎的Selenium模拟浏览器登录，并成功获取了想要的信息。&lt;/p&gt;
&lt;p&gt;这几天，查阅文档时候，偶然发现了Requests模块的session对象，会话对象可以跨请求保持某些参数。它也会在同一个Session实例发出的所有请求之间保持cookies。这正是我需要的！&lt;/p&gt;
&lt;h1 id=&quot;基本方法&quot;&gt;基本方法&lt;/h1&gt;&lt;h2 id=&quot;跨请求保持&quot;&gt;跨请求保持&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;s = requests.Session()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s.get(&lt;span class=&quot;string&quot;&gt;&#39;http://httpbin.org/cookies/set/sessioncookie/123456789&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;r = s.get(&lt;span class=&quot;string&quot;&gt;&quot;http://httpbin.org/cookies&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(r.text)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# &#39;&amp;#123;&quot;cookies&quot;: &amp;#123;&quot;sessioncookie&quot;: &quot;123456789&quot;&amp;#125;&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在不同的请求里，可以发现cookie没有变化，这就是跨请求保持参数。&lt;/p&gt;
&lt;h2 id=&quot;会话层数据合并&quot;&gt;会话层数据合并&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;s = requests.Session()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s.auth = (&lt;span class=&quot;string&quot;&gt;&#39;user&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;pass&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s.headers.update(&amp;#123;&lt;span class=&quot;string&quot;&gt;&#39;x-test&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;true&#39;&lt;/span&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# both &#39;x-test&#39; and &#39;x-test2&#39; are sent&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s.get(&lt;span class=&quot;string&quot;&gt;&#39;http://httpbin.org/headers&#39;&lt;/span&gt;, headers=&amp;#123;&lt;span class=&quot;string&quot;&gt;&#39;x-test2&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;true&#39;&lt;/span&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;会话也可用来为请求方法提供缺省数据。这是通过为会话对象的属性提供数据来实现的,任何你传递给请求方法的字典都会与已设置会话层数据合并。方法层的参数覆盖会话的参数。&lt;/p&gt;
&lt;h2 id=&quot;剔除参数&quot;&gt;剔除参数&lt;/h2&gt;&lt;p&gt;有时你会想省略字典参数中一些会话层的键。要做到这一点，你只需简单地在方法层参数中将那个键的值设置为 None ，那个键就会被自动省略掉。&lt;/p&gt;
&lt;h1 id=&quot;一些经验&quot;&gt;一些经验&lt;/h1&gt;&lt;p&gt;任何时候调用requests.*()你都在做两件主要的事情。其一，你在构建一个 Request 对象， 该对象将被发送到某个服务器请求或查询一些资源。其二，一旦 requests 得到一个从 服务器返回的响应就会产生一个 Response 对象。该响应对象包含服务器返回的所有信息， 也包含你原来创建的 Request 对象。如下是一个简单的请求，从Wikipedia的服务器得到 一些非常重要的信息:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;r = requests.get(&amp;#39;http://en.wikipedia.org/wiki/Monty_Python&amp;#39;)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果想访问服务器返回给我们的响应头部信息，可以这样做:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;r.headers&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;然而，如果想得到发送到服务器的请求的头部，我们可以简单地访问该请求，然后是该请求的头部:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;r.request.headers&lt;/code&gt;&lt;/p&gt;
&lt;h1 id=&quot;将Selenium版本改进&quot;&gt;将Selenium版本改进&lt;/h1&gt;&lt;p&gt;有了上面的内容，我们可以很轻松的通过会话对象(&lt;code&gt;requests.session()&lt;/code&gt;)保持cookie，进而访问我需要的教务信息。&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; requests&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; time&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; lxml &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; etree&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;times=time.time()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#新建一个会话对象&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myRequests=requests.session()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#设置重复的request header&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;headers = &amp;#123;&lt;span class=&quot;string&quot;&gt;&#39;User-Agent&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:44.0) Gecko/20100101 Firefox/44.0&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;string&quot;&gt;&#39;Accept&#39;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&#39;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;string&quot;&gt;&#39;Accept-Encoding&#39;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&#39;gzip, deflate&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;string&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;application/x-www-form-urlencoded&#39;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myRequests.headers.update(headers)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;posturl=&lt;span class=&quot;string&quot;&gt;&#39;****************&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;postData = &amp;#123;&lt;span class=&quot;string&quot;&gt;&#39;UserStyle&#39;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&#39;student&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;user&#39;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&#39;********&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;password&#39;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&#39;********&#39;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#在这里增添不同的请求参数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;request1 = myRequests.post(posturl, postData, headers=&amp;#123;&lt;span class=&quot;string&quot;&gt;&#39;Referer&#39;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&#39;*******&#39;&lt;/span&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;geturl=&lt;span class=&quot;string&quot;&gt;&#39;*******************&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;request3=myRequests.get(geturl,headers=&amp;#123;&lt;span class=&quot;string&quot;&gt;&#39;Referer&#39;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&#39;*************&#39;&lt;/span&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;request3.encoding=&lt;span class=&quot;string&quot;&gt;&#39;gb2312&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#网页信息处理、排版&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dom=etree.HTML(request3.text)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;names=dom.xpath(&lt;span class=&quot;string&quot;&gt;&#39;/html/body/table/tr/td[3]/text()&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;socres=dom.xpath(&lt;span class=&quot;string&quot;&gt;&#39;/html/body/table/tr/td[5]/text()&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rates=dom.xpath(&lt;span class=&quot;string&quot;&gt;&#39;/html/body/table/tr/td[7]/text()&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;assert&lt;/span&gt;(len(names) == len(socres)==len(rates))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;results=zip(names,socres,rates)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; results:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(item[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;],item[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;].strip(),item[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(time.time()-times)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面就是烦扰我很长时间的问题，通过会话对象session可以很容易的管理跨请求的一些参数。通过时间对比，网络顺畅情况下，程序跑一遍可以达到数百毫秒，而使用Selenium最快的伪浏览器模拟，也需要3s以上。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;http://file.koolearn.com/20150326/14273404312699.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;之前写过一篇文章&lt;a href=&quot;/2016/02/24/Internet_authentication/&quot;&gt;校园网上网认证&lt;/a&gt;,是讲我在校园里通过python实现子的那个上网登录，后来我在这个基础上增加了账号密码存储功能。到这里可能大家又会想到这是上一篇的延续，实际上并不是。在那篇文章里面，我在尝试了几种网络模块之后选择了Requests，它基于urllib3，隐式的在内部实现了很多特性。&lt;/p&gt;
&lt;p&gt;在&lt;a href=&quot;/2016/02/27/selenium/&quot;&gt;Selenium模拟测试教务数据&lt;/a&gt;这篇文章中，我说过，
    
    </summary>
    
      <category term="Python" scheme="http://peihao.space/categories/Python/"/>
    
    
      <category term="Python" scheme="http://peihao.space/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python中的map_reduce</title>
    <link href="http://peihao.space/2016/03/07/Map_Reduce/"/>
    <id>http://peihao.space/2016/03/07/Map_Reduce/</id>
    <published>2016-03-07T14:23:35.000Z</published>
    <updated>2016-03-16T07:57:28.929Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://cimage.tianjimedia.com/uploadImages/2012/283/7Q94QWFV28V7.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;提起map和reduce想必大家并不陌生，Google公司2003年提出了一个名为MapReduce的编程模型，用于处理大规模海量数据，并在之后广泛的应用于Google的各项应用中，2006年Apache的Hadoop项目正式将MapReduce纳入到项目中。&lt;/p&gt;
&lt;p&gt;好吧，闲话少说，今天要介绍的是Python函数式编程中的另外两个内建函数map()和reduce()，而不是Google的MapReduce。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;map&quot;&gt;map&lt;/h1&gt;&lt;p&gt;格式：&lt;code&gt;map( func, seq1[, seq2...] )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Python函数式编程中的&lt;code&gt;map()&lt;/code&gt;函数是将&lt;code&gt;func&lt;/code&gt;作用于&lt;code&gt;seq&lt;/code&gt;中的每一个元素，并用一个列表给出返回值。如果&lt;code&gt;func&lt;/code&gt;为&lt;code&gt;None&lt;/code&gt;，作用同&lt;code&gt;zip()&lt;/code&gt;。&lt;/p&gt;
&lt;h2 id=&quot;seq只有一个时&quot;&gt;seq只有一个时&lt;/h2&gt;&lt;p&gt;将func函数作用于这个seq的每个元素上，得到一个新的seq。下图说明了只有一个seq的时候map()函数是如何工作的&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.pythoner.com/wp-content/uploads/2013/01/map-1-300x162.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;可以看出，seq中的每个元素都经过了func函数的作用，得到了func(seq[n])组成的列表。&lt;/p&gt;
&lt;p&gt;下面举一个例子进行说明。假设我们想要得到一个列表中数字%3的余数，那么可以写成下面的代码。&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 使用map&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; map( &lt;span class=&quot;keyword&quot;&gt;lambda&lt;/span&gt; x: x%&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, range(&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;) )  &lt;span class=&quot;comment&quot;&gt;# [0, 1, 2, 3, 0, 1, 2, 3, 0]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#使用列表解析&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; [x%&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; x &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; range(&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;)]  &lt;span class=&quot;comment&quot;&gt;# [0, 1, 2, 3, 0, 1, 2, 3, 0]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;seq多于一个&quot;&gt;seq多于一个&lt;/h2&gt;&lt;p&gt;&lt;code&gt;map&lt;/code&gt;可以并行地对每个seq执行如下图所示的过程：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.pythoner.com/wp-content/uploads/2013/01/map-2-300x191.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;也就是说每个seq的同一位置的元素在执行过一个多元的func函数之后，得到一个返回值，这些返回值放在一个结果列表中。&lt;/p&gt;
&lt;p&gt;下面的例子是求两个列表对应元素的积，可以想象，这是一种可能会经常出现的状况，而如果不是用map的话，就要使用一个for循环，依次对每个位置执行该函数。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;print map( lambda x, y: x * y, [4, 5, 6],[1, 2, 3] )  # [4, 10, 18]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;上面是返回值是一个值的情况，实际上也可以是一个元组。下面的代码不止实现了乘法，也实现了加法，并把积与和放在一个元组中。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;print map( lambda x, y: ( x * y, x + y),[4, 5, 6],[1, 2, 3])  # [(4, 5), (10, 7), (18, 9)]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;还有就是上面说的&lt;code&gt;func&lt;/code&gt;是&lt;code&gt;None&lt;/code&gt;的情况，它的目的是将多个列表相同位置的元素归并到一个元组，在现在已经有了专用的函数&lt;code&gt;zip()&lt;/code&gt;了。&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; map( &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;] )  &lt;span class=&quot;comment&quot;&gt;# [(1, 4), (2, 5), (3, 6)]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; zip( [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;] )  &lt;span class=&quot;comment&quot;&gt;# [(1, 4), (2, 5), (3, 6)]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;reduce&quot;&gt;reduce&lt;/h1&gt;&lt;p&gt;格式：&lt;code&gt;reduce( func, seq[, init] )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;reduce&lt;/code&gt;函数即为化简，它是这样一个过程：每次迭代，将上一次的迭代结果（第一次时为init的元素，如没有&lt;code&gt;init&lt;/code&gt;则为&lt;code&gt;seq&lt;/code&gt;的第一个元素）与下一个元素一同执行一个二元的&lt;code&gt;func&lt;/code&gt;函数。在&lt;code&gt;reduce&lt;/code&gt;函数中，&lt;code&gt;init&lt;/code&gt;是可选的，如果使用，则作为第一次迭代的第一个元素使用。&lt;/p&gt;
&lt;p&gt;简单来说，可以用这样一个形象化的式子来说明：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;reduce( func, [1, 2, 3, 4] ) = func( func(1, 2), 3, 4)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;下面是reduce函数的工作过程图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.pythoner.com/wp-content/uploads/2013/01/reduce.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;举个例子来说，阶乘是一个常见的数学方法，Python中并没有给出一个阶乘的内建函数，我们可以使用&lt;code&gt;reduce&lt;/code&gt;实现一个阶乘的代码。&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;n = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; reduce(&lt;span class=&quot;keyword&quot;&gt;lambda&lt;/span&gt; x, y: x * y, range(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, n + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;))  &lt;span class=&quot;comment&quot;&gt;# 120&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;那么，如果我们希望得到2倍阶乘的值呢？这就可以用到&lt;code&gt;init&lt;/code&gt;这个可选参数了&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;m = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;n = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; reduce( &lt;span class=&quot;keyword&quot;&gt;lambda&lt;/span&gt; x, y: x * y, range( &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, n + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; ), m )  &lt;span class=&quot;comment&quot;&gt;# 240&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://cimage.tianjimedia.com/uploadImages/2012/283/7Q94QWFV28V7.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;提起map和reduce想必大家并不陌生，Google公司2003年提出了一个名为MapReduce的编程模型，用于处理大规模海量数据，并在之后广泛的应用于Google的各项应用中，2006年Apache的Hadoop项目正式将MapReduce纳入到项目中。&lt;/p&gt;
&lt;p&gt;好吧，闲话少说，今天要介绍的是Python函数式编程中的另外两个内建函数map()和reduce()，而不是Google的MapReduce。&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="http://peihao.space/categories/Python/"/>
    
    
      <category term="Python" scheme="http://peihao.space/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Verilog小叙(一)</title>
    <link href="http://peihao.space/2016/03/06/verilog_hdl/"/>
    <id>http://peihao.space/2016/03/06/verilog_hdl/</id>
    <published>2016-03-06T14:23:35.000Z</published>
    <updated>2016-03-09T05:58:28.977Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;前言&lt;/h1&gt;&lt;p&gt;当前业界的硬件描述语言中主要有VHDL 和Verilog HDL。根据当前ASIC/FPGA设计现有的特点、现状，Verilog HDL 语言已经成为决定的主导语言，使用Verilog HDL，可以统一ASIC/FPGA设计平台，简化流程。&lt;/p&gt;
&lt;h1 id=&quot;设计方法学&quot;&gt;设计方法学&lt;/h1&gt;&lt;h2 id=&quot;数字电路设计方法&quot;&gt;数字电路设计方法&lt;/h2&gt;&lt;p&gt;当前的数字电路设计从层次上分可分成以下几个层次：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;算法级设计：利用高级语言如C语言及其他一些系统分析工具（如MATLAB）对设计从系统的算法级方式进行描述。算法级不需要包含时序信息。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;RTL级设计：用数据流在寄存器间传输的模式来对设计进行描述。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;门级：用逻辑级的与、或、非门等门级之间的连接对设计进行描述。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;开关级：用晶体管和寄存器及他们之间的连线关系来对设计进行描述。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;算法级是高级的建模，一般对特大型设计或有较复杂的算法时使用，特别是通讯方面的一些系统，通过算法级的建模来保证设计的系统性能。在算法级通过后，再把算法级用RTL级进行描述。门级一般对小型设计可适合。开关级一般是在版图级进行。&lt;/p&gt;
&lt;p&gt;最常使用的是RTL级别的设计，90%以上的数字电路都是采用RTL级别进行设计。&lt;/p&gt;
&lt;h2 id=&quot;硬件描述语言&quot;&gt;硬件描述语言&lt;/h2&gt;&lt;p&gt;硬件描述语言HDL（Hardware Description Language ）是一种用形式化方法来描述数字电路和数字逻辑系统的语言。数字逻辑电路设计者可利用这种语言来描述自己的设计思想，然后利用EDA工具进行仿真，再自动综合到门级电路，最后用ASIC或FPGA实现其功能。举个例子，在传统的设计方法中，对2输入的与门，我们可能需到标准器件库中调个74系列的器件出来，但在硬件描述语言中，“&amp;amp; ”就是一个与门的形式描述，“C = A &amp;amp; B”就是一个2输入与门的描述。而“and”就是一个与门器件。&lt;br&gt;硬件描述语言发展至今已有二十多年历史，当今业界的标准中（IEEE标准）主要有VHDL和Verilog HDL 这两种硬件描述语言。&lt;/p&gt;
&lt;h2 id=&quot;设计方法学-1&quot;&gt;设计方法学&lt;/h2&gt;&lt;p&gt;当前的ASIC设计有多种设计方法，但一般地采用自顶向下的设计方法。&lt;br&gt;随着技术的发展，一个芯片上往往集成了几十万到几百万个器件，传统的自底向上的设计方法已不太现实。因此，一个设计往往从系统级设计开始，把系统划分成几个大的基本的功能模块，每个功能模块再按一定的规则分成下一个层次的基本单元，如此一直划分下去。&lt;br&gt;通过自顶向下的设计方法，可实现设计的结构化，使一个复杂的系统设计可由多个设计者分工合作；还可以实现层次化的管理。&lt;/p&gt;
&lt;h1 id=&quot;Verilog简介&quot;&gt;Verilog简介&lt;/h1&gt;&lt;h2 id=&quot;简介&quot;&gt;简介&lt;/h2&gt;&lt;p&gt;Verilog HDL 语言最初是于1983 年由Gateway Design Automation 公司为其模拟器产品开发的硬件建模语言。那时它只是一种专用语言。由于他们的模拟、仿真器产品的广泛使用，Verilog HDL作为一种便于使用且实用的语言逐渐为众多设计者所接受。在一次努力增加语言普及性的活动中，Verilog HDL 语言于1990 年被推向公众领域。Open Verilog International（O V I ）是促进Verilog 发展的国际性组织。1992 年，OVI 决定致力于推广Verilog OVI 标准成为IEEE 标准。这一努力最后获得成功，Verilog 语言于1995 年成为IEEE 标准，称为IEEE Std1364－1995 。完整的标准在Verilog 硬件描述语言参考手册中有详细描述。&lt;/p&gt;
&lt;h2 id=&quot;功能&quot;&gt;功能&lt;/h2&gt;&lt;p&gt;Verilog HDL 语言具有下述描述能力：设计的行为特性、设计的数据流特性、设计的结构组成以及包含响应监控和设计验证方面的时延和波形产生机制。所有这些都使用同一种建模语言。此外，Verilog HDL 语言提供了编程语言接口，通过该接口可以在模拟、验证期间从设计外部访问设计，包括模拟的具体控制和运行。&lt;br&gt;需要注意的是Verilog HDL当前主要作为设计使用，大规模的电路设计使用Verilog HDL作为验证语言已经被不太可能，当前的验证语言已经逐渐归一到System Verilog 语言上去。当然，非常小规模的设计可以使用Verilog HDL搭建UT（单元测试）环境进行测试。&lt;br&gt;Verilog HDL 语言不仅定义了语法，而且对每个语法结构都定义了清晰的模拟、仿真语义。因此，用这种语言编写的模型能够使用Verilog 仿真器进行验证。语言从C 编程语言中继承了多种操作符和结构。Verilog HDL 提供了扩展的建模能力，其中许多扩展最初很难理解。但是，Verilog HDL 语言的核心子集非常易于学习和使用，这对大多数建模应用来说已经足够。当然，完整的硬件描述语言足以对从最复杂的芯片到完整的电子系统进行描述。&lt;/p&gt;
&lt;h1 id=&quot;Verilog建模概述&quot;&gt;Verilog建模概述&lt;/h1&gt;&lt;p&gt;在数字电路设计中，数字电路可简单归纳为两种要素：&lt;code&gt;线&lt;/code&gt;和&lt;code&gt;器件&lt;/code&gt;。线是器件&lt;code&gt;管脚之间的物理连线&lt;/code&gt;；器件也可简单归纳为&lt;code&gt;组合逻辑器件&lt;/code&gt;（如与或非门等）和&lt;code&gt;时序逻辑器件&lt;/code&gt;（如寄存器、锁存器、RAM等）。一个数字系统（硬件）就是&lt;strong&gt;多个器件通过一定的连线关系组合在一块&lt;/strong&gt;的。因此，Verilog HDL的建模实际上就是如何使用HDL语言对数字电路的两种基本要素的特性及相互之间的关系进行描述的过程。下面通过一些实例，以便对Verilog HDL 的设计建模有个大概的印象。&lt;/p&gt;
&lt;h2 id=&quot;模块&quot;&gt;模块&lt;/h2&gt;&lt;p&gt;模块（module）是Verilog 的基本描述单位，用于&lt;code&gt;描述&lt;/code&gt;某个&lt;code&gt;设计&lt;/code&gt;的&lt;strong&gt;功能或结构及与其他模块通信的外部端口&lt;/strong&gt;。&lt;br&gt;模块在概念上可等同一个器件。就如我们调用通用器件（与门、三态门等）或通用宏单元（计数器、ALU、CPU）等，因此，一个模块可在另一个模块中调用。&lt;br&gt;一个电路设计可由多个模块组合而成，因此一个模块的设计只是一个系统设计中的某个层次设计，模块设计可采用多种建模方式。&lt;/p&gt;
&lt;h2 id=&quot;简单例子&quot;&gt;简单例子&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;加法器：&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;module &lt;span class=&quot;title&quot;&gt;addr&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] a,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] b,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input &lt;span class=&quot;built_in&quot;&gt;cin&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output count,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] sum）；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assign &amp;#123;count,sum&amp;#125; = a +b + &lt;span class=&quot;built_in&quot;&gt;cin&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;该例描述一个3位加法器，从例子可看出整个模块是以module 开始，endmodule 结束。本例子使用Verilog HDL 2001语法结构，输入输出仿在module声明里面。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;比较器&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;module compare （&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] a, &lt;span class=&quot;comment&quot;&gt;// declare the input signal ;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] b; &lt;span class=&quot;comment&quot;&gt;// declare the input signal ;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output equare &lt;span class=&quot;comment&quot;&gt;// declare the output signal;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;) ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assign equare = (a == b) ? &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; ; &lt;span class=&quot;comment&quot;&gt;// if a = b , output 1, otherwise 0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;模块结构&quot;&gt;模块结构&lt;/h2&gt;&lt;p&gt;通过上面的实例可看出，一个设计是由一个个模块（module）构成的。一个模块的设计如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;模块内容是嵌在module 和endmodule两个语句之间。每个模块实现特定的功能，模块可进行层次的嵌套，因此可以将大型的数字电路设计分割成大小不一的小模块来实现特定的功能，最后通过由顶层模块调用子模块来实现整体功能，这就是Top-Down的设计思想。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;模块包括接口描述部分和逻辑功能描述部分。这可以把模块与器件相类比。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;模块的端口定义部,如上例：&lt;br&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;module &lt;span class=&quot;title&quot;&gt;addr&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] a,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] b,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input &lt;span class=&quot;built_in&quot;&gt;cin&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output count,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] sum）；&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;其中module 是模块的保留字，addr 是模块的名字，相当于器件名。（）内是该模块的端口声明、输入和输出声明、位宽声明、wire/reg类型声明。&lt;/p&gt;
&lt;p&gt;端口声明定义了该模块的管脚名，是该模块与其他模块通讯的外部接口，相当于器件的pin 。&lt;/p&gt;
&lt;p&gt;输入和输出声明定义了该模块的管脚是输入还是输出。&lt;/p&gt;
&lt;p&gt;位宽声明定义了该模块的管脚的位宽，从高到低进行定义。&lt;/p&gt;
&lt;p&gt;wire/reg类型声明定义了该模块的管脚的属性，一般输入都是wire，建议不显式写出来，直接input [2:0] a这样既可，输出必须显式定义出wire还是reg。&lt;/p&gt;
&lt;p&gt;模块的内容，包括内部信号、调用模块等的声明语句和功能定义语句。&lt;/p&gt;
&lt;p&gt;内部信号需要定义wire/reg类型、声明信号位宽。&lt;/p&gt;
&lt;p&gt;逻辑功能描述部分如： assign d_out = d_en ? din :’bz;&lt;/p&gt;
&lt;p&gt;功能描述用来产生各种逻辑（主要是组合逻辑和时序逻辑，可用多种方法进行描述，具体的用法下面章节有介绍），还可用来实例化一个器件，该器件可以是厂家的器件库也可以是我们自己用HDL设计的模块（相当于在原理图输入时调用一个库元件）。在逻辑功能描述中，主要用到assign 和always 两个语句。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;对每个模块都要进行端口定义，并说明输入、输出口，然后对模块的功能进行逻辑描述，当然，对测试模块，可以没有输入输出口。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Verilog HDL 的书写格式，一行可以写几个语句，也可以一个语句分几行写。此处建议一行写一个语句，禁止写多个一句，养成良好的代码编写习惯。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;除endmodule 语句外，每个语句后面需有分号表示该语句结束。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;时延&quot;&gt;时延&lt;/h2&gt;&lt;p&gt;信号在电路中传输会有传播延时等，如线延时、器件延时。时延就是对延时特性的HDL描述。&lt;br&gt;举例如下：&lt;br&gt;assign # 2 B = A；&lt;br&gt;表示 B信号在2个时间单位后得到A信号的值。&lt;br&gt;在Verilog HDL中，所有时延都必须根据时间单位进行定义，定义方式为在文件头添加如下语句：&lt;br&gt;`timescale 1ns/100ps&lt;br&gt;其中’timescale 是Verilog HDL 提供的预编译处理命令， 1ns 表示时间单位是1ns ，100ps表示时间精度是100ps。根据该命令，编译工具才可以认知 #2 为2ns。&lt;br&gt;在Verilog HDL 的IEEE标准中没有规定时间单位的缺省值，由各模拟工具确定。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tips&lt;/strong&gt;&lt;br&gt;时延是不可综合的，只在仿真时候使用。&lt;/p&gt;
&lt;h2 id=&quot;结构化描述方式&quot;&gt;结构化描述方式&lt;/h2&gt;&lt;p&gt;结构化的建模方式就是通过对电路结构的描述来建模，即通过对器件的调用（HDL概念称为例化），并使用线网来连接各器件的描述方式。这里的器件包括Verilog HDL的内置门如与门and，异或门xor等，也可以是用户的一个设计。结构化的描述方式反映了一个设计的层次结构。&lt;/p&gt;
&lt;p&gt;例：一位全加器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xowaa.com1.z0.glb.clouddn.com/verilog_hdl.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;module &lt;span class=&quot;title&quot;&gt;FA_struct&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input A,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input B,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input Cin,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output Sum,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output Count&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire S1, T1, T2, T3;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;xor &lt;span class=&quot;title&quot;&gt;x1&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(S1, A, B)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;xor &lt;span class=&quot;title&quot;&gt;x2&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(Sum, S1, Cin)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;and &lt;span class=&quot;title&quot;&gt;A1&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(T3, A, B )&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;and &lt;span class=&quot;title&quot;&gt;A2&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(T2, B, Cin)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;and &lt;span class=&quot;title&quot;&gt;A3&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(T1, A, Cin)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;or &lt;span class=&quot;title&quot;&gt;O1&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(Cout, T1, T2, T3 )&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;该实例显示了一个全加器由两个异或门、三个与门、一个或门构成。S1、T1、T2、T3则是门与门之间的连线。代码显示了用纯结构的建模方式，其中xor、and、or 是Verilog HDL 内置的门器件和关键字。&lt;br&gt;以 xor x1 (S1,A,B) 该例化语句为例：&lt;br&gt;xor 表明调用一个内置的异或门，器件名称xor ，代码实例化名x1（类似原理图输入方式）。括号内的S1，A，B 表明该器件管脚的实际连接线（信号）的名称 ，其中 A、B是输入，S1是输出。其他同。&lt;/p&gt;
&lt;h2 id=&quot;数据流描述方式&quot;&gt;数据流描述方式&lt;/h2&gt;&lt;p&gt;数据流的建模方式就是通过对数据流在设计中的具体行为的描述的来建模。最基本的机制就是用连续赋值语句。在连续赋值语句中，某个值被赋给某个线网变量（信号），语法如下：&lt;br&gt;assign [delay] net_name = expression;&lt;br&gt;如：assign #2 A = B；&lt;br&gt;在数据流描述方式中，还必须借助于HDL提供的一些运算符，如按位逻辑运算符 ：逻辑与（&amp;amp;)，逻辑或（|）等。&lt;br&gt;还是以上面的全加器为例，可用如下的建模方式：&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;`timescale &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;ns/&lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;function&quot;&gt;ps&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;module &lt;span class=&quot;title&quot;&gt;FA_flow&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input A,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input B,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input Cin,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output wire Sum,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output wire Count&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wire S1,T1,T2,T3;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assign &lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; S1 = A ^ B;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assign &lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; Sum = S1 ^ Cin;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assign &lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; T3 = A &amp;amp; B;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assign &lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; T1 = A &amp;amp; Cin;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assign &lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; T2 = B &amp;amp; Cin ;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注意在各assign 语句之间，是并行执行的，即各语句的执行与语句之间的顺序无关。如上，当A有个变化时，S1、T3、T1 将同时变化，S1的变化又会造成Sum的变化。&lt;/p&gt;
&lt;h2 id=&quot;行为描述方式&quot;&gt;行为描述方式&lt;/h2&gt;&lt;p&gt;行为方式的建模是指采用对信号行为级的描述的方法来建模。在表示方面，类似数据流的建模方式，但一般是always 块语句和assign块语句描述的归为行为建模方式。行为建模方式通常需要借助一些行为级的运算符如加法运算符（+），减法运算符（-）等。&lt;br&gt;以下举个例子，对always 语句的具体应用可看相关章节的介绍，这里，先对行为建模方式有个概念。&lt;br&gt;例：一位全加器的行为建模&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;module &lt;span class=&quot;title&quot;&gt;FA_BEHAV1&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input a,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input b,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input &lt;span class=&quot;built_in&quot;&gt;cin&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output sum,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;output &lt;span class=&quot;built_in&quot;&gt;cout&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg sum, &lt;span class=&quot;built_in&quot;&gt;cout&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reg t1,t2,t3;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;always@ ( a or b or &lt;span class=&quot;built_in&quot;&gt;cin&lt;/span&gt; )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		sum = (a ^ b) ^ &lt;span class=&quot;built_in&quot;&gt;cin&lt;/span&gt; ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		t1 = a &amp;amp; &lt;span class=&quot;built_in&quot;&gt;cin&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		t2 = b &amp;amp; &lt;span class=&quot;built_in&quot;&gt;cin&lt;/span&gt; ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		t3 = a &amp;amp; b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;cout&lt;/span&gt; = (t1| t2) | t3;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endmodule&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;需要先建立以下概念：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;只有寄存器类型的信号才可以在always语句中进行赋值，类型定义通过reg语句实现，但是寄存器类型的信号不一定是真的寄存器，也可能是线逻辑，只有带有时钟的寄存器类型的信号才是真的寄存器，不带时钟的寄存器类型的信号本质是线逻辑。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;always 语句是一直重复执行，由敏感表（always 语句括号内的变量）中的变量触发。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;always 语句从0 时刻开始。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;阻塞赋值“=”在begin 和end 之间的语句是顺序执行，属于串行语句。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;非阻塞赋“&amp;lt;=”值在begin 和end 之间的语句是并行执行，属于并行执语句。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;&lt;p&gt;当前数字逻辑规模越来越大，使用结构化描述已经越来越不现实，也没有必要，当前行为描述方式已经占据绝对的主导地位，大家学习的时候知道有这两种方式即可，重点学习行为描述。&lt;/p&gt;
&lt;h1 id=&quot;Verilog基本语法&quot;&gt;Verilog基本语法&lt;/h1&gt;&lt;p&gt;介绍Verilog HDL 语言的一些基本要素，包括标识符、注释、格式、数字值集合、两种数据类型、运算符和表达式和一些基本的语句如IF语句等。&lt;/p&gt;
&lt;h2 id=&quot;标识符&quot;&gt;标识符&lt;/h2&gt;&lt;p&gt;标识符( identifier）用于定义模块名、端口名、信号名等。Verilog HDL 中的标识符( identifier)可以是任意一组字母、数字、$符号和_(下划线)符号的组合，但标识符的第一个字符必须是字母或者下划线。另外，标识符是区分大小写的。以下是标识符的几个例子：&lt;br&gt;&lt;code&gt;Count&lt;/code&gt;&lt;br&gt;&lt;code&gt;COUNT&lt;/code&gt; //与Count 不同。&lt;br&gt;&lt;code&gt;R56_68&lt;/code&gt;&lt;br&gt;&lt;code&gt;FIVE$&lt;/code&gt;&lt;br&gt;虽然标识符写法很多，但是推荐写法如下：&lt;br&gt;&lt;code&gt;count&lt;/code&gt;&lt;br&gt;&lt;code&gt;fifo_wr&lt;/code&gt;&lt;br&gt;不建议大小写混合使用，普通内部信号建议全部小写，输入输出PAD建议大写，另外信号命名最好体现信号的含义，简洁、清晰、易懂。&lt;/p&gt;
&lt;h2 id=&quot;关键词&quot;&gt;关键词&lt;/h2&gt;&lt;p&gt;Verilog HDL定义了一系列保留字，叫做关键词，附录A 列出了语言中的所有保留字。注意只有小写的关键词才是保留字。例如，标识符&lt;code&gt;always&lt;/code&gt; (这是个关键词)与标识符&lt;code&gt;ALWAYS&lt;/code&gt;(非关键词)是不同的。&lt;/p&gt;
&lt;h2 id=&quot;书写规范建议&quot;&gt;书写规范建议&lt;/h2&gt;&lt;p&gt;以下是一些书写规范的要求，可参考公司的《Verilog 代码书写规范》。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;用有意义的有效的名字如 sum 、cpu_addr等。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用下划线区分词。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;采用一些前缀或后缀，如&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;时钟采用clk前缀：clk_50，clk_cpu；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;低电平采用_n 后缀：enable_n；&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;统一一定的缩写，如全局复位信号rst。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;同一信号在不同层次保持一致性，如同一时钟信号必须在各模块保持一致。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;自定义的标识符不能与保留字同名。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;参数采用大写，如SIZE 。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;注释&quot;&gt;注释&lt;/h2&gt;&lt;p&gt;Verilog HDL中有两种注释的方式，一种是以&lt;code&gt;“/*”&lt;/code&gt;符号开始，&lt;code&gt;“*/”&lt;/code&gt; 结束，在两个符号之间的语句都是注释语句，因此可扩展到多行。如：&lt;br&gt;&lt;figure class=&quot;highlight gherkin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/&lt;span class=&quot;keyword&quot;&gt;*&lt;/span&gt; statement1 ，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;statement2，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.. ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;statementn &lt;span class=&quot;keyword&quot;&gt;*&lt;/span&gt;/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;以上n个语句都是注释语句。&lt;br&gt;另一种是以//开头的语句，它表示以&lt;code&gt;//&lt;/code&gt;开始到本行结束都属于注释语句。&lt;br&gt;建议写法：使用&lt;code&gt;//&lt;/code&gt;作为注释。&lt;/p&gt;
&lt;h2 id=&quot;值集合&quot;&gt;值集合&lt;/h2&gt;&lt;p&gt;Verilog HDL中规定了四种基本的值类型：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;0：逻辑0或“假”；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;1：逻辑1或“真”；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;X：未知值；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Z：高阻&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;注意这四种值的解释都内置于语言中。如一个为z的值总是意味着高阻抗，一个为0 的值通常&lt;br&gt;是指逻辑0 。&lt;br&gt;在门的输入或一个表达式中的为&lt;code&gt;“z”&lt;/code&gt;的值通常解释成&lt;code&gt;“x”&lt;/code&gt;。&lt;br&gt;此外，&lt;code&gt;x&lt;/code&gt;值和&lt;code&gt;z&lt;/code&gt;值都是不分大小写的，也就是说，值&lt;code&gt;0x1z&lt;/code&gt;与值&lt;code&gt;0X1Z&lt;/code&gt;相同。&lt;br&gt;Verilog HDL 中的常量是由以上这四类基本值组成的。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;前言&lt;/h1&gt;&lt;p&gt;当前业界的硬件描述语言中主要有VHDL 和Verilog HDL。根据当前ASIC/FPGA设计现有的特点、现状，Verilog HDL 语言已经成为决定的主导语言，使用Verilog HDL，可以统一ASIC/FPGA设计平台，简化流程。&lt;/p&gt;
&lt;h1 id=&quot;设计方法学&quot;&gt;设计方法学&lt;/h1&gt;&lt;h2 id=&quot;数字电路设计方法&quot;&gt;数字电路设计方法&lt;/h2&gt;&lt;p&gt;当前的数字电路设计从层次上分可分成以下几个层次：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;算法级设计：利用高级语言如C语言及其他一些系统分析工具（如MATLAB）对设计从系统的算法级方式进行描述。算法级不需要包含时序信息。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;RTL级设计：用数据流在寄存器间传输的模式来对设计进行描述。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;门级：用逻辑级的与、或、非门等门级之间的连接对设计进行描述。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;开关级：用晶体管和寄存器及他们之间的连线关系来对设计进行描述。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="Verilog" scheme="http://peihao.space/categories/Verilog/"/>
    
    
      <category term="Verilog HDL" scheme="http://peihao.space/tags/Verilog-HDL/"/>
    
      <category term="仿真" scheme="http://peihao.space/tags/%E4%BB%BF%E7%9C%9F/"/>
    
  </entry>
  
  <entry>
    <title>初窥Scrapy(Py3.x)</title>
    <link href="http://peihao.space/2016/02/28/scrapy/"/>
    <id>http://peihao.space/2016/02/28/scrapy/</id>
    <published>2016-02-28T14:23:35.000Z</published>
    <updated>2016-03-16T07:56:40.383Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://a1.jikexueyuan.com/home/201506/08/d4bc/5574f3f42607c.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Scrapy是一个为了爬取网站数据，提取结构性数据而编写的应用框架。 可以应用在包括数据挖掘，信息处理或存储历史数据等一系列的程序中。&lt;/p&gt;
&lt;p&gt;其最初是为了 页面抓取 (更确切来说, 网络抓取 )所设计的， 也可以应用在获取API所返回的数据(例如 Amazon Associates Web Services ) 或者通用的网络爬虫。&lt;/p&gt;
&lt;p&gt;本文档将通过介绍Scrapy背后的概念使您对其工作原理有所了解， 并确定Scrapy是否是您所需要的。&lt;/p&gt;
&lt;p&gt;当您准备好开始您的项目后，您可以参考 &lt;a href=&quot;http://scrapy-chs.readthedocs.org/zh_CN/latest/intro/tutorial.html#intro-tutorial&quot; title=&quot;入门教程&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;入门教程&lt;/a&gt; 。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;选择一个网站&quot;&gt;选择一个网站&lt;/h1&gt;&lt;p&gt;当您需要从某个网站中获取信息，但该网站未提供API或能通过程序获取信息的机制时， Scrapy可以助你一臂之力。&lt;/p&gt;
&lt;p&gt;以 &lt;a href=&quot;http://www.mininova.org/&quot; title=&quot;Mininova&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Mininova&lt;/a&gt; 网站为例，我们想要获取今日添加的所有种子的URL、 名字、描述以及文件大小信息。&lt;/p&gt;
&lt;p&gt;今日添加的种子列表可以通过这个页面找到:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.mininova.org/today&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.mininova.org/today&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;定义您想抓取的数据&quot;&gt;定义您想抓取的数据&lt;/h1&gt;&lt;p&gt;第一步是定义我们需要爬取的数据。在Scrapy中， 这是通过&lt;a href=&quot;http://scrapy-chs.readthedocs.org/zh_CN/latest/topics/items.html#topics-items&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Scrapy Items&lt;/a&gt; 来完成的。(在本例子中为种子文件)&lt;/p&gt;
&lt;p&gt;我们定义的Item:&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; scrapy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;TorrentItem&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(scrapy.Item)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    url = scrapy.Field()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    name = scrapy.Field()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    description = scrapy.Field()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    size = scrapy.Field()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第二步是编写一个spider。其定义了初始URL(&lt;a href=&quot;http://www.mininova.org/today&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.mininova.org/today&lt;/a&gt;)、 针对后续链接的规则以及从页面中提取数据的规则。&lt;/p&gt;
&lt;p&gt;通过观察页面的内容可以发现，所有种子的URL都类似 &lt;code&gt;http://www.mininova.org/tor/NUMBER&lt;/code&gt; 。 其中， &lt;code&gt;NUMBER&lt;/code&gt; 是一个整数。 根据此规律，我们可以定义需要进行跟进的链接的正则表达式: &lt;code&gt;/tor/\d+&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;我们使用 &lt;a href=&quot;http://www.w3.org/TR/xpath&quot; title=&quot;XPath&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;XPath&lt;/a&gt; 来从页面的HTML源码中选择需要提取的数据。 以其中一个种子文件的页面为例:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.mininova.org/tor/2676093&quot; title=&quot;http://www.mininova.org/tor/2676093&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.mininova.org/tor/2676093&lt;/a&gt;&lt;br&gt;观察HTML页面源码并创建我们需要的数据(种子名字，描述和大小)的XPath表达式。&lt;/p&gt;
&lt;p&gt;通过观察，我们可以发现文件名是包含在 &lt;code&gt;&amp;lt;h1&amp;gt;&lt;/code&gt; 标签中的:&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;Darwin - The Evolution Of An Exhibition&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;与此对应的XPath表达式:&lt;/p&gt;
&lt;figure class=&quot;highlight 1c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//h1/text()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;种子的描述是被包含在 &lt;code&gt;id=&amp;quot;description&amp;quot;&lt;/code&gt; 的 &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt; 标签中:&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;h2&lt;/span&gt;&amp;gt;&lt;/span&gt;Description:&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;h2&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;description&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Short documentary made for Plymouth City Museum and Art Gallery regarding the setup of an exhibit about Charles Darwin in conjunction with the 200th anniversary of his birth.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;对应获取描述的XPath表达式:&lt;/p&gt;
&lt;figure class=&quot;highlight autoit&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;//div[&lt;span class=&quot;constant&quot;&gt;@id&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;description&#39;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;文件大小的信息包含在 &lt;code&gt;id=specifications&lt;/code&gt; 的 &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt; 的第二个 &lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt; 标签中:&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;specifications&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;strong&lt;/span&gt;&amp;gt;&lt;/span&gt;Category:&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;strong&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;/cat/4&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Movies&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt; &amp;amp;gt; &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;/sub/35&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Documentary&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;strong&lt;/span&gt;&amp;gt;&lt;/span&gt;Total size:&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;strong&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150.62&amp;amp;nbsp;megabyte&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;选择文件大小的XPath表达式:&lt;/p&gt;
&lt;figure class=&quot;highlight prolog&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;//&lt;span class=&quot;atom&quot;&gt;div&lt;/span&gt;[@&lt;span class=&quot;atom&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;specifications&#39;&lt;/span&gt;]/&lt;span class=&quot;atom&quot;&gt;p&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;]/&lt;span class=&quot;atom&quot;&gt;text&lt;/span&gt;()[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;关于XPath的详细内容请参考&lt;a href=&quot;http://www.w3.org/TR/xpath&quot; title=&quot;XPath参考手册&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.w3.org/TR/xpath&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最后，结合以上内容给出spider的代码:&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from scrapy&lt;span class=&quot;class&quot;&gt;.contrib&lt;/span&gt;&lt;span class=&quot;class&quot;&gt;.spiders&lt;/span&gt; import CrawlSpider, Rule&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;from scrapy&lt;span class=&quot;class&quot;&gt;.contrib&lt;/span&gt;&lt;span class=&quot;class&quot;&gt;.linkextractors&lt;/span&gt; import LinkExtractor&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;class &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;MininovaSpider&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(CrawlSpider)&lt;/span&gt;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    name = &lt;span class=&quot;string&quot;&gt;&#39;mininova&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    allowed_domains = [&lt;span class=&quot;string&quot;&gt;&#39;mininova.org&#39;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    start_urls = [&lt;span class=&quot;string&quot;&gt;&#39;http://www.mininova.org/today&#39;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rules = [&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;Rule&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(LinkExtractor(allow=[&lt;span class=&quot;string&quot;&gt;&#39;/tor/\d+&#39;&lt;/span&gt;])&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;parse_torrent&#39;&lt;/span&gt;)]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    def &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;parse_torrent&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, response)&lt;/span&gt;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        torrent = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;TorrentItem&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        torrent[&lt;span class=&quot;string&quot;&gt;&#39;url&#39;&lt;/span&gt;] = response&lt;span class=&quot;class&quot;&gt;.url&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        torrent[&lt;span class=&quot;string&quot;&gt;&#39;name&#39;&lt;/span&gt;] = response.&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;xpath&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;string&quot;&gt;&quot;//h1/text()&quot;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;extract&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        torrent[&lt;span class=&quot;string&quot;&gt;&#39;description&#39;&lt;/span&gt;] = response.&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;xpath&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;string&quot;&gt;&quot;//div[@id=&#39;description&#39;]&quot;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;extract&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        torrent[&lt;span class=&quot;string&quot;&gt;&#39;size&#39;&lt;/span&gt;] = response.&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;xpath&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;string&quot;&gt;&quot;//div[@id=&#39;info-left&#39;]/p[2]/text()[2]&quot;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;extract&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return torrent&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;TorrentItem&lt;/code&gt; 的定义在上面&lt;/p&gt;
&lt;h1 id=&quot;执行spider，获取数据&quot;&gt;执行spider，获取数据&lt;/h1&gt;&lt;p&gt;终于，我们可以运行spider来获取网站的数据，并以JSON格式存入到 &lt;code&gt;scraped_data.json&lt;/code&gt; 文件中:&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scrapy crawl mininova -o scraped_data.json&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;命令中使用了 feed导出 来导出JSON文件。您可以修改导出格式(XML或者CSV)或者存储后端(FTP或者 Amazon S3)，这并不困难。&lt;/p&gt;
&lt;p&gt;同时，您也可以编写 &lt;a href=&quot;http://scrapy-chs.readthedocs.org/zh_CN/latest/topics/item-pipeline.html#topics-item-pipeline&quot; title=&quot;item管道&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;item管道&lt;/a&gt; 将item存储到数据库中。&lt;/p&gt;
&lt;h1 id=&quot;查看提取到的数据&quot;&gt;查看提取到的数据&lt;/h1&gt;&lt;p&gt;执行结束后，当您查看 &lt;code&gt;scraped_data.json&lt;/code&gt; , 您将看到提取到的&lt;code&gt;item&lt;/code&gt;:&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[&amp;#123;&quot;&lt;span class=&quot;attribute&quot;&gt;url&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;http://www.mininova.org/tor/2676093&quot;&lt;/span&gt;&lt;/span&gt;, &quot;&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&quot;Darwin - The Evolution Of An Exhibition&quot;&lt;/span&gt;]&lt;/span&gt;, &quot;&lt;span class=&quot;attribute&quot;&gt;description&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&quot;Short documentary made for Plymouth ...&quot;&lt;/span&gt;]&lt;/span&gt;, &quot;&lt;span class=&quot;attribute&quot;&gt;size&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&quot;150.62 megabyte&quot;&lt;/span&gt;]&lt;/span&gt;&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# ... other items ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;由于 selectors 返回list, 所以值都是以list存储的(除了 url 是直接赋值之外)。 如果您想要保存单个数据或者对数据执行额外的处理,那将是 Item Loaders 发挥作用的地方。&lt;/p&gt;
&lt;h1 id=&quot;支持Python3-x的新版本&quot;&gt;支持Python3.x的新版本&lt;/h1&gt;&lt;p&gt;最新的一个好消息是，1.10rc新版本终于可以在Python3.x上使用，下载地址 &lt;a href=&quot;https://codeload.github.com/scrapy/scrapy/zip/master&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;戳这里&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;下载完成之后，在终端使用命令&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;python setup&lt;span class=&quot;class&quot;&gt;.py&lt;/span&gt; install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;即可使用！&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://a1.jikexueyuan.com/home/201506/08/d4bc/5574f3f42607c.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Scrapy是一个为了爬取网站数据，提取结构性数据而编写的应用框架。 可以应用在包括数据挖掘，信息处理或存储历史数据等一系列的程序中。&lt;/p&gt;
&lt;p&gt;其最初是为了 页面抓取 (更确切来说, 网络抓取 )所设计的， 也可以应用在获取API所返回的数据(例如 Amazon Associates Web Services ) 或者通用的网络爬虫。&lt;/p&gt;
&lt;p&gt;本文档将通过介绍Scrapy背后的概念使您对其工作原理有所了解， 并确定Scrapy是否是您所需要的。&lt;/p&gt;
&lt;p&gt;当您准备好开始您的项目后，您可以参考 &lt;a href=&quot;http://scrapy-chs.readthedocs.org/zh_CN/latest/intro/tutorial.html#intro-tutorial&quot; title=&quot;入门教程&quot;&gt;入门教程&lt;/a&gt; 。&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="http://peihao.space/categories/Python/"/>
    
    
      <category term="Python" scheme="http://peihao.space/tags/Python/"/>
    
      <category term="Scrapy" scheme="http://peihao.space/tags/Scrapy/"/>
    
  </entry>
  
</feed>
